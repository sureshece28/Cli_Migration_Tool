var JSON;JSON||(JSON={});
(function(){function f(a){return 10>a?"0"+a:a}function d(a){c.lastIndex=0;return c.test(a)?'"'+a.replace(c,function(a){var c=h[a];return"string"===typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function e(c,b){var h,f,m,q,p=a,s,r=b[c];r&&"object"===typeof r&&"function"===typeof r.toJSON&&(r=r.toJSON(c));"function"===typeof k&&(r=k.call(b,c,r));switch(typeof r){case "string":return d(r);case "number":return isFinite(r)?""+r:"null";case "boolean":case "null":return""+r;
case "object":if(!r)return"null";a+=g;s=[];if("[object Array]"===Object.prototype.toString.apply(r)){q=r.length;for(h=0;h<q;h+=1)s[h]=e(h,r)||"null";m=0===s.length?"[]":a?"[\n"+a+s.join(",\n"+a)+"\n"+p+"]":"["+s.join(",")+"]";a=p;return m}if(k&&"object"===typeof k){q=k.length;for(h=0;h<q;h+=1)"string"===typeof k[h]&&(f=k[h],(m=e(f,r))&&s.push(d(f)+(a?": ":":")+m))}else for(f in r)Object.prototype.hasOwnProperty.call(r,f)&&(m=e(f,r))&&s.push(d(f)+(a?": ":":")+m);m=0===s.length?"{}":a?"{\n"+a+s.join(",\n"+
a)+"\n"+p+"}":"{"+s.join(",")+"}";a=p;return m}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var b=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,a,g,h={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},k;"function"!==typeof JSON.stringify&&(JSON.stringify=function(c,b,d){var h;g=a="";if(typeof d==="number")for(h=0;h<d;h=h+1)g=g+" ";else typeof d==="string"&&(g=d);if((k=b)&&typeof b!=="function"&&(typeof b!=="object"||typeof b.length!=="number"))throw Error("JSON.stringify");return e("",
{"":c})});"function"!==typeof JSON.parse&&(JSON.parse=function(a,c){function d(a,b){var g,e,h=a[b];if(h&&typeof h==="object")for(g in h)if(Object.prototype.hasOwnProperty.call(h,g)){e=d(h,g);e!==void 0?h[g]=e:delete h[g]}return c.call(a,b,h)}var g,a=""+a;b.lastIndex=0;b.test(a)&&(a=a.replace(b,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){g=eval("("+a+")");return typeof c==="function"?d({"":g},""):g}throw new SyntaxError("JSON.parse");})})();
(function(f){function d(a){return"object"==typeof a&&a===Object(a)}function e(a){return Array.isArray?Array.isArray(a):"[object Array]"===g.call(a)}function b(a,c,b){var g,b=b||f;if(e(a)){var d=a.length;for(g=0;g<d&&!1!==c.call(b,a[g],g);g++);}else for(g in a)if(!1===c.call(b,a[g],g))break}var c,a=f.fruit;c=f.fruit={$:{},version:"0.2.1",global:f,$package:"fruit",noConflict:function(){f.fruit=a;return c},config:{debug:null!==window.location.search.match("(\\?|&)debug")}};var g=Object.prototype.toString;
c.util={extend:function(){var a=arguments,c=a.length,b=a[0],g=0,e,h;for(1==c&&(b=this);g<c;g++)if(e=a[g],b&&(d(e)||isFunction(e)))for(h in e)b[h]=e[h];return b},each:b,isArray:e,isObject:d,isUndef:function(a){return"undefined"===typeof a},isNull:function(a){return null===a},isDefine:function(a){return!this.isUndef(a)&&!this.isNull(a)},emptyFun:function(){}};b(["Function","String","Boolean","Date","Number"],function(a){fruit.util["is"+a]=function(c){return g.call(c)==="[object "+a+"]"}});var h=fruit.util;
h.createObject=function(a){return Object.create?Object.create(a.prototype):new a};h.extendClass=function(a,c,b){var g=function(){},c=c.prototype;g.prototype=c;g=h.createObject(g);b&&(g.$super=c,g.$fullname=b.$fullname,g.$namespace=b.$namespace,g.$name=b.$name);a.prototype=g;return a.constructor=a};isFunction=fruit.util.isFunction})(window);
(function(f,d){var e,b=Array.prototype.slice,c=eval("''+/*@cc_on @_jscript_version@*/-0"),a=d.logger={setLogger:function(a){d.isFunction(a)&&(e=a)}};e=function(a,g){var e=b.call(g,0);c&&(a="info");"object"==typeof console&&d.isFunction(console[a])&&console[a].apply(console,e)};var g={};d.each(["warn","info","error","debug","log"],function(c){a[c]=function(a){var j=f.config.debug;this.$name&&(j=g[this.$fullname]||j);if(!("error"!=c&&"warn"!=c&&!j)){d.isString(a)&&0<=a.indexOf("{0}")?(j=b.call(arguments,
1),a=f.util.format(a,j),j=[a]):j=b.call(arguments,0);var l=arguments.callee.caller,o="",n="";this.$fullname&&(o=this.$fullname);if(l&&l.$name)!o&&l.$owner&&(o=l.$owner.prototype.$fullname),n=l.$name;else a:{var n=arguments.callee,l=n.toString().replace(/[\s\?]*/g,""),l=l.substring(0,50<=l.length?50:l.length),m=l.match(/^function([^\(]+?)\(/);if(m&&m[1])n=m[1];else{if(n.caller&&(n=n.caller.toString().replace(/[\s\?]*/g,""),l=n.indexOf(l),(m=n.substring(l-30,l).match(/var([^\=]+?)\=/))&&m[1])){n=m[1];
break a}n=""}}(method=(o?o+"->":"")+(n?n+": ":"  "))&&(a=method+a);j[0]=a;e.call(f.log,c,j)}}});a.listen=function(a){d.each(arguments,function(a){g[a]=1})};f.global.logger=a})(fruit,fruit.util);
(function(f,d,e){f={trim:function(){trim=String.prototype.trim;rnotwhite=/\S/;trimLeft=/^\s+/;trimRight=/\s+$/;rnotwhite.test("\u00a0")&&(trimLeft=/^[\s\xA0]+/,trimRight=/[\s\xA0]+$/);return trim?function(b){return e.isDefine(b)?trim.call(b):""}:function(b){return e.isDefine(b)?b.toString().replace(trimLeft,"").replace(trimRight,""):""}}(),camelize:function(b){return b.replace(/\-(\w)/ig,function(c,a){return a.toUpperCase()})},decamelize:function(b){return b.replace(/[A-Z]/g,function(c){return"-"+
c.toLowerCase()})},upperFirstChar:function(b){return b.replace(/\b[a-z]/g,function(c){return c.toLocaleUpperCase()})},format:function(b,c){var a;a=2==arguments.length&&e.isArray(arguments[1])?arguments[1]:Array.prototype.slice.call(arguments,1);return b.replace(/\{(\d+)\}/g,function(c,b){return a[b]})},capitalize:function(b){return!b?b:b.charAt(0).toUpperCase()+b.substr(1).toLowerCase()},htmlEncode:function(b){return!b?b:(""+b).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/'/g,
"&#39;").replace(/"/g,"&quot;")},htmlDecode:function(b){return!b?b:(""+b).replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&amp;/g,"&")},urlEncode:function(b){return encodeURIComponent(b)},urlDecode:function(b){return decodeURIComponent(b)}};e.extend(e,f)})(fruit,document,fruit.util);
(function(f,d){d.extend(d,{indexOf:function(e,b){var c,a=-1;if(e.indexOf)return e.indexOf(b);if(d.isUndef(b))return a;for(c=0;c<e.length;c++)if(e[c]===b){a=c;break}return a},arrayUniq:function(d){for(var b=0;b<d.length;b++)for(var c=b+1;c<d.length;c++)d[b]===d[c]&&(d.splice(c,1),c--);return d},delFromArray:function(d,b){for(var c=b.length,a=this.clone(b);c--;)d==a[c]&&a.splice(c,1);return a},clone:function(d){var b=this.isArray(d)?[]:{},c,a;for(a in d)c=d[a],b[a]="object"==typeof c&&null!=c?this.clone(c):
c;return b}})})(fruit,fruit.util);
(function(f,d){var e=Object.prototype.toString;d.extend(d,{getType:function(b){if(null===b)return"Null";if(void 0===b)return"Undefined";b=e.call(b);return b.substr(8,b.length-9)},isEmpty:function(b){return null===b||void 0===b||""===b||f.util.isArray(b)&&0===b.length},getObjectKeys:function(b){var c=[],a;for(a in b)b.hasOwnProperty(a)&&c.push(a);return c},getObjectVals:function(b){var c=[],a;for(a in b)b.hasOwnProperty(a)&&c.push(b[a]);return c},toInt:function(b){return parseInt(b,10)},toFloat:function(b){return parseFloat(b)},
isNumeric:function(b){return!isNaN(parseFloat(b))&&isFinite(b)},isEmptyObject:function(b){for(var c in b)return!1;return!0},mixin:function(b,c,a){b=b||{};c=c||{};a&&(b=this.clone(b),c=this.clone(c));for(var g in c)b[g]=c[g];return b},merge:function(b,c,a){b=b||{};c=c||{};a&&(b=this.clone(b),c=this.clone(c));for(var g in c)"undefined"==typeof b[g]&&(b[g]=c[g]);return b}})})(fruit,fruit.util);
(function(f,d){function e(a,c){var b={MSIE:"IE",AppleWebKit:"WebKit",Firefox:"FF"};if(!d.isDefine(a))return"";var e=d.trim(a.replace("/",""));c&&(e=b[e]||e);return e}function b(a){return!d.isDefine(a)?0:0<a.indexOf(".")?(a=a.split("."),Number(a[0])):parseInt(a,10)}function c(a){var c=a.match(/((?:MSIE )|(?:Firefox\/)|(?:Chrome\/)|(?:Opera\/)|(?:Safari\/))([\d\._]+)/),d,f={};c&&3==c.length?(d=e(c[1],!0),f.browserName=e(c[1],!0),f["is"+d]=!0,"Safari"==d&&(c=a.match(/(Version)[ \/]([\w.]+)/)),f.browserVersion=
b(c[2])):(f.isOtherBrowser=!0,f.browserVersion=0);if((c=a.match(/((?:AppleWebKit\/)|(?:Gecko\/)|(?:Presto\/)|(?:Trident\/))([\d\._]+)/))&&c.length)d=e(c[1],!0),f.engineName=d,f["is"+d]=!0,f.engineVersion=b(c[2]);return f}var a=window.navigator.userAgent;d.detectBrowser=c;d.extend(d,c(a));d["is"+d.browserName+d.browserVersion]=!0})(fruit,fruit.util);
(function(f,d){function e(b){var b=b.match(RegExp("((?:"+c.join(")|(?:")+"))|([\\d\\._]+)")),d,e={};b&&(d=g[b[1]]||b[1]);d||(d="Other");e.OSName=d;"i"==d.substr(0,1)?e[d]=!0:e["is"+d]=!0;a.test(d)&&!e.isAndroid?e.isDesktop=!0:e.isMobile=!0;e.OSVersion=parseInt(navigator.appVersion.split(" ")[0],10);return e}var b=window.navigator.platform,c="Win,Android,iPhone,iPad,iPod,Linux,X11,Mac,BlackBerry,MacIntel".split(","),a=/Win|Linux|Unix|Mac|MacIntel/,g={X11:"Unix"};d.detectOS=e;d.extend(d,e(b))})(fruit,
fruit.util);
(function(f,d){var e="Sun,Mon,Tue,Wed,Thu,Fri,Sat,Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),b="Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec,January,February,March,April,May,June,July,August,September,October,November,December".split(","),c={formatDate:function(){var a=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,c=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,d=
/[^-+\dA-Z]/g,f=function(a,c){for(c=c||2;a.length<c;)a="0"+a;return a};return function(j,l,o){1==arguments.length&&"[object String]"==Object.prototype.toString.call(j)&&!/\d/.test(j)&&(l=j,j=void 0);j=j?new Date(j):new Date;if(!j)throw"invalid date";l=this.dateMasks[l]||l||this.dateMasks["default"];"UTC:"==l.slice(0,4)&&(l=l.slice(4),o=!0);var n=o?"getUTC":"get",m=j[n+"Date"](),q=j[n+"Day"](),p=j[n+"Month"](),s=j[n+"FullYear"](),r=j[n+"Hours"](),u=j[n+"Minutes"](),v=j[n+"Seconds"](),n=j[n+"Milliseconds"](),
w=o?0:j.getTimezoneOffset(),t={d:m,dd:f(m),ddd:e[q],dddd:e[q+7],m:p+1,mm:f(p+1),mmm:b[p],mmmm:b[p+12],yy:(""+s).slice(2),yyyy:s,h:r%12||12,hh:f(r%12||12),H:r,HH:f(r),M:u,MM:f(u),s:v,ss:f(v),l:f(n,3),L:f(99<n?Math.round(n/10):n),t:12>r?"a":"p",tt:12>r?"am":"pm",T:12>r?"A":"P",TT:12>r?"AM":"PM",Z:o?"UTC":((""+j).match(c)||[""]).pop().replace(d,""),o:(0<w?"-":"+")+f(100*Math.floor(Math.abs(w)/60)+Math.abs(w)%60,4),S:["th","st","nd","rd"][3<m%10?0:(10!=m%100-m%10)*m%10]};return l.replace(a,function(a){return a in
t?t[a]:a.slice(1,a.length-1)})}}(),dateMasks:{"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},newDate:function(a){if(a)if(d.isIE){var c=new Date,a=a.split("-");c.setUTCFullYear(a[0],a[1]-1,a[2]);c.setUTCHours(0,0,0)}else c=
new Date(a);else c=new Date;return c},getDayNames:function(a){return"ddd"==a?e.slice(0,7):e.slice(7)}};d.extend(d,c)})(fruit,fruit.util);
(function(f,d){func={intercept:function(e,b,c,a){return d.isFunction(b)?function(d,h,f,j,l,o,n,m,q,p){b.target=this;b.method=e;return!1!==b.call(c||this||window,d,h,f,j,l,o,n,m,q,p)?e.call(this||window,d,h,f,j,l,o,n,m,q,p):a||null}:e},bind:function(e,b){d.isString(e)&&(e=b[e]);return e.bind?e.bind(b):function(){return e.apply(b,arguments)}},objectCreate:function(d){return Object.create?Object.create(d.prototype):new d},defer:function(d,b){return window.setTimeout(function(){d.call(b||this)},0)},delay:function(d,
b,c){return window.setTimeout(function(){b.call(c||this)},1E3*d)}};d.extend(d,func)})(fruit,fruit.util);
(function(f,d){var e="en_US",b={},c=Array.prototype.slice;d.i18n={get:function(a){var b=c.call(arguments,1);b.unshift(f.config.lang||e,a);return this.getByLang.apply(this,b)},getByLang:function(a,g){var e,k=c.call(arguments,2);b[a]&&(e=b[a][g]);return!e?(d.logger.log(f.util.format("not define language variable of [{0}] in {1}",g,a)),""):0==k.length?e:f.util.format(e,k)},setLang:function(a){e=a},add:function(a){var c;b[a]||(b[a]={});var d,e;if(2==arguments.length)for(c in e=arguments[1],e)b[a][c]=
e[c];if(3==arguments.length)if(d=$.trim(arguments[1]),e=arguments[2],f.util.isString(e))b[a][d]=$.trim(e);else for(c in e)b[a][d+"."+c]=e[c];else $.extend(b[a],arguments[1])}}})(fruit,fruit.util);
(function(f,d){d.extend(d,{getURL:function(){return window.location.href},getURLParams:function(d){var b={},c=0,a=0,g=[],h=[],d=d||this.getURLHash();if(/\?/.test(d)){d=d.split("?").slice(1);for(d=d.join("").split(/[&=]/ig);c<d.length;c++)0===c%2?g.push(d[c]):h.push(d[c]);for(;a<g.length;a++)b[g[a]]=h[a]}return b},getURLHash:function(d){d=d||this.getURL();return d=/\#/.test(d)?d.split("#").slice(1).join(""):""},getURLParam:function(d,b){return this.getURLParams(b)[d]},baseURL:function(d){d=d||this.getURL();
/#/.test(d)&&(d=d.substr(0,d.indexOf("#")));/\/$/.test(d)&&(d=d.substr(0,d.length-1));return d},generateURLString:function(d,b){var c=this.getURLHash(b),a,g=[];for(a in d)g.push(a+"="+d[a]);return 0===g.length?c:/\?/.test(c)?c+"&"+g.join("&"):c+"?"+g.join("&")}})})(fruit,fruit.util);
(function(f,d){d.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:d.isWebKit?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,
NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145}})(fruit,fruit.util);(function(f,d){d.extend(d,{createCSS:function(d,b){var c=JSON.stringify(b),a=document.createElement("style");a.setAttribute("type","text/css");document.head.appendChild(a);a.styleSheet&&a.styleSheet.cssText?a.styleSheet.cssText+=c:a.appendChild(document.createTextNode(c))}})})(fruit,fruit.util);
(function(f,d,e){var b=[];f.ns=function(c){1<arguments.length&&!d.isUndef(arguments[1])&&!0!==arguments[1]&&d.each(arguments,function(a){f.ns(a)});var a=c.split("."),b=a.shift(),h=e[b],k,j=arguments[1];if(!h){if(j)return null;h=e[b]={$package:b,extend:d.extend}}d.each(a,function(a){if(j&&!h[a])return h=null,!1;k=h.$package;h=h[a]=h[a]||{$package:k+"."+a,extend:d.extend}});return h};d.extend(f,{ready:function(c){b?b.push(c):c.call(f.global)},execReadyFn:function(){d.each(b,function(c){c()},this);b=
null}})})(fruit,fruit.util,window);
(function(){function f(){}var d=fruit.util,e=d.isUndef,b=d.isFunction,c={};window.mirrorPool=c;f.get=function(a,c){var b=c?this.instance:this.prototype;if(!b)return logger.error("need parameter of id."),null;if(c){if(b=b[a])return b.map[c]||b.defaultValue}else return b[a].defaultValue};f.set=function(a,c,b){if(!e(c)){var d=b?this.instance:this.prototype;if(!d)return logger.error("need parameter of id."),null;b?(d=d[a])&&(d.map[b]=c):d[a]={defaultValue:c,map:[]}}};f.filter=function(a,c){var e=c?this.instance:
this.prototype;if(!e)return logger.error("need parameter of id."),null;var f={},l;d.each(e,function(d,e){l=d.map[c]||d.defaultValue;!b(l)&&a(l,e)&&(f[e]=l)});return f};fruit.ns("fruit.manager");var a=fruit.manager.MirrorManager=function(){};a.create=function(a,b){var e=this.get(b);e||(e=f);e=d.extendClass(function(){},e);d.extend(e,f);e.$name=a;return c[a]=e};a.get=function(a){if(!a)return null;if(d.isString(a))return c[a];var b=a.$fullname,e=a.$id,f;!b&&a.prototype&&(b=a.prototype.$fullname);f=c[b];
f.instance||(f.instance=new f,f.shell={});f.shell[e]||(f.shell[e]={get:function(a){return f.get(a,e)},set:function(a,c){return f.set(a,c,e)},filter:function(a){return f.filter(a,e)}});return f.shell[e]}})();
(function(f,d){function e(a){var c=this.prototype,b,g;for(b in a)if(a.hasOwnProperty(b)){g=a[b];sourceFn=c[b];if(d.isFunction(g)){if(("init"==b||"destroy"==b)&&sourceFn)g=d.intercept(g,sourceFn);sourceFn&&sourceFn.$owner&&sourceFn.$owner!=this.prototype.$super&&(g.$orig=sourceFn.$owner);g.$owner=this;g.$name=b}c[b]=g}}function b(a,c){var b=this.$fullname||this.prototype.$fullname;m[a][b]||(m[a][b]=c?[]:{});return m[a][b]}function c(c){var d=b.call(this,"postprocessors");return c?a.call(this,d):d}
function a(a){var c=m.order[this.extend],b,c=c?[].concat(c):[];d.each(a,function(g,e){b=d.indexOf(c,e);0<=b?c[b]=a[e]:(c.slice(b,1),c.push(g))});return c}function g(c){var d=b.call(this,"preprocessors");return c?a.call(this,d):d}function h(){var a=this.extend?f.getClass(this.extend):f.Class,b=g.call(this),e=g.call(a);d.extend(b,e);m.preprocessors[this.$fullname]=b;b=c.call(this);e=c.call(a);d.extend(b,e);m.postprocessors[this.$fullname]=b}function k(a,c){var b=c._onClassCreated;delete c._onClassCreated;
delete c._onBeforeCreated;e.call(a,c.methods||c.entity);return b.call(a,a,c)}function j(a,c,b){d.isFunction(a)||(b=c,c=a,a=function(a,c,b,g,e,p,h,f,s,l){d.isFunction(this.init)&&(this.initialized=!0,this.$id=q++,this.init(a,c,b,g,e,p,h,f,s,l),delete this.initialized);return this});c||(c={props:{}});c._onClassCreated=b||f.emptyFun;c._onBeforeCreated=k;var e=0,p=g.call(c,!0),h=function(a,c){var b=p[e++];if(!b)return c._onBeforeCreated.call(this,a,c);if(b.call(this,a,c,h)!==false)return h.call(this,
a,c)};h.call(this,a,c);return a}function l(a,c){var b;b="";0<=c.indexOf(".")&&(b=c.split("."),c=b.pop(),b=b.join("."));a.extend||(a.extend="fruit.Class");d.extend(a,{$namespace:b,$name:c,$fullname:""==b?c:b+"."+c})}function o(a,c){if(0>a.indexOf("."))return f.global;var b=a.lastIndexOf("."),b=a.substr(0,b);return f.ns(b,c)}function n(a,c,b){var g=c.prototype,a=a.prototype,e,p,h;for(e in g)g.hasOwnProperty(e)&&(p=a[e],h=g[e],d.isFunction(h)?(b&&(h=d.bind(h,b)),p=("init"==e||"destroy"==e)&&p?d.intercept(p,
h):h,p.$owner=c,p.$name=e,a[e]=p):0!=e.indexOf("$")&&(a[e]=h))}var m={preprocessors:{},postprocessors:{},order:{}},q=1,p=f.manager.MirrorManager;f.Class=function(){};p.create("fruit.Class");d.extend(f.Class,{init:function(){},regProcessor:function(a,c,d){p.get(this.prototype.$fullname).set((d?"postprocessing":"preprocessing")+"_"+a,c);d?b.call(this,"postprocessors")[a]=c:b.call(this,"preprocessors")[a]=c},setProcessorOrder:function(a){p.get(this.prototype.$fullname).set("processing_order",a);m.order[this.$fullname||
this.prototype.$fullname]=a}});d.extend(f.Class.prototype,{$fullname:"fruit.Class",superMethod:function(a){var c=this.superMethod.caller,b;c.$orig&&(b=c.$orig);c.$owner||(c=c.caller);b||(b=c.$owner.prototype.$super);c=c.$name;return(b[c]||b.prototype[c]).apply(this,a||[])},getClassName:function(){return this.$name},getStatics:function(){return this.$self||f.getClass(this.$fullname)}});f.getClass=function(a){var c=o(a,!0),b;return c?(b=a.lastIndexOf("."),a=a.substr(b+1),c[a]):c};f.getObject=f.getClass;
f.define=function(a,b,g){if(!d.isString(a))return null;d.isFunction(b)&&(b=b());b||(b={});l(b,a);h.call(b);var e=o(b.$fullname);j(b,function(a,b){var p=c.call(a,!0),h=this,f=0,s=function(a,c){var b=p[f++];if(!b)return d.isFunction(g)&&g.call(h,a,c),e[c.$name]=a;if(!1!==b.call(this,a,c,s))return s.call(this,a,c)};return s.call(this,this,b)});return e[b.$name]};f.create=function(a,c){return new (f.getClass(a))(c)};f.Class.regProcessor("extend",function(a,c){var b=c.extend,g;g=b?f.getClass(b):f.Class;
if(!g)throw"Not find class "+b;d.extend(a,g);p.create(c.$fullname,g.prototype.$fullname);d.extendClass(a,g,c)});d.mixinClass=n;f.Class.regProcessor("mixins",function(a,c){var b=c.mixins;b&&(b=d.isArray(b)?b:[b],d.each(b,function(b){b=f.getClass(b);n(a,b);b=b.prototype.init;d.isFunction(b)&&!c.init&&(c.init=b)}))});f.Class.regProcessor("singleton",function(a,c,b){if(c.singleton){var d=new a({});d._$self=a;b.call(this,d,c);return!1}},!0);f.Class.regProcessor("statics",function(a,c){var b=c.statics;
if(b)for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d])})})(fruit,fruit.util);
(function(f,d){function e(a,b,d,e){if(f.isUndef(d))return!1;var j=a.get(c+b);if(!j)return logger.warn("the option of {0} is not support! ",b),!1;if(!e&&j.readOnly)return logger.error("the option {0} is readonly, cannot be set!",b),!1;if(e=j.acceptTypes)if(e=f.isArray(e)?e:[e],0>f.indexOf(e,f.getType(d)))return logger.warn('option "'+b+'" only accepts value of type ['+e+"]"),!1;if(j.hidden)return logger.warn('Cannot access hidden option "'+b+'".'),!1;if(j.defaultValue===d)return!1;j=f.extend({},j);
j.defaultValue=d;a.set(c+b,j);return!0}function b(){}var c="options_";f.extend(b.prototype,{init:function(a){if(a&&f.isObject(a)){var c=d.get(this);f.each(a,function(a,b){e(c,b,a,!0)})}},getOption:function(a){if((a=d.get(this).get(c+a))&&!a.hidden)return a.defaultValue},setOption:function(a,c,b){return e(d.get(this),a,c,b)},getAllOptions:function(){var a={};d.get(this).filter(function(b,d){0==d.indexOf(c)&&(d=d.replace(c,""),a[d]=b.defaultValue)});return a},getOptionEntity:function(a){return d.get(this).get(c+
a)}});fruit.Class.regProcessor("options",function(a,g){var e=g.options,k=d.get(g);f.each(e,function(a,b){var d=a;if(!f.isObject(d)||f.isUndef(d.defaultValue))d={defaultValue:d,readOnly:!1};k.set(c+b,d)});e&&!a.prototype.getOption&&f.mixinClass(a,b)})})(fruit.util,fruit.manager.MirrorManager);
(function(f,d){function e(c,a){var g=b[c];g.fun&&d.each(g.fun,function(b){d.isFunction(a.prototype[b])||d.logger.error(a.prototype.$fullname+" need method "+b+" for interface "+c)})}var b={};f.defineInterface=function(c,a,d){b[c]={prop:d,fun:a,cls:{}}};f.Class.prototype.interfaceOf=function(c){return(b[c]||{cls:{}}).cls[this.$fullname]};f.Class.regProcessor("implement",function(c,a){var d=a.implement;d&&(e(d,c),(d=b[d])&&(d.cls[a.$fullname]=!0),delete a.implement)},!0)})(fruit,fruit.util);
(function(f,d){f.define("fruit.Observable",function(){function e(b,c){c=c?c.toLowerCase():null;b._$events||(b._$events={});b._$events[c]||(b._$events[c]=[]);return b._$events[c]}return{option:{listeners:null},methods:{init:function(b){if(b=b&&b.listeners)this.on(b)},on:function(b,c,a,g){if(1==arguments.length){var h=this,a=b.scope||this,f;delete b.scope;d.each(b,function(c,b){f=a;d.isObject(c)&&(c.scope&&(f=c.scope),g=c.data,c=c.fn);if(d.isFunction(c))h.on(b,c,f,g)})}else e(this,b).push({scope:a,
fn:c,data:g});return this},off:function(b,c,a){var g=e(this,b),h=this;if(d.isDefine(c))return d.each(g,function(e,f){if(e.fn==c&&(d.isUndef(a)||e.scope==a))return g.splice(f,1),d.logger.info.call(h,b),!1}),this;this._$events[b]=[]},trigger:function(b,c,a,g){var h=e(this,b),f=this,j=!0;d.logger.log.call(this,b);d.each(h,function(b){var d=a||b.scope||f;!1===(g?b.fn.apply(d,c):b.fn.call(d,f,c))&&(j=!1);return j});return j}}}})})(fruit,fruit.util);
fruit.defineInterface("fruit.interfaces.IRequest",["send","abort","setRequestHeader","getResponseHeader","getAllResponseHeaders"]);
(function(f){f.ns("fruit.io");f.util.extend(f.io,{EVENT_SESSION_TIMEOUT:"session_timeout",REQUEST_COMPLETE:"request_complete",GLOBAL_PAGE_ERROR:"global_page_error"});f.io.ajax=function(d){var d=f.util.extend({},d),e=d.beforeSend,b=d.success,c=d.error,a=d.complete;!d.method&&d.type&&(d.method=d.type,delete d.type);!d.responseType&&d.dataType&&(d.responseType=d.dataType,delete d.dataType);d.listeners={beforeSend:e,success:b,error:c,complete:a};delete d.beforeSend;delete d.success;delete d.error;delete d.complete;
return(new f.io.Request(d)).send()}})(fruit);
(function(f,d){var e=new f.Observable;f.define("fruit.io.Request",{implement:"fruit.interfaces.IRequest",mixins:"fruit.Observable",options:{url:{defaultValue:"",acceptTypes:["String"]},async:{defaultValue:!0,acceptTypes:["Boolean"]},method:{defaultValue:"GET",acceptTypes:["String","Null"]},responseType:{defaultValue:"",acceptTypes:["String","Null"]},data:{defaultValue:null,acceptTypes:["Object","String","Null"]},headers:{defaultValue:{},acceptTypes:["Object","Null"]},timeout:{defaultValue:6E4,acceptTypes:["Number",
"Null"]},listeners:{defaultValue:{},acceptTypes:["Object","Null"]}},statics:{on:function(b,c){e.on(b,c)},off:function(b,c){e.off(b,c)},trigger:function(b,c){e.trigger(b,c,null,!0)}},methods:{init:function(){this.__cloneOptions();this.status=this.readyState=0;this.responseXML=this.responseText=this.statusText="";this.aborted=!1;this._xhr=this.__createxhr();this._isTimeout=!1;this._timeoutTimer=null},__cloneOptions:function(){var b=this.getAllOptions();this.async=b.async;this.url=b.url;this.method=
b.method;this.timeout=b.timeout;this.responseType=b.responseType;this.headers=b.headers;this.listeners={success:b.success,error:b.error,complete:b.complete,beforeSend:b.beforeSend}},__cloneAttribute:function(b){this.readyState=b.readyState;this.statusText=b.statusText;this.responseText=b.responseText;this.responseXML=b.responseXML;this.status=b.status},setOption:function(b,c){this.superMethod([b,c]);this.name=c},__createxhr:function(){return window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):
new XMLHttpRequest},__clean:function(){var b=this._xhr;"onreadystatechange"in b&&delete b.onreadystatechange;"onload"in b&&delete b.onload},__success:function(b){this.__cloneAttribute(b);if(b=this.getOption("listeners"))if(b=b.success)switch(this.getOption("responseType")){case "html":case "text":b.call(this,this.responseText,this.statusText,this);break;case "json":b.call(this,JSON.parse(this.responseText),this.statusText,this);break;case "javascript":try{eval(this.responseText)}catch(c){}break;case "xml":b.call(this,
this.responseXML,this.statusText,this);break;default:var a=this.getResponseHeader("Content-Type");a&&d.isString(a)?-1<a.indexOf("json")?b.call(this,JSON.parse(this.responseText),this.statusText,this):-1<a.indexOf("xml")?b.call(this,this.responseXML,this.statusText,this):b.call(this,this.responseText,this.statusText,this):b.call(this,this.responseText,this.statusText,this)}},__error:function(b){this.__cloneAttribute(b);this.__checkAbort();if(b=this.getOption("listeners"))(b=b.error)&&b.call(this,this,
this.statusText)},__complete:function(){this.__checkAbort();var b=this.getOption("listeners");b&&((b=b.complete)&&b.call(this,this,this.statusText),this.__clean())},__beforeSend:function(){var b=this.getOption("listeners");b&&(b=b.beforeSend)&&b.call(this,this,this.headers)},__timeOutAbort:function(){this._isTimeout=!0;this.abort()},__clearTimeout:function(){this._timeoutTimer&&(clearTimeout(this._timeoutTimer),this._isTimeout=!1)},__readyStateChange:function(b){b=b&&b.target||this._xhr;!this.aborted&&
4===b.readyState&&(this.__clearTimeout(),200<=b.status&&300>b.status||304===b.status?this.__success(b):this.__error(b),this.__complete(b));this.aborted&&1<b.readyState&&(this.__error(b),this.__complete(b))},__checkAbort:function(){this.aborted&&(this.statusText="abort",this.readyState=0);this._isTimeout&&(this.statusText="timeout")},__req:function(b){var c=this.getOption("method"),a=encodeURI(this.getOption("url"));if("GET"!=c){b.open(c,a,this.getOption("async"));this.headers["Content-Type"]||(this.headers["Content-Type"]=
"application/x-www-form-urlencoded; charset=UTF-8");this.headers["X-Requested-With"]||(this.headers["X-Requested-With"]="XMLHttpRequest");for(var d in this.headers)b.setRequestHeader(d,this.headers[d]);this.__beforeSend(b,this.headers);(c=this.getOption("data"))?(c=this.__toString(c),b.send(c)):b.send(null)}else b.open("GET",a,this.getOption("async")),this.__beforeSend(b),b.send(null);this.async&&0<this.timeout&&(this._timeoutTimer=setTimeout(function(){b.abort()},this.timeout))},__toString:function(b){if(d.isString(b))return b;
var c=[],c=this.__convertObj(b,c);return c.join("&").replace("/%20/g","+")},__convertObj:function(b,c){var a=this;b&&d.each(b,function(b,e){d.isObject(b)?a.__convertObj(b,c):c[c.length]=encodeURIComponent(e)+"="+encodeURIComponent(b)});return c},__send:function(b){if(/^http/i.test(document.location))!d.isUndef(b.onload)&&!this.getOption("async")?b.onload=d.bind(this.__readyStateChange,this):b.onreadystatechange=d.bind(this.__readyStateChange,this),this.__clean(),this.__req(b);else try{this.__clean(),
this.__req(b),this.__success(b)}catch(c){this.__error(b)}},send:function(){this.__send(this._xhr)},abort:function(){this._xhr&&0<this._xhr.readyState&&(this.aborted=!0,this._xhr.abort())},setRequestHeader:function(b,c){this.headers[b]=c;this._xhr.setRequestHeader(b,c)},getResponseHeader:function(b){return this._xhr.getResponseHeader(b)},getAllResponseHeaders:function(){return this._xhr.getAllResponseHeaders()}}})})(fruit,fruit.util);
(function(f){f.define("fruit.io.websocket",{singleton:!0,mixins:["fruit.Observable"],methods:{__wachList:{},connect:function(d){d&&"WebSocket"in window&&(d=this.host=d,this.ws=new WebSocket(d),this._registerEvent())},_registerEvent:function(){var d=this.ws;d.onopen=function(){this.trigger("open",{state:socket.readyState})};d.onmessage=function(d){this.trigger("message",{data:d.data})};d.onclose=function(){this.trigger("close",{state:socket.readyState})}},watch:function(){},sent:function(d){var e=
this.ws;""!=d&&(e.send(d),this.trigger("sent",{data:d}))}}})})(fruit,fruit.util);
(function(f,d){f.define("fruit.io.REST",{singleton:!0,mixins:["fruit.Observable"],methods:{put:function(d,b,c){this.__req("PUT",d,b,c)},get:function(d,b,c){this.__req("GET",d,b,c)},post:function(d,b,c){this.__req("POST",d,b,c)},"delete":function(d,b,c){this.__req("DELETE",d,b,c)},__req:function(e,b,c,a){d.isUndef(b)||f.io.ajax({contentType:"application/json",type:e,connection:"close",url:b,data:c||"",success:a||""})}}})})(fruit,fruit.util);
fruit.defineInterface("fruit.interfaces.IEffects",["show","hide","fadeOut","fadeIn","animation"]);
(function(f){var d=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(b){return window.setTimeout(b,1E3/60)}}(),e=window.cancelAnimationFrame||window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||
window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.clearTimeout;f.define("fruit.effect.Animator",{mixins:"fruit.Observable",options:{duration:null,interval:0,fn:null},methods:{stop:function(){e(this.requestFn)},start:function(b){function c(l){var l=l||(new Date).getTime(),o=l-a;l-e>j&&(b(),e=l);if(0===f)g.requestFn=d(c);else if(o<f)g.requestFn=d(c);else return g.stop(),!1}var a=(new Date).getTime(),g=this,e=a,f=this.getOption("duration"),b=b||this.getOption("fn"),j=this.getOption("interval");
this.requestFn=d(c)}}})})(fruit,fruit.util);fruit.defineInterface("fruit.interfaces.IElement","wrap,appendChild,appendTo,prependChild,prependTo,insertChild,insertTo,removeChild,remove,empty,clone,getElement,on,off,contains,getIndex,getStyle,setStyle,removeStyle,addClass,removeClass,hasClass,replaceClass,setAttribute,getAttribute,removeAttribute,setText,getText,setHtml,getHtml,setValue,getValue,find,children,childAt,closest,firstChild,lastChild,parent,nextSibling,previousSibling,getWidth,setWidth,getHeight,setHeight,offset,position,setScroll,getScroll,getAttrWidth,getXY,setXY,getSize,setSize,setInnerSize".split(","));
(function(f,d,e,b,c,a){var g={"class":"className","for":"htmlFor",tabindex:"tabIndex",maxlength:"maxLength",readonly:"readOnly"},h="fontWeight,zIndex,zoom,lineHeight,opacity,tabIndex".split(","),k={thin:2,medium:4,thick:6},j=/(?:^\s*|\s*$|\s+(?=;|:)|;\s*$|(;|:)\s+)/g,l={margin:["marginTop","marginRight","marginBottom","marginLeft"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"],border:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"]},o=function(){var a=
{value:{get:function(a){return a.value},set:function(a,c){a.value=c;return a},remove:function(){}},text:{get:function(a){return a.innerText||a.textContent},set:function(a,c){null!=a.textContent?a.textContent=c:a.innerText=c;return a},remove:function(a){this.set(a,"");return a}},html:{get:function(a){return a.innerHTML},set:function(){var a=/<(?:object|embed|option|style)/i,c=function(a,c){(new f.Element(a)).empty();a.appendChild(f.dom.create(c))};return function(b,d){if(a.test(d))c(b,d);else try{b.innerHTML=
d}catch(g){c(b,d)}}}(),remove:function(a){a.innerHTML="";return a}},checked:{get:function(a){return a.checked},set:function(a,c){(a.checked=c)?a.setAttribute("checked","checked"):a.removeAttribute("checked");return a},remove:function(a){a&&a.removeAttribute("checked");return a}},disabled:{get:function(a){return a.disabled},set:function(a,c){(a.disabled=c)?a.setAttribute("disabled","disabled"):a.removeAttribute("disabled");return a},remove:function(a){a&&a.removeAttribute("disabled");return a}},readonly:{get:function(a){return a.readOnly},
set:function(a,c){(a.readOnly=c)?a.setAttribute("readOnly","readonly"):a.removeAttribute("readOnly");return a},remove:function(a){if(this.get(a))return a.removeAttribute("readOnly"),a.readOnly=!1,a}},selected:{},"aria-disabled":{get:function(a){return a.getAttribute("aria-disabled")},set:function(a,c){var b=!!c;b?a.setAttribute("aria-disabled",b):a.removeAttribute("aria-disabled");return a},remove:function(a){a.removeAttribute("aria-disabled");return a}},"aria-checked":{get:function(a){return a.getAttribute("aria-checked")},
set:function(a,c){a.setAttribute("aria-checked",!!c);return a},remove:function(a){a.removeAttribute("aria-checked");return a}}};d.isIE&&(a.href={get:function(a){return a.getAttribute("href",2)},set:function(a,c){return a.setAttribute("href",c)}},a.type={get:function(a,c){a.getAttribute(a,c)},set:function(a,c){a.type=c},remove:function(){}});return a}(),n=function(){var a={"float":{get:function(a,c){if(c){var b=a.ownerDocument.defaultView.getComputedStyle(a);return b?b.getPropertyValue("cssFloat"):
null}return a.style.cssFloat},set:function(a,c){a.style.cssFloat=c},remove:function(a){a.style.removeProperty("float")}}};d.isIE&&(a["float"]={get:function(a,c){return a[c?"currentStyle":"style"].styleFloat},set:function(a,c){a.style.styleFloat=c},remove:function(a){a.style.removeAttribute("styleFloat")}},a.opacity={get:function(a){var c;a.filters.alpha?c=a.filters.alpha.opacity/100:a.filters["DXImageTransform.Microsoft.Alpha"]&&(c=a.filters["DXImageTransform.Microsoft.Alpha"].opacity/100);isNaN(c)&&
(c=1);return c},set:function(a,c){try{a.filters.alpha?a.filters.alpha.opacity=100*c:a.style.filter+="alpha(opacity="+100*c+")"}catch(b){}a.style.opacity=c},remove:function(a){a.style.filter="";a.style.removeAttribute("opacity")}});return a}(),m={getRealAttr:function(a){a=a.toLowerCase();return d.isIE7?g[a]||a:a},getCssText:function(a,c,b){if(d.isEmpty(b))return this.removeStyle(a,c);var g="",e=d.decamelize(c),h=parseFloat(b),f=this.getUnit(c,b),c=n[c];d.isNumeric(h)||(h=b);c?"set"in c&&c.set(a,b):
g=e+":"+h+f;return g},getUnitFromVal:function(a){return a.toString().replace(/^[+-]?[\d\.]+/g,"")},getUnitFromAttr:function(a){a=d.camelize(a);return-1===d.indexOf(h,a)?"px":""},getUnit:function(a,c){var b=this.getUnitFromVal(c);b==c?b="":b||(b=this.getUnitFromAttr(a));return b},removeStyle:function(a,c){var b=d.decamelize(c),g=n[b];g?"remove"in g&&g.remove(this.element):a.style.removeAttribute?a.style.removeAttribute(b):a.style.removeProperty(b)},getSize:function(a){return{width:a.offsetWidth,height:a.offsetHeight}}};
f.define("fruit.Element",{implement:"fruit.interfaces.IElement",methods:{init:function(a){this.element=this.__getDomElement(a)},wrap:function(a){if(!a)return null;if(a instanceof f.Element)return a;a="string"===typeof a?b.getElementById(a):a;return new f.Element(a)},appendChild:function(a){this.element.appendChild(this.__getDomElement(a));return this},appendTo:function(a){this.__getDomElement(a).appendChild(this.element);return this},insertChild:function(a,c){var b=this.children()[c].element,d=this.__getDomElement(a);
d&&b&&this.element.insertBefore(d,b);return this},insertBefore:function(a,c){this.element.insertBefore(this.__getDomElement(a),this.__getDomElement(c));return this},prependChild:function(a){return this.insertChild(this.__getDomElement(a),0)},prependTo:function(a){return this.wrap(a).insertChild(this.element,0)},insertTo:function(a,c){var b=this.children();return this.__getDomElement(a).insertBefore(this.element,b[c])},removeChild:function(a){this.element.removeChild(this.__getDomElement(a));return this},
remove:function(){var a=this.parent();a&&a.removeChild(this.element);return this},empty:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);return this},clone:function(a){return this.wrap(this.element.cloneNode(a))},getElement:function(){return this.element},__getDomElement:function(a){return a instanceof f.Element?a.element:a},focus:function(){this.element.focus()},blur:function(){this.element.blur()},on:function(){return b.addEventListener?function(a,c,b){this.element.addEventListener(a,
c,b||!1)}:function(c,b){var d=this.element;d.attachEvent("on"+c,function(){b.call(d,a.event)})}}(),off:function(){return b.removeEventListener?function(a,c,b){this.element.removeEventListener(a,c,b||!1)}:function(c,b){var d=this.element;d.detachEvent("on"+c,function(){b.call(d,a.event)})}}(),contains:function(a){var c=this.element,a=this.__getDomElement(a);return c.contains?c!=a&&c.contains(a):!!(c.compareDocumentPosition(a)&16)},getIndex:function(a){for(var c=this.children(),b=c.length,a=this.__getDomElement(a);b--;)if(c[b].element===
a)return++b;return-1},getStyle:function(a){var c=n[a],b;c?"get"in c&&(b=c.get(this.element,!0)):d.isIE?(b=this.element.currentStyle[d.camelize(a)],b=k[b]||b):b=(c=this.element.ownerDocument.defaultView.getComputedStyle(this.element,null))?c.getPropertyValue(d.decamelize(a)):null;return!b||0===d.toInt(b)||"auto"==b?0:b},setStyle:function(a,c){if(!d.isEmpty(a)){var b="",g,b=[];if("undefined"!==typeof c)b=m.getCssText(this.element,a,c);else{var e={};if(d.isString(a)){var h=a.replace(j,"$1").split(/[;:](?=[\w\s])/),
f=h.length;for(g=0;g<f;g++)e[h[g]]=h[++g]}else e=a;for(g in e)b.push(m.getCssText(this.element,g,e[g]));b=b.join(";")}this.element.style.cssText+=";"+b;g=this.element.getAttribute("style");d.isEmpty(g)&&null!==g&&this.removeStyle(g);return this}},hasStyle:function(a){var c,b=this.element.style.cssText.split(";"),d=/^([\w-]+):(.*)$/;for(c=0;c<b.length;c++)if(d.test(b[c])&&b[c].replace(d,"$1")===a)return!0;return!1},measure:function(a){var c;switch(a){case ":padding-box-width":break;case ":padding-box-height":break;
case ":border-box-width":break;case ":border-box-height":break;case ":margin-box-width":break;case ":margin-box-height":break;default:c=(this.getStyle(a)||"0px").replace(/auto/,"0px").replace(/px/g,"")}return c},removeStyle:function(a){if(a=a&&(d.isArray(a)?a:[a])||!1)for(var c=a.length;c--;)m.removeStyle(this.element,a[c]);else this.element.removeAttribute&&this.element.removeAttribute("style");return this},addClass:function(a){a&&!this.hasClass(a)&&(this.element.className=this.element.className?
this.element.className+" "+a:a);return this},toggleClass:function(a,c){c=c||"";this.hasClass(a)?this.replaceClass(a,c):this.replaceClass(c,a)},removeClass:function(a){a&&this.hasClass(a)?this.element.className=this.element.className.replace(RegExp("(?:^|\\s)"+a+"(?=\\s|$)","ig"),""):d.isEmpty(a)&&(this.element.className="");a=this.element.getAttribute(m.getRealAttr("class"));d.isEmpty(a)&&null!==a&&this.removeAttribute("class");return this},setClass:function(a){this.setAttribute("class",a)},hasClass:function(a){var c=
this.element.className;if(!c)return!1;for(var c=c.split(/\s+/),b=c.length;b--;)if(a===c[b])return!0;return!1},replaceClass:function(a,c){if(a){for(var b=a.split(/\s+/),g=c.split(/\s+/),e=b.length,h=g.length;e--;)this.removeClass(b[e]);for(;h--;)this.addClass(g[h])}else this.addClass(c);b=this.element.getAttribute(m.getRealAttr("class"));d.isEmpty(b)&&null!==b&&this.removeAttribute("class");return this},getClass:function(){return this.getAttribute("class")},setAttribute:function(a,c){var b,d;if("object"!==
typeof a)this.__setAttribute(this.element,a,c);else for(b in a)d=a[b],this.__setAttribute(this.element,b,d);return this},__setAttribute:function(a,b,d){var b=m.getRealAttr(b),g=o[b];d!==c&&null!==d?g?"set"in g&&g.set(a,d):a.setAttribute(b,d):this.removeAttribute(b)},getAttribute:function(a){var c=o[a];return c&&"get"in c?c.get(this.element):this.element.getAttribute(m.getRealAttr(a))},removeAttribute:function(a){var c=o[a];c?"remove"in c&&c.remove(this.element,a):this.element.removeAttribute(m.getRealAttr(a))},
setText:function(a){this.setAttribute("text",a)},getText:function(){return this.getAttribute("text")},setHtml:function(a){this.setAttribute("html",a)},getHtml:function(){return this.getAttribute("html")},setValue:function(a){this.setAttribute("value",a)},getValue:function(){return this.getAttribute("value")},find:function(){},closest:function(){},children:function(){var a=this.firstChild();return null===a?[]:Array.prototype.concat(a,a.__sibling(!0,!0))},childAt:function(a){return this.children()[a]},
firstChild:function(){return this.__findChild("firstChild","nextSibling")},lastChild:function(){return this.__findChild("lastChild","previousSibling")},parent:function(){var a=this.element.parentNode;return a&&!this.isSpecialElement()&&11!==a.nodeType?this.wrap(a):null},nextSibling:function(){return this.__sibling(!0)},previousSibling:function(){return this.__sibling(!1)},isSpecialElement:function(){var c=this.element;return c&&(c===b||c===a||/^(?:html)$/i.test(c.tagName))},getWidth:function(a){return this.getSize(a).width},
setWidth:function(a){this.setSize(a,null)},getHeight:function(a){return this.getSize(this.element,a).height},setHeight:function(a){this.setSize(null,a)},offset:function(){return{left:this.element.offsetLeft,top:this.element.offsetTop}},position:function(a){a=this.getXY(this.element,a);return{left:a.x,top:a.y}},setScroll:function(c){a.scrollTo(c.x,c.y)},getScroll:function(){var a=this.getDocRect();return{left:a.scrollX,top:a.scrollY}},getAttrWidth:function(a){a=l[a||"padding"];return{top:d.toFloat(this.getStyle(a[0])),
right:d.toFloat(this.getStyle(a[1])),bottom:d.toFloat(this.getStyle(a[2])),left:d.toFloat(this.getStyle(a[3]))}},getXY:function(a){var c=a||!1,a=this.__getXY(this.element),b={};c?(c=this.getDocRect(),b={x:a[0]-c.scrollX,y:a[1]-c.scrollY}):b={x:a[0],y:a[1]};return b},setXY:function(a,c,b){a=d.toFloat(c,10);b=d.toFloat(b,10);this.setStyle({left:a,top:b})},getSize:function(a){var c=m.getSize(this.element),a=a||!1;if("none"===this.getStyle("display")){var b=this.getStyle("visibility"),d=this.getStyle("position");
this.setStyle({display:"block",visibility:"hidden",position:"absolute"});c=m.getSize(this.element);this.setStyle({display:"none",visibility:b,position:d})}a&&(a=this.getAttrWidth("border"),b=this.getAttrWidth("padding"),c={width:c.width-a.left-a.right-b.left-b.right,height:c.height-a.top-a.bottom-b.top-b.bottom});return c},setSize:function(a,c){var b=parseFloat(a),d=parseFloat(c),g=this.getAttrWidth("border"),e=this.getAttrWidth("padding");isNaN(b)||this.setStyle({width:Math.max(b-g.right-g.left-
e.right-e.left,0)});isNaN(d)||this.setStyle({height:Math.max(d-g.top-g.bottom-e.top-e.bottom,0)})},getBound:function(a){var c=this.getXY(a),a=this.getSize(a);return{x:c.x,y:c.y,width:a.width,height:a.height}},getRect:function(a){var c=this.getXY(a),a=c.x,c=c.y,b=this.element.offsetWidth,d=this.element.offsetHeight;return{width:b,height:d,left:a,top:c,bottom:c+d,right:a+b}},setInnerSize:function(a,c){var b=parseFloat(a),d=parseFloat(c);isNaN(b)||this.setStyle({width:b});isNaN(d)||this.setStyle({height:d})},
__findChild:function(a,c){for(var b=this.element[a];b&&1!=b.nodeType;)b=b[c];return this.wrap(b)},__sibling:function(a,c){for(var b=c?[]:null,d=c||null,g=a?"nextSibling":"previousSibling",e=this.element&&this.element[g];e;){if(e&&1===e.nodeType)if(d)b.push(this.wrap(e));else return this.wrap(e);e=e[g]}return b},__getXY:function(){var a=function(a,c){var b=parseInt(this.wrap(a).getStyle("borderTopWidth"),10)||0,g=parseInt(this.wrap(a).getStyle("borderLeftWidth"),10)||0;d.isGecko&&/^t(?:able|d|h)$/i.test(a.tagName)&&
(b=g=0);c[0]+=g;c[1]+=b;return c};return b.documentElement.getBoundingClientRect?function(a){var c=a.ownerDocument,b=f.dom.getDocRect(c),g=b.scrollX,b=b.scrollY,a=a.getBoundingClientRect(),a=[a.left,a.top],e,h,l;d.isIE&&(h=c.documentElement.clientLeft,l=c.documentElement.clientTop,e=c.compatMode,"BackCompat"==e&&(h=c.body.clientLeft,l=c.body.clientTop),a[0]-=h,a[1]-=l);if(b||g)a[0]+=g,a[1]+=b;return a}:function(){for(var c=this.element,b=[c.offsetLeft,c.offsetTop],g=c.parentNode,e=this.getDocRect(c.ownerDocument),
h=!!(d.isGecko||519<parseFloat(d.isSafari)),f=0,l=0;g=g.offsetParent;)b[0]+=g.offsetLeft,b[1]+=g.offsetTop,h&&(b=a(g,b));if("fixed"!=this.getStyle("position"))for(g=c;g=g.parentNode;)if(f=g.scrollTop,l=g.scrollLeft,d.isGecko&&"visible"!==this.wrap(g).getStyle("overflow")&&(b=a(g,b)),f||l)b[0]-=l,b[1]-=f;b[0]+=e.scrollX;b[1]+=e.scrollY;return b}}()}})})(fruit,fruit.util,fruit.dom,document,void 0,window);fruit.defineInterface("fruit.interfaces.IElementCollection",["each"]);
fruit.define("fruit.ElementCollection",{implement:"fruit.interfaces.IElementCollection",methods:{init:function(f){var d=this.domArray=[];fruit.util.each(f,function(e){d.push(new new fruit.implementations.Element(e))})},each:function(){}}});fruit.defineInterface("fruit.interfaces.IElementFactory",["byId","byClass","create","clearSelection"]);
(function(f,d){f.define("fruit.ElementFactory",{implement:"fruit.interfaces.IElementFactory",methods:{byId:function(d){return"string"===typeof d?new f.Element(document.getElementById(d)):new f.Element(d)},getByClass:function(d){return document.querySelector&&new f.Element(document.querySelector(d))},isElement:function(d){return!!d&&1==d.nodeType},create:function(){var d=document.createElement("div"),b={option:[1,'<select multiple="multiple">',"</select>"],optgroup:[1,'<select multiple="multiple">',
"</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tbody:[1,"<table>","</table>"],tfoot:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],th:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:[0,"",""]};return function(c){var a=c.match(/<(\w+)/i);if(a){var a=b[a[1]]||b._default,g=a[0];d.innerHTML=a[1]+c+a[2];if(g)for(;g--;)d=d.firstChild;
c=document.createDocumentFragment();for(a=null;a=d.firstChild;)c.appendChild(a);return c}}}(),clearSelection:function(){return("getSelection"in window?function(){window.getSelection().removeAllRanges()}:function(){try{document.selection.empty()}catch(d){}})()},getDocRect:function(d){var d=d||document,b=d.defaultView||d.parentWindow,c=d.compatMode,a=d.documentElement,g=b.innerHeight||0,h=b.innerWidth||0,f=b.pageXOffset||0,b=b.pageYOffset||0,j=a.scrollWidth,l=a.scrollHeight;"CSS1Compat"!=c&&(a=d.body,
j=a.scrollWidth,l=a.scrollHeight);c&&(h=a.clientWidth,g=a.clientHeight);j=Math.max(j,h);l=Math.max(l,g);f=Math.max(f,d.documentElement.scrollLeft,d.body.scrollLeft);b=Math.max(b,d.documentElement.scrollTop,d.body.scrollTop);return{width:h,height:g,scrollWidth:j,scrollHeight:l,scrollX:f,scrollY:b}},createElement:function(d){return new f.Element(document.createElement(d))},getBody:function(){return new f.Element(document.body)},createTextNode:function(d){return new f.Element(document.createTextNode(d))}}});
f.dom=d.extend({},new f.ElementFactory)})(fruit,fruit.util);
(function(f,d){var e="fruit"+(new Date).getTime(),b={},c=Object.prototype.hasOwnProperty;f.cache={__hasCache:function(a){return c.call(a,e)},__isEmptyObject:function(a){for(var c in a)return!1;return!0},__removeAttr:function(a,c){try{delete a[c]}catch(b){a.removeAttribute(c)}},__dataStr:function(a,c){if(void 0!==c)b[a]=c;else return b[a]},__dataObj:function(a,c,b){this.__hasCache(a)||(a[e]={});a=a[e];return"string"===typeof c?(void 0!==b&&(a[c]=b),a[c]):a},data:function(a,c,b){return d.isString(a)?
this.__dataStr(a,c):this.__dataObj(a,c,b)},remove:function(a,c){c?this.__hasCache(a)&&(this.__removeAttr(a[e],c),this.__isEmptyObject(a[e])&&this.__removeAttr(a,e)):this.__removeAttr(b,a)},queue:function(a,c,b){b=b||"fruit";b=this.data(a,b)||this.data(a,b,[]);c&&(b.push(c),this.dequeue(a))},dequeue:function(a){var c=this,b=this.data(a,dataStr)||this.data(a,dataStr,[]),d=b.shift();d&&"function"===typeof d&&d.call(a,function(){c.dequeue(a)});b.length||this.remove(a,dataStr)}}})(fruit,fruit.util);
(function(f,d,e){var b={margin:["marginTop","marginRight","marginBottom","marginLeft"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"],border:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"]};f.ns("fruit.dom.position").extend({getDocRect:function(c){var c=c||document,a=c.defaultView||c.parentWindow,b=c.compatMode,d=c.documentElement,e=a.innerHeight||0,f=a.innerWidth||0,l=a.pageXOffset||0,a=a.pageYOffset||0,o=d.scrollWidth,n=d.scrollHeight;"CSS1Compat"!=
b&&(d=c.body,o=d.scrollWidth,n=d.scrollHeight);b&&(f=d.clientWidth,e=d.clientHeight);o=Math.max(o,f);n=Math.max(n,e);l=Math.max(l,c.documentElement.scrollLeft,c.body.scrollLeft);a=Math.max(a,c.documentElement.scrollTop,c.body.scrollTop);return{width:f,height:e,scrollWidth:o,scrollHeight:n,scrollX:l,scrollY:a}},getAttrWidth:function(c,a){var g=b[a||"padding"];return{top:e.toFloat(d.getCurrentStyle(c,g[0])),right:e.toFloat(d.getCurrentStyle(c,g[1])),bottom:e.toFloat(d.getCurrentStyle(c,g[2])),left:e.toFloat(d.getCurrentStyle(c,
g[3]))}},__getXY:function(){var c=function(a,c){var b=parseInt(d.getCurrentStyle(a,"borderTopWidth"),10)||0,f=parseInt(d.getCurrentStyle(a,"borderLeftWidth"),10)||0;e.isGecko&&/^t(?:able|d|h)$/i.test(a.tagName)&&(b=f=0);c[0]+=f;c[1]+=b;return c};return document.documentElement.getBoundingClientRect?function(a){var c=a.ownerDocument,b=this.getDocRect(c),d=b.scrollX,b=b.scrollY,a=a.getBoundingClientRect(),a=[a.left,a.top],f,l,o;e.isIE&&(l=c.documentElement.clientLeft,o=c.documentElement.clientTop,f=
c.compatMode,"BackCompat"==f&&(l=c.body.clientLeft,o=c.body.clientTop),a[0]-=l,a[1]-=o);if(b||d)a[0]+=d,a[1]+=b;return a}:function(a){for(var b=[a.offsetLeft,a.offsetTop],f=a.parentNode,k=this.getDocRect(a.ownerDocument),j=!!(e.isGecko||519<parseFloat(e.isSafari)),l=0,o=0;f=f.offsetParent;)b[0]+=f.offsetLeft,b[1]+=f.offsetTop,j&&(b=c(f,b));if("fixed"!=d.getCurrentStyle(a,"position"))for(f=a;f=f.parentNode;)if(l=f.scrollTop,o=f.scrollLeft,e.isGecko&&"visible"!==d.getCurrentStyle(f,"overflow")&&(b=
c(f,b)),l||o)b[0]-=o,b[1]-=l;b[0]+=k.scrollX;b[1]+=k.scrollY;return b}}(),getXY:function(c,a){var b=a||!1,d=this.__getXY(c),e={};b?(b=this.getDocRect(),e={x:d[0]-b.scrollX,y:d[1]-b.scrollY}):e={x:d[0],y:d[1]};return e},setXY:function(c,a,b){a=e.toFloat(a,10);b=e.toFloat(b,10);d.setStyle(c,{left:a,top:b})},getVisibleElSize:function(c){return{width:c.offsetWidth,height:c.offsetHeight}},getSize:function(c,a){var b,e=a||!1;if("none"!=d.getCurrentStyle(c,"display")&&"inline"!=d.getCurrentStyle(c,"display"))b=
this.getVisibleElSize(c);else{var f=d.getCurrentStyle(c,"visibility"),j=d.getCurrentStyle(c,"position");d.setStyle(c,{display:"block",visibility:"hidden",position:"absolute"});b=this.getVisibleElSize(c);d.setStyle(c,{display:"none",visibility:f,position:j})}e&&(e=this.getAttrWidth(c,"border"),f=this.getAttrWidth(c,"padding"),b={width:b.width-e.left-e.right-f.left-f.right,height:b.height-e.top-e.bottom-f.top-f.bottom});return b},setSize:function(c,a,b){var a=parseFloat(a),b=parseFloat(b),e=this.getAttrWidth(c,
"border"),f=this.getAttrWidth(c,"padding");isNaN(a)||d.setStyle(c,{width:Math.max(a-e.right-e.left-f.right-f.left,0)});isNaN(b)||d.setStyle(c,{height:Math.max(b-e.top-e.bottom-f.top-f.bottom,0)})},setInnerSize:function(c,a,b){a=parseFloat(a);b=parseFloat(b);isNaN(a)||d.setStyle(c,{width:a});isNaN(b)||d.setStyle(c,{height:b})},getRect:function(c){var a=this.getXY(c),b=a.x,a=a.y,d=c.offsetWidth,c=c.offsetHeight;return{width:d,height:c,left:b,top:a,bottom:a+c,right:b+d}},getBound:function(c,a){var b=
this.getXY(c,a);return{width:c.offsetWidth,height:c.offsetHeight,x:b.x,y:b.y}},setRect:function(c,a,b,d,e){this.setXY(c,a,b);this.setSize(c,d,e)}})})(fruit,fruit.dom,fruit.util);
(function(f,d,e){e.ellipsis={ellipsis:function(){function b(b){var e=c(b,d);if(0==e)throw"Cannot get line height";var f=c(b,a+" "+d);if(f>e)return f-e;var l=c(b,a),f=c(b,d+" "+d);if(f==e)throw"Cannot get line height";return f+l-2*e}function c(a,c){var b;a.textContent=c;b=e.measure(a,"height");if(c&&!b)throw"Cannot get height";return b}var a="W",d="W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W W";
return function(a,d){var d=d||{},g=d.text||a.textContent,f=d.keepInTail?g.substring(0,g.length-d.keepInTail):g,o=d.keepInTail?g.substring(g.length-d.keepInTail):"",n=d.symbol||"...",m=e.hasStyle(a,"overflow")&&e.getStyle(a,"overflow"),q=e.hasStyle(a,"width")&&e.getStyle(a,"width"),p=e.hasStyle(a,"height")&&e.getStyle(a,"height");try{var s,r,u;d.lines?(e.setStyle(a,"width",e.measure(a,"width")+"px"),e.setStyle(a,"height","auto"),r=b(a),u=c(a,"|")-r,s=r*d.lines):(s=d.height||e.measure(a,"height"),e.setStyle(a,
"width",e.measure(a,"width")+"px"),e.setStyle(a,"height","auto"),r=b(a),u=c(a,"|")-r,s-=u);for(var v,w=f.length,t=0,y;;){v=c(a,f.substring(0,w)+(t?n:"")+o)-u;if(v<=s)break;t=w;w=2<=(v-s)/r?Math.floor(w*s/v):Math.floor(w*s/(s+r))}if(t){for(;t>w;)y=Math.ceil((w+t)/2),v=c(a,f.substring(0,y)+n+o)-u,v>s?t=y-1:w=y;0>=t?c(a,n):c(a,f.substring(0,t)+n+o)}}catch(z){throw c(a,g),z;}finally{m?e.setStyle(a,"overflow",m):e.removeStyle(a,"overflow"),q?e.setStyle(a,"width",q):e.removeStyle(a,"width"),p?e.setStyle(a,
"height",p):e.removeStyle(a,"height")}}}()}})(fruit,fruit.util,fruit.dom);
(function(f,d,e,b){e.isHighContrastMode=function(){var c=new f.Element(b.createElement("div")),a=d.getBody();c.setAttribute("style","position:absolute;top:-100;left:-100px;background-color:#878787;");c.setHtml("Test");c.appendTo(a);var e=c.getStyle("background-color");a.removeChild(c);return"#878787"!=e&&"rgb(135, 135, 135)"!=e};f.ready(function(){e.isHighContrastMode()&&d.getBody().addClass("f-hcm")})})(fruit,fruit.dom,fruit.util,document);
(function(f,d,e,b,c,a){var g={},h={},k=f.define("fruit.event.Engine",{singleton:!0,methods:{addProcessor:function(a,c){g[a]=c;this.isReady&&!c.isAttached&&(c.attachEvent(),c.isAttached=!0)},isReady:!1,__readyHandlers:[],domReady:function(b){var d=k;d.__addReadyHandler(b);if(c.addEventListener)c.addEventListener("DOMContentLoaded",function(){c.removeEventListener("DOMContentLoaded",arguments.callee,!1);d.__fireReady()},!1);else if(c.attachEvent){if(!this.isReady){c.attachEvent("onreadystatechange",
function(){var a=c.readyState;if("loaded"===a||"complete"===a)c.detachEvent("onreadystatechange",arguments.callee),d.__fireReady()});b=!1;try{b=null==a.frameElement}catch(e){}c.documentElement.doScroll&&b&&function(){if(!d.isReady){try{c.documentElement.doScroll("left")}catch(a){return setTimeout(arguments.callee,0)}d.__fireReady()}}()}}else this.__addLoadEvent(b)},__fireReady:function(){if(!this.isReady){this.isReady=!0;for(var a=this.__readyHandlers.length;a--;)this.__readyHandlers.shift()()}},
__addReadyHandler:function(a){d.isFunction(a)&&(this.isReady?a():this.__readyHandlers.push(a))},__addLoadEvent:function(c){var b=a.onload;a.onload="function"!=typeof a.onload?c:function(){b&&b();c()}},addEvent:function(){return c.addEventListener?function(a,c,b,d){a.addEventListener(c,b,d||!1)}:function(c,b,d){c.attachEvent("on"+b,function(){d.call(c,a.event)})}}(),removeEvent:function(){return c.removeEventListener?function(a,c,b,d){a.removeEventListener(c,b,d||!1)}:function(c,b,d){c.detachEvent("on"+
b,function(){d.call(c,a.event)})}}(),subscribe:function(a,c){h[a]=c},unsubscribe:function(a){delete h[a]},executeHandler:function(a,c){var b=new f.Element(c||a.target);if(b.element&&1===b.element.nodeType){var d=this.__findIndex(b),d=h[d];b.getAttribute&&!b.getAttribute("disabled")&&d&&d.call(null,a)}},hasId:function(a){return a.getAttribute("data-fruit-id")},__initEvents:function(){for(var a in g)g[a].attachEvent()},__seekElement:function(a){for(a=a.parent();a&&!this.hasId(a)&&!a.isSpecialElement();)a=
a.parent();return a},__findIndex:function(a){var c;if(!(c=this.hasId(a))&&!a.isSpecialElement())a=this.__seekElement(a),c=this.hasId(a);return c||"document"}}});f.define("fruit.event.DefaultProcessor",{entity:{init:function(a){this.eventType=a},attachEvent:function(){var a=f.event.Engine,b=this;a.addEvent(c,this.eventType,function(c){return a.executeHandler(b.normalize(c))},!1)},normalize:function(a){var c=this.__getEvent(a);return{originalEvent:c,eventDoc:this.__getEventDoc(a),type:c.type,pageX:this.__getPageX(a),
pageY:this.__getPageY(a),detail:this.__getDetail(a),keyCode:this.__getKeyCode(a),keyChar:this.__getKeyChar(a),target:this.__getTarget(a),hasSystemKey:this.__hasSystemKey(a),button:c.button,relatedTarget:this.__getRelatedTarget(a),stopPropagation:this.__stopPropagation,preventDefault:this.__preventDefault,stop:this.__stop}},__getEvent:function(c){return c||a.event},__getEventDoc:function(a){this.__getEvent(a);return this.__getTarget(a).ownerDocument||c},__getPageX:function(a){var c=this.__getEvent(a),
a=this.__getEventDoc(a);return"pageX"in c?c.pageX:c.clientX+(a.documentElement.scrollLeft||a.body.scrollLeft)-2},__getPageY:function(a){var c=this.__getEvent(a),a=this.__getEventDoc(a);return"pageY"in c?c.pageY:c.clientY+(a.documentElement.scrollTop||a.body.scrollTop)-2},__getDetail:function(a){a=this.__getEvent(a);return a.detail||-(a.wheelDelta||0)},__getKeyCode:function(a){a=this.__getEvent(a);return"keyCode"in a?a.keyCode:a.charCode||a.which||0},__getTarget:function(b){b=b.target||a.event.srcElement||
c;3===b.nodeType&&(b=b.parentNode);return b},__getRelatedTarget:function(a){a=this.__getEvent(a);if("relatedTarget"in a)return a.relatedTarget;if("mouseover"===a.type)return a.fromElement;if("mouseout"===a.type)return a.toElement},__stop:function(){this.__stopPropagation();this.__preventDefault()},__stopPropagation:function(){var a=this.originalEvent;"stopPropagation"in a?a.stopPropagation():a.cancelBubble=!0},__preventDefault:function(){var a=this.originalEvent;"preventDefault"in a?a.preventDefault():
a.returnValue=!1},__getKeyChar:function(a){return String.fromCharCode(a.keyCode)},__hasSystemKey:function(a){return a.ctrlKey||a.altKey}}});for(var e="mousedown,mousemove,mouseup,mouseover,mouseout,click,dblclick,keydown,keyup,keypress,cut,copy,select,contextmenu".split(","),b=e.length,j;b--;)j=e[b],k.addProcessor(j,new f.event.DefaultProcessor(j));k.domReady(function(){k.__initEvents()});k.domReady(f.execReadyFn);delete f.execReadyFn})(fruit,fruit.util,fruit.cache,fruit.dom,document,window);
(function(f,d,e,b,c,a){var g=/^(?:text|password|textarea|file)$/i,h=!1,k=null,j={__getValue:function(a){var c=a.value,b,d;switch(a.type){case "select-multiple":d=a.options;b="selected";break;case "radio":case "checkbox":d=a.name?a.ownerDocument.getElementsByName(a.name):[a];break;case "select-one":c=a.selectedIndex}if(d){b||(b="checked");for(var c=a=0,e=[],g;g=d[a++];)e[c++]=g[b];c=e.join("-")}return c},__initChangeData:function(c){var b=c||"__changeData",d=this;a.attachEvent("onbeforeactivate",function(a){var c;
(c=a.srcElement)&&e.data(c,b,d.__getValue(c))})},__hasChange:function(a,b,d){var g=d||"__changeData";if(d=a.target){var f=e.data(d,g),h=this.__getValue(d);if(h!==f)return e.data(d,g,h),a.type=b,c.executeHandler(a)}}};f.define("fruit.event.EnterLeaveProcessor",{extend:"fruit.event.DefaultProcessor",entity:{attachEvent:function(){var d=this;c.addEvent(a,this.eventType,function(a){var a=d.normalize(a),e=a.target,g=a.type,h=a.relatedTarget,p=c.hasId(e),k;p&&f.$[p]&&(k=f.$[p]._$events);if(k&&g in k)var r=
f.$[p].element;if(e&&e===r&&!b.contains(e,h)&&e!==h)return c.executeHandler(a)})},normalize:function(a){var c=this.superMethod(arguments);c.type="mouseover"===a.type?"mouseenter":"mouseleave";return c}}});f.define("fruit.event.DragProcessor",{extend:"fruit.event.DefaultProcessor",entity:{attachEvent:function(){var b=this,d=this.eventType;switch(d){case "mousedown":c.addEvent(a,d,function(a){k=a.target||a.srcElement;h=!0;return c.executeHandler(b.normalize(a))});break;case "mousemove":c.addEvent(a,
d,function(a){if(h)return c.executeHandler(b.normalize(a),k)});break;case "mouseup":c.addEvent(a,d,function(a){h=!1;return c.executeHandler(b.normalize(a),k)})}},normalize:function(a){var c=this.superMethod(arguments);switch(c.type){case "mousedown":c.type="dragstart";break;case "mousemove":c.type="dragmove";break;case "mouseup":c.type="dragend"}return c}}});f.define("fruit.event.ChangeProcessor",{extend:"fruit.event.DefaultProcessor",entity:{attachEvent:function(){var b=this,d=this.eventType;a.addEventListener?
c.addEvent(a,d,function(a){return c.executeHandler(b.normalize(a))},!0):a.attachEvent("onbeforeactivate",function(c){j.__initChangeData("__changeData");g.test(c.srcElement.type)?a.attachEvent("onfocusout",function(a){j.__hasChange(b.normalize(a),d)}):a.attachEvent("onclick",function(a){j.__hasChange(b.normalize(a),d)});a.attachEvent("onkeydown",function(a){13==a.keyCode&&j.__hasChange(b.normalize(a),d)})})}}});f.define("fruit.event.InputProcessor",{extend:"fruit.event.DefaultProcessor",entity:{attachEvent:function(){var b=
this;!d.isIE||10<=d.browserVersion?c.addEvent(a,this.eventType,function(a){return c.executeHandler(b.normalize(a))},!0):a.attachEvent("onbeforeactivate",function(){j.__initChangeData("__inputData");a.attachEvent("onkeyup",function(a){j.__hasChange(b.normalize(a),b.eventType,"__inputData")})})}}});f.define("fruit.event.FocusBlurProcessor",{extend:"fruit.event.DefaultProcessor",entity:{attachEvent:function(){var b=this;c.addEvent(a,this.eventType,function(a){return c.executeHandler(b.normalize(a))},
!0)},normalize:function(c){var b=this.superMethod(arguments);a.addEventListener||(b.type="focusin"===c.type?"focus":"blur");return b}}});f.define("fruit.event.MouseWheelProcessor",{extend:"fruit.event.DefaultProcessor",entity:{attachEvent:function(){var b=this;c.addEvent(a,"FF"===f.util.browserName?"DOMMouseScroll":"mousewheel",function(a){return c.executeHandler(b.normalize(a))},!0)},normalize:function(a){var c=this.superMethod(arguments);"FF"===f.util.browserName&&(c.type="mousewheel");return c}}});
c.addProcessor("mouseenter",new f.event.EnterLeaveProcessor("mouseover"));c.addProcessor("mouseleave",new f.event.EnterLeaveProcessor("mouseout"));c.addProcessor("input",new f.event.InputProcessor("input"));c.addProcessor("change",new f.event.ChangeProcessor("change"));a.addEventListener?(c.addProcessor("focus",new f.event.FocusBlurProcessor("focus")),c.addProcessor("blur",new f.event.FocusBlurProcessor("blur"))):(c.addProcessor("focus",new f.event.FocusBlurProcessor("focusin")),c.addProcessor("blur",
new f.event.FocusBlurProcessor("focusout")));c.addProcessor("dragstart",new f.event.DragProcessor("mousedown"));c.addProcessor("dragmove",new f.event.DragProcessor("mousemove"));c.addProcessor("dragend",new f.event.DragProcessor("mouseup"));c.addProcessor("mousewheel",new f.event.MouseWheelProcessor("mousewheel"))})(fruit,fruit.util,fruit.cache,fruit.dom,fruit.event.Engine,document,window);(function(){})(fruit,fruit.util,fruit.cache,fruit.event.Engine);
(function(f,d){f.define("fruit.ui.data.ModelManager",{singleton:!0,entity:{setValue:function(e,b,c){if(b=this.parsePath(b)){for(var a=b.split("."),g=a.length,b=e,f=0;f<g-1&&b;f++)b=b[a[f]];if(d.isObject(b)&&(a=a[g-1],g=b[a],g!==c)){if(g)if(d.isFunction(g.set))g.set.call(e,c);else{if(d.isFunction(g.get))return!1;b[a]=c}else b[a]=c;return!0}}return!1},getValue:function(e,b){var c=e,a=this.parsePath(b);if(a)for(var a=a.split("."),g=a.length,f=0;f<g&&c;f++)c=c[a[f]];c&&d.isFunction(c.get)&&(c=c.get.call(e));
return c},combinePath:function(d,b){var c=[];d&&c.push(d);b&&c.push(b);return c.join(".")},parsePath:function(e){var b;if(d.isString(e)){e=e.split(".");for(b=0;b<e.length;)switch(e[b]){case "@self":e.splice(b,1);break;case "@parent":e.splice(b-1,2);b--;break;case "@root":e.splice(0,b+1);b=0;break;default:b++}b=e.join(".")}return b}}})})(fruit,fruit.util);
(function(f,d,e,b){f.define("fruit.ui.data.ViewModel",{extend:"fruit.Observable",properties:{},entity:{init:function(c,a){d.isObject(c)||b.error('Cannot initialize ViewModel, parameter "model" must be of type "Object".');this.savedModel=c;this.model=(this.manualSave=a)?d.clone(c):c;this.isDirty=!1;this.__registerDependencies()},getSavedValue:function(c){var a=this.$properties;return a&&a[c]&&a[c].get?a[c].get.call(this.savedModel):e.getValue(this.savedModel,c)},getValue:function(c){var a=this.$properties;
return a&&a[c]&&a[c].get?a[c].get.call(this):e.getValue(this.model,c)},setValue:function(c,a){var b=this.$properties;if(b&&b[c]&&b[c].set?b[c].set.call(this,a):e.setValue(this.model,c,a))this.trigger("edit",{item:this,path:c,value:this.getValue(c)}),(b=this.__findDependency(c))&&d.each(b,function(a){this.trigger("edit",{item:this,path:a,value:this.getValue(a)})},this),this.manualSave&&(this.isDirty=!0)},refresh:function(){this.trigger("refresh")},getJSON:function(){return this.model},isModified:function(c){return this.getSavedValue(c)!==
this.getValue(c)},save:function(){this.manualSave&&(this.savedModel=d.clone(this.model),this.isDirty=!1)},restore:function(){this.manualSave&&(this.model=d.clone(this.savedModel),this.isDirty=!1)},__registerDependencies:function(){var c=this.__dependencies={};d.each(this.$properties,function(a,b){var e=a.dependencies;e&&d.each(e,function(a){(c[a]=c[a]||[]).push(b)})})},__findDependency:function(c){var a;if(a=this.__dependencies[c])return a;for(;0<=(a=c.lastIndexOf("."));)if(c=c.substr(0,a),a=this.__dependencies[c+
".*"])return a;return this.__dependencies["*"]}}});f.ui.data.ViewModel.regProcessor("properties",function(c,a){var b,e;if(a.properties){e=c.prototype;for(b=a.properties;e;)e.$properties&&(b=d.merge(b,e.$properties)),e=e.$super;c.prototype.$properties=b}})})(fruit,fruit.util,fruit.ui.data.ModelManager,fruit.util.logger);
(function(f,d,e,b){f.define("fruit.ui.data.ViewModelCollection",{extend:"fruit.Observable",entity:{init:function(c,a){this.originalItems=c=c||[];this.modelClass=f.getClass(a||"fruit.ui.data.ViewModel");this.setItems(c)},wrapItem:function(c){return c instanceof this.modelClass?c:new this.modelClass(c)},setItems:function(c){d.isArray(c)||b.error('Cannot initialize ViewModelCollection, parameter "items" must be of type "Array".');var a=this.items=[],e=0,f=c.length;for(this.length=0;e<f;e++){var k=this.wrapItem(c[e]);
a.push(k);k.on("edit",this.__edit,this);this.length++}this.trigger("reset")},getItem:function(c){if(c<this.items.length)return this.items[c]},appendItem:function(c){var a=this.items,b=this.originalItems,d=a.length,e=this.wrapItem(c);b.push(c);a.push(e);this.length++;this.trigger("add",{index:d,item:e});e.on("edit",this.__edit,this);return e},insertItem:function(c,a){var b=this.items,d=this.originalItems,e=this.wrapItem(c);d.splice(a,0,c);b.splice(a,0,e);this.length++;this.trigger("add",{index:a,item:e});
e.on("edit",this.__edit,this);return e},removeItem:function(c){var a=this.items,b=this.originalItems,e=d.indexOf(a,c);0<=e&&(b.splice(e,1),a.splice(e,1),this.length--,this.trigger("remove",{index:e,item:c}),c.off("edit",this.__edit,this))},removeItemAt:function(c){this.originalItems.splice(c,1);var a=this.items.splice(c,1);0<a.length&&(this.length--,this.trigger("remove",{index:c,item:a[0]}))},empty:function(){this.items=[];this.originalItems=[];this.trigger("reset")},each:function(c){if(d.isFunction(c))for(var a=
this.items,b,e=0,f=a.length;e<f&&!(b=a[e],!1===c(b));e++);},any:function(c){if(d.isFunction(c)){var a=!1;this.each(function(b){if(c(b))return a=!0,!1});return a}},all:function(c){if(d.isFunction(c)){var a=!0;this.each(function(b){if(!c(b))return a=!1});return a}},count:function(c){var a=0;d.isFunction(c)?this.each(function(b){c(b)&&a++}):a=this.length;return a},first:function(c){var a=null;d.isFunction(c)?this.each(function(b){if(c(b))return a=b,!1}):a=this.items[0];return a},sum:function(c){var a=
0,b=0;this.each(function(e){b=e.getValue(c);d.isNumeric(b)&&(a+=b)});return a},average:function(c){return this.sum(c)/this.length},max:function(c){var a=Number.NEGATIVE_INFINITY,b=NaN;this.each(function(d){b=d.getValue(c);b>a&&(a=b)});return a},min:function(b){var a=Number.POSITIVE_INFINITY,d=NaN;this.each(function(e){d=e.getValue(b);d<a&&(a=d)});return a},where:function(b){var a=[];d.isFunction(b)&&this.each(function(d){b(d)&&a.push(d)});return a},select:function(b){var a=[],e;d.isString(b)?this.each(function(d){e=
d.getValue(b);a.push(e)}):d.isFunction(b)&&this.each(function(d){e=b(d);a.push(e)});return a},groupBy:function(b){var a={},e,f;this.each(function(k){f=k.getValue(b);d.isUndef(f)||(e=a[f]=a[f]||[],e.push(k))});return a},orderBy:function(b){d.isString(b)?this.items.sort(this.__defaultComparator(b)):d.isFunction(b)&&this.items.sort(b);this.trigger("reset")},toArray:function(){return this.items},__defaultComparator:function(b){return function(a,d){var e=a.getValue(b),f=d.getValue(b);return e>f?1:e<f?
-1:0}},__edit:function(b,a){this.trigger("edit",a)}}})})(fruit,fruit.util,fruit.ui.data.ModelManager,fruit.util.logger);
(function(f,d,e,b){function c(a){return d.isString(a)?a.match(/^{([^:]*)}$/):null}f.define("fruit.ui.ViewManager",{singleton:!0,methods:{viewInfoTable:{},registerView:function(a,b,c){this.viewInfoTable[a]={view:b,regions:c,dynamic:b.dynamic||!1,nameMap:{}}},getElement:function(a){var c=this.viewInfoTable[a];if(c){if(d.isUndef(c.root)||c.dynamic)c.root=this.generateElement(c.view,a,"0");var e=c.root.clone(!0);e.setAttribute("data-fruit-type",a);var a=d.clone(c.nameMap),f;for(f in a)a[f]=this.__getElementByPath(e,
a[f]);return{element:e,nameMap:a}}b.error('Error generating element for component "'+a+'".');return null},generateElement:function(a,b,h){if(d.isString(a))return e.createTextNode(a);var k=a.type,j=a.tag||"div",l=a.attr||{},o=a.name,n=a.container,m=a.content,q=a.options,p=a.model,s=a.template,r=[],u=(this.viewInfoTable[k]||{}).regions||null,v;if(k)var j=this.getElement(0>k.indexOf(".")?"fruit.ui."+k:k),w=j.nameMap,j=j.element;else k=l&&l.type,d.isIE&&8>=d.browserVersion?j=k?e.createElement("<"+j+' type="'+
k+'" />'):e.createElement(j):(j=e.createElement(j),j.setAttribute("type",k));o&&j.setAttribute("data-fruit-name",o);p&&j.setAttribute("data-fruit-model",JSON.stringify(p));s&&j.setAttribute("data-fruit-template",JSON.stringify(s));f.util.isUndef(n)||j.setAttribute("data-fruit-container",n);for(v in l)if(p=l[v],n=c(p))r.push({prop:v,expr:p});else switch(v){case "class":j.addClass(p);break;case "style":j.setStyle(p);break;case "type":break;default:j.setAttribute(v,p)}if(q){var l={},t;for(t in q)v=q[t],
(n=c(v))?r.push({prop:"options."+t,expr:v}):l[t]=v;j.setAttribute("data-fruit-options",JSON.stringify(l))}if(m)if(d.isString(m))(n=c(m))?r.push({prop:"content",expr:m}):(l=a.region||"default",u&&u[l]?(t=w[u[l].target],t.setAttribute("data-fruit-xowner",b||""),t.setHtml(m)):j.setHtml(m));else{m=d.isArray(m)?m:[m];contentDom=e.createElement("div");q=m.length;for(a=0;a<q;a++)l=m[a],t=this.generateElement(l,b||"",h+"."+a),l=l.region||"default",u&&u[l]?(t=w[u[l].target],t.setAttribute("data-fruit-owner",
b||""),t.appendChild(subEL)):j.appendChild(t)}0<r.length&&j.setAttribute("data-fruit-bindings",JSON.stringify(r));o&&b&&(this.viewInfoTable[b].nameMap[o]=h);return j},__setContent:function(){},__getElementByPath:function(a,b){if(0==b)return a;var c=b.split("."),d=a;c.shift();for(var e=0;e<c.length;e++)d=d.childAt(c[e]);return d}}})})(fruit,fruit.util,fruit.dom,fruit.util.logger);
(function(f,d,e){f.define("fruit.ui.OptionManager",{singleton:!0,methods:{optionTable:{},registerOption:function(b,c,a){b=(this.optionTable[b]=this.optionTable[b]||{})[c]=a;b.localValues={};b.lastValues={}},initOptions:function(b){for(var c=b,a={},d=this.optionTable,e,f;c;){e=d[c.$fullname];for(f in e)a[f]||(a[f]=!0,b.evaluateTriggers("option."+f,e[f].defaultValue));c=c.$super}},getOption:function(b,c){var a=this.findOption(b,c);if(a)if(a.hidden)e.warn('Cannot access hidden option "'+c+'".');else return this.getComputedOptionValue(b,
a);else e.warn('Cannot find option "'+c+'".')},setOption:function(b,c,a,f){var h=this.findOption(b,c);if(d.isUndef(a))return!1;if(h){if(h.hidden)return e.warn('Cannot access hidden option "'+c+'".'),!1;if(!f&&h.readonly)return e.warn('Cannot set readonly option "'+c+'".'),!1;if(h.acceptTypes&&(f=h.acceptTypes,f=d.isArray(f)?f:[f],0>d.indexOf(f,d.getType(a))))return e.warn('option "'+c+'" only accepts value of type ['+f+"]"),!1}else return e.warn('Cannot find option "'+c+'".'),!1;f=this.getComputedOptionValue(b,
h);return f!==a?(h.lastValues[b.$id]=f,h.localValues[b.$id]=a,b._$onPropertyChanged("options."+c,a,f),h.inherits&&b.traverse(function(b){b.evaluateTriggers("option."+c,a)}),!0):!1},findOption:function(b,c){for(var a,d=b,e=this.optionTable,f;d;){if(f=e[d.$fullname])if(a=f[c],"undefined"!=typeof a)break;d=d.$super}return a},getComputedOptionValue:function(b,c){var a;if(c){var d=c.localValues[b.$id];if("undefined"!=typeof d)a=d;else if(c.inherits)for(d=b.$parent;d;){a=c.localValues[d.$id];if("undefined"!=
typeof a)break;d=d.$parent}"undefined"==typeof a&&(a=c.defaultValue)}return a}}})})(fruit,fruit.util,fruit.util.logger);
(function(f){f.define("fruit.Node",{methods:{init:function(){this.$nextSibling=this.$previousSibling=this.$lastChild=this.$firstChild=this.$parent=null},prependChild:function(d){var e=this.childAt(0);e?this.insertBefore(d,e):this.appendChild(d)},appendChild:function(d){this.$firstChild||(this.$firstChild=d);this.$lastChild&&(d.$previousSibling=this.$lastChild,this.$lastChild.$nextSibling=d);this.$lastChild=d;d.$parent=this},insertBefore:function(d,e){var b=e.$previousSibling;d.$parent=this;d.$nextSibling=
e;e.$previousSibling=d;b?(d.$previousSibling=b,b.$nextSibling=d):this.$firstChild=d},insertAt:function(d,e){if(0==e)this.prependChild(d);else{var b=this.childAt(e);b?this.insertBefore(d,b):0<e?this.appendChild(d):0>e&&this.prependChild(d)}},removeChild:function(d){d&&d.$parent==this&&d.isolate()},getIndex:function(){for(var d=this,e=-1;d;)e++,d=d.$previousSibling;return e},childAt:function(d){var e=null,b=d;if(0<=d)for(e=this.$firstChild;e&&0<b;)e=e.$nextSibling,b--;else for(e=this.$lastChild;e&&
-1>b;)b++,e=e.$previousSibling;return e},children:function(d){var e=0,b=this.$firstChild;if(d)for(;b&&!1!==d(b,e++);)b=b.$nextSibling;else{for(d=[];b;)d.push(b),b=b.$nextSibling;return d}},ancestors:function(d){var e=this.$parent;if(d)for(;e&&!1!==d(e);)e=e.$parent;else{for(d=[];e;)d.push(e),e=e.$parent;return d}},isolate:function(){var d=this.$previousSibling,e=this.$nextSibling,b=this.$parent;d?d.$nextSibling=e:b&&(b.$firstChild=e);e?e.$previousSibling=d:b&&(b.$lastChild=d);this.$parent=this.$previousSibling=
this.$nextSibling=null},traverse:function(d){var e;d(this);for(e=this.$firstChild;e;)e.traverse(d),e=e.$nextSibling},isChildOf:function(d){return this.$parent==d},isParentOf:function(d){return d.$parent==this},isAncestorOf:function(d){var e=!1,b=this;d.ancestors(function(c){if(c==b)return e=!0,!1});return e},isDescendantOf:function(d){var e=!1;this.ancestors(function(b){if(b==d)return e=!0,!1});return e}}})})(fruit);
(function(f){f.define("fruit.ui.Behavior",{entity:{init:function(d,e){this.component=d;this.config=e||{}},onAttached:function(){},onDettached:function(){}}})})(fruit);
(function(f,d,e,b,c,a,g,h,k){function j(a){return d.isString(a)?a.match(/^{([^:]*)}$/):null}function l(a,b){var c=[];a&&c.push(a);b&&c.push(b);return c.join(".")}function o(a,b,c){"undefined"==typeof a[b]?a[b]=c:(a[b]=c,g.warn('Duplicated prop "'+b+'"  detected.'))}function n(a,b,c,e){d.isObject(a)&&(c=c||h.generateElement(a),a=a.type);a=0>(a||"Component").indexOf(".")?"fruit.ui."+(a||"Component"):a||"Component";return new (f.getObject(a))(b,c,e)}f.ns("fruit.ui");var m=1;f.$={};var q=function(){return{"class":{set:function(a,
b,c,d){a.replaceClass(d,c)},get:function(a){return a.getClass()}},style:{set:function(a,b,c){var d={};b?d[b]=c:d=c;a.setStyle(d)},get:function(a,b){return b?a.getStyle(b):a.getAttribute("style")}},options:{set:function(a,b,c){if(!b)for(var d in c)a.setOption(d,c[d]);b=b.split(".");switch(b.length){case 0:throw Error("Options can not be setted!");case 1:break;default:d=b.slice(1);var e,f;e=f={};for(var g=d.pop(),h=d.length,l=0;l<h;l++)f[d[l]]={},f=f[d[l]];f[g]=c;c=e}a.setOption(b[0],c)},get:function(a,
b){if(b){var c=b.split("."),d=a.getOption(c.shift());if(c.length){var e=c.pop(),f=c.length;if(!f)for(var g=0;g<f;g++)d=d[c[g]];return d[e]}return d}}},content:{set:function(a,b,c){a.setContent(c,a)},get:function(a){return a.getHtml()}},model:{set:function(a,b,c){a.setModel(c,b)},get:function(a){return a.getModel()}},"default":{set:function(a,b,c){a.setAttribute(b,c)},get:function(a,b){return a.getAttribute(b)}}}}();f.define("fruit.Controller",{mixins:["fruit.Node","fruit.Observable"],entity:{init:function(){m++;
this.$owner=this.$parent=f.Application;f.$[this.$id]=this;this._triggers={}},destroy:function(){for(var a=this.$id,b=this.children(),c,e=0,g=b.length,e=0;e<g;e++)c=b[e],c.destroy();d.each(this.eventRefs,function(a){a.target.off(a.etype,a.fn)});this.isolate();delete f.$[a]},register:function(){0===arguments.length&&g.warn("can not inject null object");1===arguments.length?d.mixin(this,arguments[0]):o(this,arguments[0],arguments[1]);return this},unregister:function(a){this[a]&&delete this[a]},attachEvents:function(){var a=
this.$config.events||{},b,c,d,e,f,a=a.subscribe||{};for(c in a)if(b="this"==c?this:this[c])for(e in d=a[c],d)f=d[e],b.on(e,this[f],this)},getPublishedEvents:function(){var a=this.$config.events;return a?a.publish||[]:[]},attachTriggers:function(){var a=this.$triggers||{},b,c,e,f,h,l,k,j,o,m,n,q;for(c in a)for(e in f=a[c],f){h=f[e];h=d.isArray(h)?h:[h];b=c+"."+e;q=h.length;for(n=0;n<q;n++){l=h[n];k=l.source?this[l.source]:this;j=l.target?this[l.target]:this;if(!k){g.warn('Cannot find trigger source "'+
l.source+'".');break}if(!j){g.warn('Cannot find trigger target "'+l.target+'".');break}o=j[l.action];m=l.params;if(!o){g.warn('Cannot find trigger action "'+l.action+'".');break}k=k._triggers[b]=k._triggers[b]||[];k.push({target:j,actionName:l.action,action:o,params:d.isUndef(m)?null:d.isArray(m)?m:[m]})}}},evaluateTriggers:function(a,b){var c=this._triggers[a],d,e,f,g,h,l,k=0==a.indexOf("event");if(c){h=0;for(l=c.length;h<l;h++){d=c[h];e=d.params;f=[];if(e)for(var j=e.length,o=0;o<j;o++)g=e[o],"#value#"==
g?f.push(b):"#!value#"==g?f.push(!b):f.push(e[o]);else f=[b];k?d.action.call(d.target,this,b,d.param):d.action.apply(d.target,f)}}},trigger:function(a,b){b=b||{};this.evaluateTriggers("event."+a,b);var c=b&&b.routing||"bubble";"none"!=c&&(this.superMethod([a,b]),"bubble"==c?(c=this.$parent)&&c.trigger(a,b):"tunnel"==c&&this.children(function(c){c.trigger(a,b)}))},hasEvent:function(a){return 0<=d.indexOf(this.$events.publish,a)}}});f.Controller.regProcessor("triggers",function(a,b){var c,e;if(b.triggers){e=
a.prototype;for(c=b.triggers;e;)e.$triggers&&(c.option=d.merge(c.option,e.$triggers.option),c.event=d.merge(c.event,e.$triggers.event)),e=e.$super;a.prototype.$triggers=c}});f.define("fruit.ui.Component",{extend:"fruit.Controller",options:{id:{defaultValue:null,acceptTypes:["String","Number","Null"]},disabled:{defaultValue:!1,inherits:!0,acceptTypes:["Boolean"]},hidden:{defaultValue:!1,acceptTypes:["Boolean"]},visible:{defaultValue:!0,acceptTypes:["Boolean"]},title:{defaultValue:null,acceptTypes:["String",
"Null"]}},triggers:{option:{id:{action:"setAttribute",params:["id","#value#"]},disabled:[{action:"setAttribute",params:["disabled","#value#"]},{action:"setAttribute",params:["aria-disabled","#value#"]}],title:{action:"setAttribute",params:["title","#value#"]},hidden:{action:"toggleClass",params:["hidden","#value#"]}}},entity:{init:function(a,c,g){var l,k,m,t,q=this,g=g||this,c=c||h.getElement(this.$fullname).element;this.initializing=!0;this.element=new f.Element(c);for(c=this.element.firstChild();c;)e.isElement(c.element)&&
(l=c.getAttribute("data-fruit-type"),k=c.getAttribute("data-fruit-name"),m=c.getAttribute("data-fruit-container"),l=n(l,null,c,l&&!m?null:g),this.appendChild(l),k&&(l.name=k,l.$owner=g,o(g,k,l))),c=c.nextSibling();this.attachTriggers();this.setAttribute("data-fruit-id",this.$id);k=this.getAttribute("data-fruit-model");l=this.getAttribute("data-fruit-template");c=this.getAttribute("data-fruit-options");g=this.getAttribute("data-fruit-bindings");l&&this.setTemplate(JSON.parse(l));k&&(k=JSON.parse(k),
d.isString(k)?(l=j(k))?this.__nodePath=l[1]:this.model=k:this.setModel(k));c&&(c=JSON.parse(c),a=a||c);if(g){g=JSON.parse(g);for(c=0;c<g.length;c++)k=g[c],this.setBinding(k.prop,j(k.expr)[1])}g=this.getAllOptions();d.each(g,function(a,b){this.evaluateTriggers("option."+b,a)},this);if(a)for(t in a)this.setOption(t,a[t],!0);b.subscribe(this.$id,function(a){if(a.target){var b=a.target.getAttribute("data-fruit-id");a.target=f.$[b]}q.trigger(a.type,a)});delete this.initializing},destroy:function(){this.superMethod(arguments);
var a=this.name;a&&this.$owner[a]&&delete this.$owner[a];b.unsubscribe(this.$id);this.element.remove()},getElement:function(){return this.element},renderTo:function(a){f.Application.load(this,a)},__parseProperty:function(a,b,c,d,e){var f=b.match(/^(\w+)(?:\.)*(.*)/),g=q[f[1]];return g?g[e](a,f[2],c,d):q["default"][e](a,b,c,d)},setProperty:function(a,b,c){this.__parseProperty(this,a,b,c,"set")},getProperty:function(a,b,c){return this.__parseProperty(this,a,b,c,"get")},initOptions:function(){k.initOptions(this)},
setOption:function(a,b,c){this.superMethod(arguments)&&(this._$onPropertyChanged("options."+a,b),this.evaluateTriggers("option."+a,b));"disabled"==a&&this.children(function(a){a.setOption("disabled",b)})},getOption:function(a){return this.superMethod(arguments)},getBound:function(){return this.element.getBound()},setContent:function(a,b){b=b||this;if(null!=a){var c=d.isArray(a)?a:[a],e,f=c.length,g;this.empty();for(e=0;e<f;e++)g=c[e],this.__setContent(g,b)}},__setContent:function(a,b){var c={},c=
c[a.region||""]||c["default"]||{},c=c.target&&b!=this?b[c.target]:b;if(d.isObject(a))if(a instanceof f.ui.Component)c.appendChild(a);else{var e=n(a),g=a.content,h=a.name;c.appendChild(e);h&&(e.setAttribute("data-fruit-name",h),this[h]=e);g&&this.setContent(g,e)}else c.empty(),c.setHtml(a.toString())},setText:function(a){this.element.setText(a)},getText:function(){return this.element.getText()},setHtml:function(a){this.element.setHtml(a)},getHtml:function(){return this.element.getHtml()},getAttribute:function(a){return this.element.getAttribute(a)},
setAttribute:function(a,b){this.element.setAttribute(a,b)},removeAttribute:function(a){this.element.removeAttribute(a)},getClass:function(){return this.element.getClass()},setClass:function(a){this.element.setAttribute("class",a)},hasClass:function(a){return this.element.hasClass(a)},addClass:function(a){this.element.addClass(a)},removeClass:function(a){this.element.removeClass(a)},replaceClass:function(a,b){this.element.replaceClass(a,b)},toggleClass:function(a,b){!0===b?this.element.addClass(a):
!1===b?this.element.removeClass(a):this.element.toggleClass(a)},switchClass:function(a,b){this.__switchClass(this.element,a,b)},__switchClass:function(a,b,c){var e=c[b],c=this.__getOtherCls(b,c);if(!(null===e||void 0===e||!c)){for(var b=[],f=0,g,h=c.length;f<h;f++)g=c[f],""!==g&&b.push("((?:^|\\s)"+g+"(?=\\s|$))");b=RegExp(b.join("|"),"ig");b=(b=(c=a.getClass())?c.match(b):null)?d.trim(b[0]):"";a.replaceClass(b,e)}},__getOtherCls:function(a,b){var c=[];b.splice?(c=[].concat(b),c.splice(a,1),c=b):
(c=d.clone(b),delete c[a],c=d.getObjectVals(c));return c},switchAttribute:function(a,b,c){this.element.setAttribute(a,c[b])},hide:function(){this.setOption("hidden",!0)},show:function(){this.setOption("hidden",!1)},getModel:function(b){b=b&&this.__propMap?this.__propMap[b]:"";if(this.model)return this.model instanceof f.ui.data.ViewModel?this.model.getValue(l(this.__modelPath,b)):this.model instanceof f.ui.data.ViewModelCollection?this.model.originalItems:a.getValue(this.model,l(this.__modelPath,
b))},setBinding:function(a,b){var c=this.__propMap=this.__propMap||{},d=this.__pathMap=this.__pathMap||{},d=d[b]=d[b]||[];c[a]=b;d.push(a)},setTemplate:function(a){this.template=a;this.model&&this._$onModelReset()},setModel:function(a,b,c){c||(this.__nodePath="");b=l(b,this.__nodePath);this.modelType="M";this.__modelPath=b;this.hasOwnModel=!c;this.model&&(this.model instanceof f.ui.data.ViewModel?(this.model.off("refresh",this._$onModelRefresh,this),this.model.off("edit",this._$onModelEdit,this)):
this.model instanceof f.ui.data.ViewModelCollection&&(this.model.off("reset",this._$onModelReset,this),this.model.off("add",this._$onModelAdd,this),this.model.off("remove",this._$onModelRemove,this)));if(this.model=a)this.model instanceof f.ui.data.ViewModel?(this.model.on("refresh",this._$onModelRefresh,this),this.model.on("edit",this._$onModelEdit,this),this.modelType="VM"):this.model instanceof f.ui.data.ViewModelCollection&&(this.model.on("reset",this._$onModelReset,this),this.model.on("add",
this._$onModelAdd,this),this.model.on("remove",this._$onModelRemove,this),this.modelType="VMC");this._$onModelRefresh();this._$onModelReset()},syncModel:function(){var b=this.model,c=this.__modelPath;d.each(this.__pathMap,function(e,f){d.each(e,function(d){var e=l(c,f),g;switch(this.modelType){case "M":g=a.getValue(b,e);break;case "VM":g=b.getValue(e);break;case "VMC":g=b}this.setProperty(d,g)},this)},this)},_$onModelRefresh:function(){this.syncModel()},_$onModelReset:function(){var b=this.model,
c=this.template,e=this.__modelPath;if(c){var g;switch(this.modelType){case "M":g=a.getValue(b,e);break;case "VM":g=b.getValue(e);break;case "VMC":g=b.items}g instanceof f.ui.data.ViewModelCollection&&(this.model=g,this.modelType="VMC",g.on("add",this._$onModelAdd,this),g.on("remove",this._$onModelRemove,this),g.on("reset",this._$onModelReset,this),g=g.items);this.empty();d.isArray(g)&&d.each(g,function(f,g){var h=e?e+"."+g:g.toString(),k=d.clone(c);if(d.isString(k.type)){var o=j(k.type);if(o){o=l(h,
o[1]);k.type=a.getValue(b,o)}}h=n(k);this.appendChild(h);h.__nodePath=this.modelType=="VMC"?"":""+g;h.trigger("ready",{routing:"tunnel"});h.setModel(this.modelType=="VMC"?f:b,this.modelType=="VMC"?"":e,true,true)},this)}else this.children(function(a){a.hasOwnModel||a.setModel(b,e,!0,!0)})},_$onModelEdit:function(a,b){var c=b.path,e=b.value,f=this.__modelPath;if(c&&this.__pathMap){if(f){if(0!=c.indexOf(f))return;c=c.substr(f.length+1)}(c=this.__pathMap[c||""])&&d.each(c,function(a){this.setProperty(a,
e,this.getProperty(a))},this)}},_$onModelAdd:function(a,b){var c=b.index,d=b.item,e=this.template;e&&(e=n(e),this.insertAt(e,c),e.trigger("ready",{routing:"tunnel"}),e.setModel(d,""))},_$onModelRemove:function(a,b){var c=b.index;this.template&&(c=this.childAt(c))&&c.destroy()},_$onPropertyChanged:function(b,c){var d=this.model;if(d&&this.__propMap){var e=l(this.__modelPath,this.__propMap[b||""]);d instanceof f.ui.data.ViewModel?d.setValue(e,c):a.setValue(d,e,c)}},setStyle:function(a,b){this.element.setStyle(a,
b)},getStyle:function(a){return this.element.getStyle(a)},removeStyle:function(a){this.element.removeStyle(a)},emptyStyle:function(){this.element.removeStyle()},empty:function(){for(var a=this.children(),b,c=0,d=a.length;c<d;c++)b=a[c],b.destroy();this.element.empty()},focus:function(){this.element.focus()},blur:function(){this.element.blur()},attachBehavior:function(a){for(var a=d.isArray(a)?a:[a],b=a.length,c,e;b--;)if(c=a[b],e=c.behavior,c=c.params,e=new f.ui[e+"Behavior"](this,c),d.isFunction(e.onAttached))e.onAttached(this)},
detachBehavior:function(a){if(d.isFunction(a.onDettached))a.onDettached(this)},appendChild:function(a){this.superMethod(arguments);var b=this.element,c=a.element;b&&c&&!c.parent()&&(b.appendChild(c),a.trigger("ready",{routing:"tunnel"}))},insertBefore:function(a,b){this.superMethod(arguments);var c=this.element,d=a.element,e=b.element;c&&e&&e.parent()&&(c.insertBefore(d,e),a.trigger("ready",{routing:"tunnel"}))},__refreshModelPath:function(a){var b=this.__modelPath=l(a,this.__nodePath);this.children(function(a){a.__refreshModelPath(b)})}}});
f.ui.Component.regProcessor("view",function(a,b){if(b.view)h.registerView(a.prototype.$fullname,b.view,b.regions);else{var c=a.prototype.$super;c&&(h.viewInfoTable[a.prototype.$fullname]=d.clone(h.viewInfoTable[c.$fullname]))}});f.ns("fruit.ui").extend({getComponentById:function(a){if(a=e.getById(a))return a=e.getAttribute(a,"data-fruit-id"),f.$[a]},createComponent:n})})(fruit,fruit.util,fruit.dom,fruit.event.Engine,fruit.dom.position,fruit.ui.data.ModelManager,fruit.util.logger,fruit.ui.ViewManager,
fruit.ui.OptionManager);
(function(f,d,e,b){f.define("fruit.Application",{extend:"fruit.Controller",singleton:!0,methods:{init:function(){this.document=document;var a=this;f.ready(function(){e.subscribe("document",function(b){a.trigger(b.type,b)});this.element=document.body})},getBody:function(){return this._body=this._body||document.body},on:function(a,b,c,d){-1!==a.indexOf("window")?e.addEvent(window,a.substring(7),b):this.superMethod(arguments)},load:function(a,b){if(a instanceof f.ui.Component){var c;c=(c=d.isString(b)?
document.getElementById(b):b)||this.getBody();this.appendChild(a);c.appendChild(a.element.getElement());a.trigger("ready",{routing:"tunnel"})}},parse:function(a){a=a||document.body;if(b.isElement(a)){var a=new f.Element(a),c=a.getAttribute("data-fruit-id"),d=a.getAttribute("data-fruit-type");if(!c)if(d){c=f.createComponent(d,null,a);this.appendChild(c);if(a=a.getAttribute("data-fruit-name"))"undefined"==typeof this[a]?this[a]=c:(this[a]=c,logger.warn('Duplicated prop "'+a+'"  detected.'));c.trigger("ready",
{routing:"tunnel"})}else for(a=a.firstChild;a;)b.isElement(a)&&this.parse(a),a=a.nextSibling}}}});var c=!1;f.ready(function(){c||(f.Application.parse(),c=!0)})})(fruit,fruit.util,fruit.event.Engine,fruit.dom);
(function(f,d,e,b){f.define("fruit.ui.DraggableBehavior",{extend:"fruit.ui.Behavior",entity:{onAttached:function(){var c=this.component,a=this.config.handle||c,d={},h=a.getStyle("position");if("absolute"!==h||"fixed"!==h||"relative"!==h)d={position:"relative"};d.cursor="move";a.setStyle(d);c.activate=!1;this.dragstart=function(a,d){b.isIE&&c.element.element.setCapture(!0);var f=c.element.getXY(),g=c.getStyle("position");("relative"===g||"static"===g)&&c.setStyle({left:f.x,top:f.y,position:"absolute"});
c.element.appendTo(e.getBody());if(0==d.button||1==d.button)c.activate=!0,f=parseFloat(c.getStyle("left")),g=parseFloat(c.getStyle("top")),c._x=d.pageX-f,c._y=d.pageY-g,c.trigger("onDragStart"),d.preventDefault()};this.dragmove=function(a,b){if(c.activate){var d=e.getDocRect(),g=c.element.getBound();if(0==b.button||1==b.button)c.setStyle({left:b.pageX-c._x,top:b.pageY-c._y}),b.pageX<=c._x&&c.setStyle({left:0}),d.width-b.pageX<=g.width-c._x&&c.setStyle({left:d.width-g.width}),b.pageY<=c._y&&c.setStyle({top:0}),
"fixed"===c.getStyle("position")?d.height-b.pageY<=g.height-c._y&&c.setStyle({top:d.height-g.height}):d.scrollHeight-g.height<=b.pageY-c._y&&c.setStyle({top:d.scrollHeight-g.height});f.dom.clearSelection()}};this.dragend=function(){b.isIE&&c.element.element.releaseCapture();c.activate=!1;c.trigger("onDragEnd")};a.on("dragstart",this.dragstart,this);a.on("dragmove",this.dragmove,this);a.on("dragend",this.dragend,this)},onDettached:function(){var b=this.config.handle||this.component;b.off("dragstart",
this.dragstart);b.off("dragmove",this.dragmove);b.off("dragend",this.dragend);delete this.dragstart;delete this.dragmove;delete this.dragend}}})})(fruit,fruit.Application,fruit.dom,fruit.util);
(function(f,d,e,b,c,a){f.define("fruit.ui.ResizableBehavior",{extend:"fruit.ui.Behavior",entity:{onAttached:function(){var b=this.config,d=this.component,f=b.target.element,b=this.__createHandle(b.direction),j=!1,l,o;d.appendChild(b);b.on("dragstart",function(b,c){j=!0;l=[c.pageX,c.pageY];o=f.getSize(!0);a.isIE&&d.element.element.setCapture(!0);c.routing="none"});e.on("dragmove",function(a,b){j&&(c.clearSelection(),f.setStyle({width:o.width+b.pageX-l[0],height:o.height+b.pageY-l[1]}))});e.on("dragend",
function(){j=!1;a.isIE&&d.element.element.releaseCapture()})},__createHandle:function(a){return d.createComponent({attr:{"class":"f-resize-"+a+"-resize"},tag:"i"})},onDettached:function(){}}})})(fruit,fruit.ui,fruit.Application,fruit.dom.position,fruit.dom,fruit.util);
(function(f,d,e,b){f.define("fruit.ui.TooltipBehavior",{extend:"fruit.ui.Behavior",entity:{onAttached:function(){var c=this.component,a=this.config&&this.config.prop||"title",d=b.getGlobalTooltip(),e=c.getOption(a)||this.config[a];e&&(c.on("mouseover",function(){"title"==a&&c.setAttribute(a,"");d.setOption("tooltip",e);d.setStyle({display:"block"});d.show();this.__autoPostion(d,c)},this),c.on("mouseout",function(){"title"==a&&c.setAttribute(a,e);d.setStyle({display:"none"});d.hide()},c),c.on("dragmove",
function(){d.setStyle({display:"none"});d.hide()}))},__getQuadrant:function(b,a){if(b.x<=a.x&&b.y<=a.y)return 1;if(b.x>a.x&&b.y<a.y)return 2;if(b.x<=a.x&&b.y>a.y)return 3;if(b.x>a.x&&b.y>a.y)return 4},__autoPostion:function(b,a){var d=e.getDocRect(),f=b.getBound(),k=a.getBound(),j={};switch(this.__getQuadrant({x:k.x-d.scrollX+0.5*k.width,y:k.y-d.scrollY+0.5*k.height},{x:0.5*d.width,y:0.5*d.height})){case 1:b.setOption("direction","bl");j={left:k.x,top:k.y+k.height+15};break;case 2:b.setOption("direction",
"br");j={left:k.x+(k.width-f.width),top:k.y+k.height+15};break;case 3:b.setOption("direction","tl");j={left:k.x,top:k.y-(f.height+15)};break;case 4:b.setOption("direction","tr");j={left:k.x+(k.width-f.width),top:k.y-(f.height+15)};break;default:b.setOption("direction","top"),j={left:k.x,top:k.y+k.height+15}}b.setStyle(j)}}})})(fruit,fruit.ui,fruit.dom.position,fruit.Application);
(function(f,d){f.define("fruit.ui.PlaceholderBehavior",{extend:"fruit.ui.Behavior",entity:{onAttached:function(){var d=this.config,b=this.component,c=d.inputTarget,a=this.__createLabel(d.text);b.appendChild(a);a.on("ready",function(){b.getOption("text")&&a.setStyle({opacity:0,zIndex:-1})});a.on("click",function(){c.focus()});c.on("focus",function(){c.getAttribute("value")||a.setStyle({opacity:0.6})});c.on("input",function(){a.setStyle({opacity:0,zIndex:-1})});c.on("blur",function(){c.getAttribute("value")||
a.setStyle({opacity:1,zIndex:0})})},__createLabel:function(e){return d.createComponent({attr:{"class":"f-textbox-placeholder"},name:"placeholder",tag:"span",content:e})},onDettached:function(){}}})})(fruit,fruit.ui);
(function(f,d,e){f.define("fruit.ui.AbstractListItem",{extend:"fruit.ui.Component",options:{type:{defaultValue:"item",acceptTypes:["String","Null"]}},triggers:{option:{type:{action:"switchClass",params:["#value#",{item:"f-list-item",divider:"f-list-divider"}]}},event:{mousedown:{action:"__mousedown"},mouseover:{action:"__mouseover"},mouseup:{action:"__mouseup"}}},methods:{activate:function(){return!this.getOption("disabled")&&"item"===this.getOption("type")?(this.setAttribute("aria-selected",!0),
!0):!1},deactivate:function(){this.setAttribute("aria-selected",!1)},__mousedown:function(b,c){c.target=this},__mouseup:function(b,c){c.target=this},__mouseover:function(b,c){c.target=this}}});f.define("fruit.ui.ListItem",{extend:"fruit.ui.AbstractListItem",view:{tag:"li",attr:{"class":"f-list-item",role:"listitem"},content:[{tag:"i",name:"icon"},{tag:"a",name:"text"}]},options:{text:{defaultValue:null,acceptTypes:["String","Null"]},icon:{defaultValue:"hidden",acceptTypes:["String","Null"]}},triggers:{option:{text:{target:"text",
action:"setHtml"},icon:{target:"icon",action:"setClass"}}}});f.define("fruit.ui.List",{extend:"fruit.ui.Component",view:{attr:{tabindex:"-1","class":"f-list",role:"list"},content:[{tag:"ul",name:"ulist",attr:{"class":"f-list-wrap"}}]},options:{items:{defaultValue:null,acceptTypes:["Array","Null","Object"]},itemTemplate:{defaultValue:{type:"ListItem",options:{text:"{text}",icon:"{icon}",type:"{type}",disabled:"{disabled}"}},acceptTypes:["Object"]}},triggers:{option:{items:{target:"ulist",action:"setModel"},
itemTemplate:{target:"ulist",action:"setTemplate"}},event:{mouseover:{source:"ulist",action:"__ulist_mouseover"},mousedown:{source:"ulist",action:"__ulist_mousedown"},mouseup:{source:"ulist",action:"__ulist_mouseup"},keyup:{action:"__onKeyUp"},keydown:{action:"__onKeyDown"},blur:{action:"__onBlur"}}},methods:{init:function(){this.activeItem=null;this.on("focus",this.__focus,this);this.on("blur",this.__blur,this);this.ulist.template=this.getOption("itemTemplate")},setOption:function(b,c){this.superMethod(arguments);
"items"==b&&(this.activeItem=null)},getItem:function(b){return this.ulist.childAt(b)},activateItem:function(b){var c=!1;this.activeItem&&this.activeItem.deactivate();(this.activeItem=b)&&(c=b.activate());f.util.isIE8&&this.setStyle({zoom:1});return c},prevItem:function(){if(this.activeItem)for(var b=this.activeItem.$previousSibling;b&&!this.activateItem(b);)b=b.$previousSibling;else this.activateItem(this.ulist.$lastChild)},nextItem:function(){if(this.activeItem)for(var b=this.activeItem.$nextSibling;b&&
!this.activateItem(b);)b=b.$nextSibling;else this.activateItem(this.ulist.$firstChild)},execute:function(){this.activeItem&&(this.activeItem.deactivate(),this.trigger("execute",{item:this.activeItem}),this.activeItem=null)},cancel:function(){this.trigger("cancel");this.activeItem&&(this.activeItem.deactivate(),this.activeItem=null)},__ulist_mouseover:function(b,c){var a=c.target;a instanceof d.AbstractListItem&&"item"==a.getOption("type")&&this.activateItem(c.target)},__ulist_mousedown:function(b,
c){c.preventDefault()},__ulist_mouseup:function(){this.execute()},__onBlur:function(){this.cancel()},__onKeyUp:function(b,c){var a=c.keyCode||c.charCode;if(!c.ctrlKey&&!c.altKey){switch(a){case e.ESCAPE:this.cancel();c.preventDefault();break;case e.SPACE:case e.ENTER:this.execute(),c.preventDefault()}c.routing="none";return!1}},__onKeyDown:function(b,c){var a=c.keyCode||c.charCode;c.preventDefault();if(!c.ctrlKey&&!c.altKey){switch(a){case e.UP_ARROW:this.prevItem();c.preventDefault();break;case e.DOWN_ARROW:this.nextItem(),
c.preventDefault()}c.routing="none";return!1}},__focus:function(){this.focused=!0},__blur:function(){this.focused=!1}}})})(fruit,fruit.ui,fruit.util.keys);
(function(f){f.defineInterface("fruit.ui.IPanel",["load"]);f.define("fruit.ui.AjaxContainer",{extend:"fruit.ui.Component",view:{tag:"div"},implement:"fruit.ui.IPanel",options:{url:{defaultValue:"",acceptTypes:["String"]},useJscript:{defaultValue:!1,acceptTypes:["Boolean"]},dataType:{defaultValue:"html",acceptTypes:["String"]}},methods:{load:function(){var d=this.getOption("url"),e=f.util.bind,b=this.getOption("dataType");b||(b="html");f.io.ajax({url:d,type:"GET",dataType:b,error:e(this.__errorLoad,
this),success:e(this.__successLoad,this)})},__errorLoad:function(d,e){f.util.logger.warn("Load data error, reason : "+e)},__successLoad:function(d){this.getOption("useJscript")?eval(d):this.setHtml(d)}}});f.define("fruit.ui.IframeContainer",{extend:"fruit.ui.Component",view:{tag:"iframe"},options:{url:{defaultValue:"",acceptTypes:["String"]}},implement:"fruit.ui.IPanel",methods:{load:function(){this.setAttribute("src",this.getOption("url"))}}})})(fruit,fruit.ui);
(function(f,d,e,b,c){e.register({popupStack:{}});var a=e.popupStack;f.define("fruit.ui.Popup",{extend:"fruit.ui.Component",view:{dynamic:!0,container:!0,attr:{"class":"f-popup",style:{display:"none"}}},methods:{init:function(){this.isPopup=!0;this.zIndex=5E3;this.hide()},__fixed:function(a){var b=f.event.Engine,c=this;b.addEvent(window,"resize",function(){c.setPosition(a)});b.addEvent(window,"scroll",function(){c.setPosition(a)})},open:function(a){if(!this.opened){this._$appendToBody();this._$resolveZIndex();
this._$addToStack();var a=a||{},a={fixed:a.fixed,direction:a.direction||"below",offsetX:a.offsetX||0,offsetY:a.offsetY||0,target:a.target||this.$parent,width:a.width||null,height:a.height||null,align:a.align||null,container:a.container||null},b=a.target.getStyle&&"fixed"===a.target.getStyle("position");a.fixed&&(b?this.setStyle({position:"fixed"}):this.__fixed(a));this.setPosition(a);this.opened=!0;this.trigger("open")}},setPosition:function(a){this.setStyle(this.getStyleObj(this,a))},getStyleObj:function(a,
b){var c=a.element.getSize(),d;d=b.target===f.Application?{top:0,left:0}:b.target.element.getRect();var e={display:"block","z-index":a.zIndex,top:d.top+b.offsetY,left:d.left+b.offsetX};null!==b.width&&(e.width=b.width);null!==b.height&&(e.height=b.height);if(null===b.container){switch(b.direction){case "above":e.top-=c.height-2;break;case "left":e.left-=c.width+2;break;case "right":e.left+=d.width+2;break;default:e.top+=d.height+2}"width"===b.align&&(e.width=Math.max(d.width,b.width))}else"center"!==
b.direction?(e.left=b.offsetX,e.top=b.offsetY):(e.left="50%",e.top="50%",e.marginLeft=c.width/2,e.marginTop=c.height/2);return e},close:function(){this.hide();this.trigger("close")},hide:function(){!1!==this.opened&&(this._$removeFromStack(),this.setStyle({display:"none"}),this.opened=!1)},_$appendToBody:function(){this._appendedToBody||(c.getBody().appendChild(this.element),this._appendedToBody=!0)},_$addToStack:function(){a[this.$id]=this},_$removeFromStack:function(){a[this.$id]&&delete a[this.$id]},
_$getStack:function(){return a},_$resolveZIndex:function(){var c=0,d=null;b.each(a,function(a){a.zIndex>c&&(d=a,c=a.zIndex)});this.zIndex=d&&d!=this?d.zIndex+1:1E3},_$resolveParentPopup:function(){if(!this.parentPopup)for(var a=this.$parent;a;){if(a instanceof d.Popup){this.parentPopup=a;break}a=a.$parent}}}})})(fruit,fruit.ui,fruit.Application,fruit.util,fruit.dom);
(function(f,d,e,b){f.define("fruit.ui.Tooltip",{extend:"fruit.ui.Popup",view:{tag:"span",attr:{"class":"f-tooltip",role:"tooltip",style:{"z-index":5E3}},content:[{name:"pIcon",tag:"i"},{name:"content",tag:"span",attr:{"class":"f-tooltip-text"}}]},options:{direction:{defaultValue:"top",acceptTypes:["String"]},tooltip:{defaultValue:null,acceptTypes:["String","Null"]},icon:{defaultValue:null,acceptTypes:["String","Null"]}},triggers:{option:{direction:{action:"switchClass",params:["#value#",{top:"f-tooltip-top",
tl:"f-tooltip-top-left",tr:"f-tooltip-top-right",right:"f-tooltip-right",rt:"f-tooltip-right-top",rb:"f-tooltip-right-bottom",bottom:"f-tooltip-bottom",bl:"f-tooltip-bottom-left",br:"f-tooltip-bottom-right",left:"f-tooltip-left",lt:"f-tooltip-left-top",lb:"f-tooltip-left-bottom"}]},tooltip:{target:"content",action:"setHtml",params:["#value#"]},icon:{target:"pIcon",action:"addClass",params:["#value#"]}}}});d.register({getGlobalTooltip:function(){this.globalTooltip||(this.globalTooltip=b.createComponent("Tooltip"),
d.load(this.globalTooltip));return this.globalTooltip}})})(fruit,fruit.Application,fruit.dom.position,fruit.ui,fruit.util,fruit.dom,fruit.util.keys);
(function(f,d,e){f.define("fruit.form.Form",{events:"verifyPass,verifyError,fieldVerifyError,fieldVerifyPass,loadSuccess,loadError,submitSuccess,submitError".split(","),requires:["fruit.form.Field"],mixins:"fruit.Observable",config:{name:null,id:null,validate:!0,reader:null,checkAll:!0,messageType:"inline",writer:null},reader:null,writer:null,init:function(b){f.util.extend(this,b,this.config);this.initFields();this.bindEvent();this.reader&&this.setReader(this.reader);this.writer&&this.setWriter(this.writer);
this.validate&&this.setValidate(!0===this.validate?{}:this.validate)},bindEvent:function(){this.el.bind("submit",f.func.bind(this.submit,this))},submit:function(b){e.logger.debug("submit data");this.isValid()&&this._submit(b);return!1},_submit:function(){this.writer||this.setWriter({url:this.el.attr("action")});this.writer.submit(this.toJson())},toJson:function(){var b={};f.util.each(this.children,function(c){b[c.name]=c.getValue()});return b},setEl:function(b){this.el||(this.el=jQuery(b));this.el.size()||
(this.el=null)},setWriter:function(b){null!=b&&(this.writer=new f.data.Writer(b))},setReader:function(b){null!=b&&(this.reader=new f.data.Reader(b),this.reader.on("readSuccess",this.loadSuccess,this).on("readError",this.loadError,this))},setValidate:function(b){!1!==b&&(this.validate=new f.form.Validation({options:b,form:this}))},initFields:function(){var b=this.id?"#"+this.id:this.name;b||e.logger.error("Need parameter id or name");this.el=jQuery(b);this.el.size()||e.logger.error("Can't find the form by {0} ",
this.id?"ID "+this.id:" Name "+this.name);this.children={};for(var b=this.el.get(0).elements,c=0;c<b.length;c++)el=b[c],el.name&&!this.children[el.name]&&(this.children[el.name]=new f.form.Field({el:"radio"==el.type?null:el,name:el.name,id:el.id}))},each:function(b){return f.util.each(this.children,b)},getField:function(b){return this.children[b]},loadError:function(){this.trigger("loadError")},loadSuccess:function(){var b=this.reader.getAt(0);f.util.each(this.children,function(c,a){if(b){var d=b.get(a);
d&&c.setValue(d)}});this.trigger("loadSuccess")},load:function(b){this.reader&&this.reader.read(b)},isValid:function(b){function c(b){var c=a.verify(b);if(!0!==c){if(b.el.addClass("error"),b=b.el.eq(0).parent(),b.find(".error-msg").remove(),b.append("<span class='error-msg'>"+c+"</span>"),k=!1,d=d.concat(c),!e.checkAll)return!1}else b.el.removeClass("error"),b.el.parent().find(".error-msg").remove()}var a=this.validate,d=[],e=this,k=!0,j;if(!a)return!0;b&&(j=this.getField(b))?c(j,b):(f.util.each(this.children,
c),k?e.trigger("verifyPass",[],this):e.trigger("verifyError",[d],this));return k}})})(fruit,fruit.ui,fruit.util);
(function(f){var d={},e={},b=f.util.format,c=f.define("fruit.form.Validation",{statics:{addRule:function(a,b,c){var j=!1;f.util.isString(b)?b=f.getObject(b):f.util.isObject(b)&&!b.test&&(j=!0);(!b||j)&&log.error("Validation.addRule need a function or RegEx");d[a]=b;c=c||{};f.util.isString(c)&&(c={text:c});e[a]=c}},config:{options:null,form:null},init:function(a){f.util.extend(this,a,this.config)},parseRule:function(a){var b=this.options&&this.options[a.name]||{},c=(b?b.rule:null)||{},d,l,o=f.util.camelize;
a.validate&&(b=a.validate.split(","),f.util.each(b,function(b){d=b.split(/\[|,|\]/);name=d[0];var f="text"+o(a.type);l=c[f]||e[name]&&e[name][f]||c.text||e[name]&&e[name].text;1<a.el.size()&&(f+="Multiple",l=c[f]||e[f]||l);c[b]=l}));return c},verify:function(a,c){var k=this,j=this.parseRule(a),l,o,n,m,q=[],p;f.util.each(j,function(j,r){n=r.split(/\[|,|\]/);p=n[0];m=d[p];o=n[1];if(!m)return log.error("Can't find the verify rule {0}",p),!1;l=e[p];if(f.util.isFunction(m)){var u=m.call(c||k,a,o,j,l);
!0!==u&&(!1===u?0<j.indexOf("{0}")&&(j=b(j,o)):j=u,q.push(j))}else!0!==m.test(a.getValue())&&q.push(j)});return q.length?q:!0},getField:function(a){return new f.form.Field({name:a})}});c.addRule("equals",function(a,b){var c=this.getField(b);return a.getValue()!=c.getValue()?!1:!0},"Fields do not match with {0}");c.addRule("required",function(a){return!a.getValue()?!1:!0},"This field is required");c.addRule("call",function(a,b){var c=a.getValue();if(f.util.isFunction(b))return b(c);log.error("[{0}] is not a function.")});
c.addRule("maxSize",function(a,b){return a.getValue().length>b?!1:!0},"Maximal {0} characters allowed");c.addRule("minSize",function(a,b){return a.getValue().length<b?!1:!0},"Minimum {0} characters allowed");f.util.each(["max","min"],function(a){c.addRule(a,function(c,d,e){d=parseFloat(d);c=parseFloat(c.getValue());return"min"==a&&c<d||"max"==a&&c>d?b(e,d):!0},{max:"Maximal {0} number allowed",min:"Minimum {0} number allowed"}[a])});var a=f.util.Date;f.util.each(["past","future"],function(d){c.addRule(d,
function(c,e,j){var l;":"==e.substr(0,1)?(l=this.getField(e.substr(1)).getValue(),j=b(j,l)):"now"==e&&(l=new Date,j=b(j,a.format(l,"yyyy-mm-dd")));f.util.isString(l)&&(l=a.parse(l));c=a.parse(c.getValue());return"past"==d&&c>=l||"future"==d&&c<=l?j:!0},{past:"Date prior to {0}",future:"Date past {0}"}[d])})})(fruit);
fruit.define("fruit.form.Field",function(){var f=/reset|button|submit/,d=/checkbox|radio/;return{statics:{operator:{input:function(){var e=this.type;f.test(e)?this.setValue=this.getValue=function(){return null}:d.test(e)&&(this.setValue=function(b){this.el.each(function(c,a){a.checked=jQuery(a).val()==b?!0:!1})},this.getValue=function(){var b;this.el.each(function(c,a){!0==a.checked&&(b=jQuery(a).val())});return b})},select:function(){this.setValue=function(d){for(var b=this.el.get(0).options,c,a=
0;a<b.length;a++)c=b[a],c.selected=c.value==d?!0:!1};this.getValue=function(){var d=this.el.get(0),b=d.selectedIndex;if(0>b)return null;for(var c=[],a=d.options,f=(d="select-one"==d.type)?b+1:a.length,b=d?b:0;b<f;b++){var h=a[b];if(h.selected&&h.attributes.value&&h.attributes.value.value){var k=h.value;k||(k=!h.attributes.value.specified?h.text:h.value);if(d)return k;c.push(k)}}return 0==c.length?null:d?c[0]:c}}}},type:null,config:{name:"",el:"",id:"",validate:null},init:function(d){var b;fruit.util.extend(this,
d,this.config);this.el?this.setEl(this.el):(this.id?b="#"+this.id:this.name&&(b="*[name='"+this.name+"']"),this.setEl(b))},setEl:function(d){if(d&&(fruit.util.isString(d)?(this.el=jQuery(d),d=this.el.get(0)):this.el=jQuery(d),d)){var b=d.tagName.toLowerCase();this.type=d.type.toLowerCase();this.applyOperator(b);this.validate=this.el.data("validate")}},setValidate:function(){},data:function(d,b){return this.el.data(d,b)},applyOperator:function(d){var b=this.getStatics();b.operator[d]&&b.operator[d].call(this)},
setValue:function(d){return this.el.val(d)},getValue:function(){return this.el.val()}}});
(function(f,d,e,b,c){f.define("fruit.ui.Button",{extend:"fruit.ui.Component",view:{tag:"button",attr:{"class":"f-btn",type:"button",role:"button"},content:[{name:"icon",tag:"i"},{name:"text",tag:"span",attr:{"class":"f-btn-text"}},{name:"arrow",tag:"i"}]},options:{icon:{defaultValue:null,acceptTypes:["String","Null"]},text:{defaultValue:null,acceptTypes:["String","Null"]},hasArrow:{defaultValue:!1,acceptTypes:["Boolean"]},hasEllipsis:{defaultValue:!1,acceptTypes:["Boolean"]},size:{defaultValue:"normal",
acceptTypes:["String"]},theme:{defaultValue:"default",acceptTypes:["String"]},maxWidth:{defaultValue:null,acceptTypes:["String","Number","Null"]},tooltip:{defaultValue:null,acceptTypes:["String","Null"]}},triggers:{option:{icon:{target:"icon",action:"setClass"},text:{target:"text",action:"setText"},hasArrow:[{target:"arrow",action:"toggleClass",params:["icon-arrow-down-large-dark","#value#"]},{action:"toggleClass",params:["f-btn-arrow","#value#"]},{action:"__toggleArrow",params:["hasArrow","#value#"]}],
hasEllipsis:{action:"toggleClass",params:["f-btn-ellipsis","#value#"]},size:{action:"switchClass",params:["#value#",{normal:"",small:"f-btn-small"}]},theme:{action:"switchClass",params:["#value#",{"default":"",CTA:"f-btn-CTA",primary:"f-btn-primary"}]},maxWidth:[{action:"__setMaxWidth",params:["max-width","#value#"]}]},event:{click:{action:"__click"},keyup:{action:"__keyup"},keydown:{action:"__keydown"},ready:{action:"__ready"}}},methods:{init:function(){this.focusable=!0;d.TooltipBehavior&&this.attachBehavior({behavior:"Tooltip",
params:{prop:"tooltip"}})},setIcon:function(a){this.setOption("icon",a)},__click:function(a,b){b.target=this;0===b.button&&this.focus()},__keyup:function(a,b){if(!b.hasSystemKey&&(b.keyCode===c.ENTER||b.keyCode===c.SPACE))b.preventDefault(),this.trigger("click",b)},__keydown:function(a,b){b.hasSystemKey||(b.keyCode===c.ENTER||b.keyCode===c.SPACE)&&b.preventDefault()},__toggleArrow:function(){if(this.getOption("hasArrow")){var a=this.text.maxWidth;a&&(this.text.setStyle("max-width",a-23),e.isIE7&&
this.text.setStyle("width",a-23))}else if(a=this.text.maxWidth)this.text.setStyle("max-width",a+23),e.isIE7&&this.text.setStyle("width",a+23)},__setMaxWidth:function(){var a,b,c=this.getOption("maxWidth");b=this.getOption("hasArrow");if(null!=c&&("small"==this.getOption("size")?(c=Math.max(60,c),a=c-22):(c=Math.max(80,c),a=c-30),b=b?a-23:a,this.setStyle("max-width",a),this.text.setStyle("max-width",b),this.text.maxWidth=b,e.isIE7))this.setStyle("max-width",c),this.text.setStyle("width",b),this.text.setStyle("zoom",
1)},__ready:function(){}}})})(fruit,fruit.ui,fruit.util,fruit.dom,fruit.util.keys);
(function(f,d,e,b){f.define("fruit.ui.CheckBox",{extend:"fruit.ui.Component",view:{tag:"label",attr:{"class":"f-checkbox",role:"checkbox"},content:[{name:"checkPic",tag:"i",attr:{"class":"f-checkbox-img",tabindex:"0"}},{name:"check",tag:"input",attr:{type:"checkbox"}},{name:"text",tag:"span",attr:{"class":"f-label",role:"label"}}]},options:{text:{defaultValue:null,acceptTypes:["String","Null"]},checked:{defaultValue:!1,acceptTypes:["Boolean"]},name:{defaultValue:null,acceptTypes:["String","Null"]},
value:{defaultValue:null,acceptTypes:["String","Null"]}},triggers:{option:{text:{target:"text",action:"setText"},checked:[{target:"check",action:"setAttribute",params:["checked","#value#"]},{action:"setAttribute",params:["aria-checked","#value#"]}],name:{target:"check",action:"setAttribute",params:["name","#value#"]},value:{target:"check",action:"setAttribute",params:["value","#value#"]}},event:{focus:{action:"__focus"},blur:{action:"__blur"},mouseup:[{action:"__click"},{source:"check",action:"__check_click"}],
keydown:{action:"__keydown"},keyup:{action:"__keyup"},change:{action:"__change"}}},methods:{init:function(){f.util.isIE&&this.text.setAttribute("unselectable","on")},getValue:function(){return this.getOption("checked")},setValue:function(b){this.setOption("checked",b)},__check_click:function(){},__click:function(b,a){a.preventDefault();this.setOption("checked",!this.getOption("checked"));f.util.isIE8&&this.setStyle({zoom:1});a.target=this},__keydown:function(c,a){(a.keyCode===b.ENTER||a.keyCode===
b.SPACE)&&a.preventDefault()},__keyup:function(c,a){if(!a.hasSystemKey&&(a.keyCode===b.ENTER||a.keyCode===b.SPACE))a.preventDefault(),this.setOption("checked",!this.getOption("checked")),f.util.isIE8&&this.setStyle({zoom:1})},__focus:function(){this.addClass("f-checkbox-focus")},__blur:function(){this.removeClass("f-checkbox-focus")},__change:function(b,a){a.target=this}}})})(fruit,fruit.ui,fruit.event,fruit.util.keys);
(function(f,d,e,b,c){f.define("fruit.ui.ComboBox",{extend:"fruit.ui.Component",view:{tag:"span",attr:{"class":"f-combobox",role:"combobox","aria-haspopup":!0,"aria-expanded":!1},content:[{name:"text",tag:"input",attr:{type:"text"}},{name:"btn",tag:"span",attr:{"class":"f-combobox-btn"}},{name:"popup",type:"Popup",attr:{role:"menu","aria-labelledby":"combobox"},content:{name:"list",type:"List"}}]},options:{text:{defaultValue:null,acceptTypes:["String","Null"]},placeHolder:{defaultValue:null,acceptTypes:["String",
"Null"]},items:{defaultValue:null,acceptTypes:["Array","Null","Object"]},editable:{defaultValue:!0,acceptTypes:["Boolean"]}},triggers:{option:{text:{target:"text",action:"setAttribute",params:["value","#value#"]},placeHolder:{target:"text",action:"setAttribute",params:["placeholder","#value#"]},items:{target:"list",action:"setOption",params:["items","#value#"]},editable:[{target:"text",action:"setAttribute",params:["readonly","#!value#"]},{target:"text",action:"setAttribute",params:["aria-readonly",
"#!value#"]}]},event:{keydown:{source:"text",action:"__text_keydown"},focus:{source:"text",action:"__text_focus"},blur:{source:"text",action:"__text_blur"},input:{source:"text",action:"__text_input"},mousedown:[{source:"text",action:"__text_mousedown"},{source:"btn",action:"__btn_mousedown"},{source:"list",action:"__list_mousedown"}],click:{source:"btn",action:"__btn_click"},execute:{source:"list",action:"__list_execute"},cancel:{source:"list",action:"__list_cancel"}}},entity:{init:function(){this.focusable=
!0;var a=this.popup,b="fruit-"+a.$id;a.setAttribute("id",b);this.setAttribute("aria-owns",b)},open:function(){this.popup.opened||(this.popup.open({direction:this.getOption("direction"),offsetY:-1,align:"width"}),this.setAttribute("aria-expanded",!0))},close:function(){this.popup.opened&&(this.popup.close(),this.setAttribute("aria-expanded",!1))},getValue:function(){return this.getOption("text")},setValue:function(a){this.setOption("text",a)},__text_mousedown:function(){this.text.focus()},__text_focus:function(){this.addClass("f-combobox-focus")},
__text_blur:function(){this.removeClass("f-combobox-focus");this.close()},__text_input:function(){var a=this.text.getAttribute("value");this.setOption("text",a);this.__refreshItems(a,!0)},__btn_mousedown:function(a,b){b.preventDefault()},__btn_click:function(){this.text.focus();this.addClass("f-combobox-focus");this.popup.opened?this.close():(this.__refreshItems(),this.open())},__list_mousedown:function(){this.list.execute()},__text_keydown:function(a,b){var d=b.keyCode;if(!b.hasSystemKey){switch(d){case c.UP_ARROW:this.popup.opened&&
this.list.prevItem();b.preventDefault();break;case c.DOWN_ARROW:this.popup.opened?this.list.nextItem():(this.__refreshItems(),this.open());b.preventDefault();break;case c.ENTER:this.list.execute();b.preventDefault();break;case c.ESCAPE:this.close(),this.text.focus(),b.preventDefault()}b.routing="none"}},__refreshItems:function(a,b){var c=this.getOption("items"),d,e=[],f=0;if(c&&0<c.length)if(a)for(var o=a.length,a=a.toLowerCase();f<c.length;f++)d=c[f],d=d.text,0==d.toLowerCase().indexOf(a)&&e.push({text:"<b>"+
d.substr(0,o)+"</b>"+d.substr(o)});else for(;f<c.length;f++)d=c[f],d=d.text,e.push({text:d});this.list.setOption("items",e);0<e.length&&b?(this.popup.open({direction:this.getOption("direction"),offsetY:-1,align:"width"}),this.setAttribute("aria-expanded",!0)):this.close()},__list_execute:function(a,b){this.setOption("text",b.item.getText());this.close()},__list_cancel:function(){this.close()}}})})(fruit,fruit.ui,fruit.util,fruit.dom,fruit.util.keys);
(function(f,d,e,b){f.define("fruit.ui.ComboButton",{extend:"fruit.ui.Component",view:{tag:"span",attr:{"class":"f-combobutton",role:"combobutton",tabindex:0,"aria-expanded":!1,"aria-haspopup":!0},content:[{tag:"span",name:"btnPrimary",attr:{"class":"f-combobutton-text"}},{tag:"span",name:"btnDropdown",attr:{"class":"f-combobutton-arrow"}},{name:"popup",type:"Popup",dynamic:!0,content:{name:"list",type:"List"},attr:{"aria-labelledby":"combobutton",role:"menu"}}]},options:{direction:{defaultValue:"below",
acceptTypes:["String"]},text:{defaultValue:null,acceptTypes:["String","Null"]},items:{defaultValue:null,acceptTypes:["Array","Null","Object"]},theme:{defaultValue:"default",acceptTypes:["String"]}},triggers:{option:{text:{target:"btnPrimary",action:"setText"},items:{target:"list",action:"setOption",params:["items","#value#"]},theme:{action:"switchClass",params:["#value#",{"default":"",CTA:"f-combobutton-CTA",primary:"f-combobutton-primary"}]}},event:{click:[{source:"list",action:"__list_click"},{source:"btnPrimary",
action:"__btnPrimary_click"},{source:"btnDropdown",action:"__btnDropdown_click"}],execute:{source:"list",action:"__list_execute"},cancel:{source:"list",action:"__list_cancel"},keyup:{action:"__keyup"},keydown:{action:"__keydown"},blur:{action:"__blur"}}},methods:{init:function(){this.isOpen=!1},open:function(){var b=this.getOption("direction");this.popup.open({direction:b,offsetY:"above"==b?-4:0,align:"width"});this.setAttribute("aria-expanded",!0);this.list.focus();this.addClass("f-combobutton-focus")},
setModel:function(){this.superMethod(arguments)},close:function(){this.popup.close();this.setAttribute("aria-expanded",!1);this.focus()},__blur:function(){this.removeClass("f-combobutton-focus")},__btnPrimary_click:function(){this.addClass("f-combobutton-focus")},__list_click:function(b,a){a.routing="none"},__keyup:function(c,a){if(!a.hasSystemKey){switch(a.keyCode){case b.ENTER:a.preventDefault();this.trigger("execute",a);break;case b.SPACE:case b.DOWN_ARROW:a.preventDefault();this.isOpen||(this.open(),
this.isOpen=!0);break;case b.ESCAPE:a.preventDefault(),this.isOpen&&(this.close(),this.isOpen=!1)}a.routing="none"}},__keydown:function(c,a){if(!a.hasSystemKey){switch(a.keyCode){case b.UP_ARROW:this.popup.opened&&this.list.prevItem();a.preventDefault();break;case b.DOWN_ARROW:this.popup.opened&&this.list.nextItem();a.preventDefault();break;case b.ENTER:this.__btnPrimary_click(c,a);a.preventDefault();break;case b.ESCAPE:this.isOpen&&(this.close(),this.isOpen=!1),a.preventDefault()}a.routing="none"}},
__btnDropdown_click:function(b,a){this.isOpen||(this.open(),this.isOpen=!0);a.routing="none"},__list_execute:function(){this.isOpen&&(this.close(),this.isOpen=!1);this.focus()},__list_cancel:function(){this.isOpen&&(this.close(),this.isOpen=!1)}}})})(fruit,fruit.ui,fruit.util,fruit.util.keys);
(function(f,d,e){f.define("fruit.ui.DropdownButton",{extend:"fruit.ui.Component",view:{attr:{"class":"f-dropdown-btn","aria-expanded":!1,"aria-haspopup":!0},content:[{name:"button",type:"Button",options:{hasArrow:!0}},{name:"popup",type:"Popup",attr:{role:"menu","aria-labelledby":"dropdownbutton"},dynamic:!0,content:{name:"list",type:"List"}}]},options:{text:{defaultValue:null,acceptTypes:["String","Null"]},items:{defaultValue:null,acceptTypes:["Array","Null","Object"]},direction:{defaultValue:"below",
acceptTypes:["String","Null"]},appearance:{defaultValue:"normal",acceptTypes:["String"],readonly:!0}},triggers:{option:{text:{target:"button",action:"setOption",params:["text","#value#"]},items:{target:"list",action:"setOption",params:["items","#value#"]},appearance:[{action:"switchClass",params:["#value#",{normal:"",mini:"f-dropdown-btn-mini",text:"f-dropdown-btn-text",arrow:"f-dropdown-btn-arrow"}]},{target:"popup",action:"switchAttribute",params:["aria-labelledby","#value#",{normal:"dropdownbutton",
mini:"menu",text:"menu",arrow:"menu"}]}]},event:{click:{source:"button",action:"__button_click"},keyup:{source:"button",action:"__button_keyup"},keydown:{source:"button",action:"__button_keydown"},focus:{source:"button",action:"__button_focus"},blur:{source:"button",action:"__button_blur"},execute:{source:"list",action:"__list_execute"},cancel:{source:"list",action:"__list_cancel"}}},methods:{init:function(){this.focusable=!0},open:function(){var b,c,a,d;switch(this.getOption("appearance")){case "mini":b=
0;c=-1;a=-4;break;case "text":a=c=b=0;break;case "arrow":c=b=0;a=-1;break;default:b=0,c=1,a=-5}d=this.getOption("direction");this.popup.open({direction:d,offsetX:b,offsetY:"above"==d?a:c,width:90,align:"width"});this.setAttribute("aria-expanded",!0);this.list.focus();this.button.addClass("f-dropdown-btn-focus");this.button.addClass("f-btn-focus")},close:function(){this.popup.close();this.setAttribute("aria-expanded",!1);this.button.removeClass("f-dropdown-btn-focus");this.button.removeClass("f-btn-focus")},
__button_click:function(){this.open()},__button_focus:function(){this.button.addClass("f-dropdown-btn-focus");this.button.addClass("f-btn-focus")},__button_blur:function(){this.button.removeClass("f-dropdown-btn-focus");this.button.removeClass("f-btn-focus")},__button_keydown:function(b,c){c.keyCode!==e.TAB&&c.preventDefault()},__button_keyup:function(b,c){if(!c.hasSystemKey){switch(c.keyCode){case e.UP_ARROW:this.popup.opened&&this.list.prevItem();c.preventDefault();break;case e.DOWN_ARROW:this.popup.opened?
this.list.nextItem():this.open();c.preventDefault();break;case e.SPACE:case e.ENTER:this.popup.opened&&this.list.execute();c.preventDefault();break;case e.ESCAPE:this.close(),c.preventDefault()}c.routing="none"}},__list_cancel:function(){this.close()},__list_execute:function(){this.close();this.button.focus()}}})})(fruit,fruit.ui,fruit.util.keys);
(function(f,d,e,b){f.define("fruit.ui.NumberSpinner",{extend:"fruit.ui.Component",view:{tag:"span",name:"wrapper",attr:{"class":"f-numberspinner",role:"spinbutton"},content:[{tag:"input",name:"text",attr:{type:"text","class":"placeHolder"}},{tag:"a",name:"upArrowBtn",attr:{"class":"f-numberspinner-upBtn"}},{tag:"a",name:"downArrowBtn",attr:{"class":"f-numberspinner-downBtn"}}]},options:{value:{defaultValue:null,acceptTypes:["Number","Null"]},minValue:{defaultValue:0,acceptTypes:["Number"]},maxValue:{defaultValue:99,
acceptTypes:["Number"]},step:{defaultValue:1,acceptTypes:["Number","Null"]},readonly:{defaultValue:!1,acceptTypes:["Boolean"]}},triggers:{option:{value:{target:"text",action:"setAttribute",params:["value","#value#"]},readonly:[{target:"text",action:"setAttribute",params:["readOnly","#value#"]},{action:"setAttribute",params:["aria-readonly","#value#"]}]},event:{focus:{action:"__focus"},blur:{action:"__blur"},input:{source:"text",action:"__text_input"},change:{source:"text",action:"__text_change"},
keydown:{source:"text",action:"__text_keydown"},mousewheel:{source:"text",action:"__text_mousewheel"},mouseup:[{source:"upArrowBtn",action:"__upClick"},{source:"downArrowBtn",action:"__downClick"}]}},methods:{init:function(){var b=this.getOption("value");this.setAttribute("aria-valuemax",this.getOption("maxValue"));this.setAttribute("aria-valuemin",this.getOption("minValue"));this.__trySetValue(b)},increase:function(){var b=this.getOption("value"),a=this.getOption("step"),d=this.getOption("minValue"),
e=this.getOption("maxValue"),b=null==b?d:Math.min(b+a-(b-d)%a,e);this.setOption("value",b);this.setAttribute("aria-valuenow",b);this.trigger("Change")},decrease:function(){var b=this.getOption("value"),a=this.getOption("step"),d=this.getOption("minValue"),e=this.getOption("maxValue"),b=null==b?e:Math.max(b-((b-d)%a||a),d);this.setOption("value",b);this.setAttribute("aria-valuenow",b);this.trigger("Change")},getValue:function(){return this.getOption("value")},setValue:function(b){this.__trySetValue(b)},
__focus:function(){this.focused=!0;this.addClass("f-numberspinner-focus")},__blur:function(){this.focused=!1;this.removeClass("f-numberspinner-focus");this.trigger("Blur")},__text_input:function(){},__text_change:function(){this.__trySetValue(this.text.getAttribute("value"))},__text_mousewheel:function(b,a){this.focused&&(0<a.originalEvent.wheelDelta?this.increase():this.decrease(),a.preventDefault())},__text_keydown:function(c,a){var d=a.keyChar,e=a.keyCode;e==b.BACKSPACE||e==b.TAB||189==e||(e==
b.UP_ARROW?this.increase():e==b.DOWN_ARROW?this.decrease():(a.hasSystemKey||"0">d||"9"<d)&&a.preventDefault())},__upClick:function(){this.increase()},__downClick:function(){this.decrease()},__trySetValue:function(b){var a=this.getOption("value"),d=this.getOption("minValue"),e=this.getOption("maxValue"),f=parseInt(b);null===b||""===b?f=null:f>e?f=e:f<d?f=d:f<=e&&f>=d||(f=a);this.setOption("value",f);this.text.setAttribute("value",f);this.setAttribute("aria-valuenow",f)}}})})(fruit,fruit.ui,fruit.util,
fruit.util.keys);
(function(f){f.define("fruit.ui.Radio",{extend:"fruit.ui.Component",view:{tag:"label",attr:{role:"radio","class":"f-radio"},content:[{tag:"i",attr:{"class":"f-radio-img"}},{name:"input",tag:"input",attr:{type:"radio"}},{name:"label",tag:"span",attr:{"class":"f-label"}}]},options:{text:{defaultValue:null,acceptTypes:["String","Null"]},value:{defaultValue:null,acceptTypes:["String","Null"]},name:{defaultValue:null,acceptTypes:["String","Null"]},checked:{defaultValue:!1,acceptTypes:["Boolean"]}},triggers:{option:{text:{target:"label",
action:"setText",params:["#value#"]},value:{target:"input",action:"setAttribute",params:["value","#value#"]},name:{target:"input",action:"setAttribute",params:["name","#value#"]},checked:[{target:"input",action:"setAttribute",params:["checked","#value#"]},{action:"setAttribute",params:["aria-checked","#value#"]}]},event:{click:[{action:"__click"},{source:"input",action:"__inputClick"}],mousedown:{action:"__mousedown"}}},methods:{getValue:function(){return this.getOption("checked")},setValue:function(d){this.setOption("checked",
d)},activate:function(){this.addClass("f-radio-focus")},deactivate:function(){this.removeClass("f-radio-focus")},__inputClick:function(d,e){e.preventDefault();e.routing="none"},__click:function(d,e){e.target=this},__mousedown:function(d,e){e.target=this}}})})(fruit,fruit.ui,fruit.util,fruit.dom,fruit.util.keys);
(function(f,d,e,b,c){f.define("fruit.ui.RadioGroup",{extend:"fruit.ui.Component",view:{attr:{role:"radiogroup",tabindex:"0","class":"f-radio-group"},template:{type:"Radio",options:{text:"{text}",value:"{value}",checked:"{checked}",name:"{name}",disabled:"{disabled}"}}},options:{items:{defaultValue:null,acceptTypes:["Array","Null"]}},triggers:{option:{items:{action:"setModel",params:["#value#"]}},event:{keyup:{action:"__onKeyUp"},keydown:{action:"__onKeyDown"},focus:{action:"__focus"},blur:{action:"__blur"},
click:{action:"__click"},mousedown:{action:"__mousedown"}}},methods:{init:function(){this.__resetItems()},setModel:function(){this.superMethod(arguments);this.__resetItems()},activateItem:function(a){e.isNumber(a)&&(a=this.childAt(a));a!=this._activeItem&&a&&(a.activate(),this._activeItem&&this._activeItem.deactivate(),this._activeItem=a,f.util.isIE8&&this.setStyle({zoom:1}))},selectItem:function(a){e.isNumber(a)?a=this.childAt(a):e.isString(a)&&(a=this.childAt(Number(a)));a!=this._selectedItem&&
(this._selectedItem&&this._selectedItem.setOption("checked",!1),(this._selectedItem=a)&&a.setOption("checked",!0),f.util.isIE8&&this.setStyle({zoom:1}),this.trigger("change",{item:a}))},prevItem:function(){var a=this._activeItem?this._activeItem.$previousSibling:this.$lastChild;if(a)for(;a;){if(!a.getOption("disabled")){this.activateItem(a);break}a=a.$previousSibling}},nextItem:function(){var a=this._activeItem?this._activeItem.$nextSibling:this.$firstChild;if(a)for(;a;){if(!a.getOption("disabled")){this.activateItem(a);
break}a=a.$nextSibling}},__resetItems:function(){var a=this;this._activeItem=null;this.children(function(b){var c=b.getModel();if(c&&c.checked)return a._selectedItem=b,!1})},__click:function(a,b){var c=b.target;c instanceof f.ui.Radio&&this.selectItem(c)},__mousedown:function(a,b){var c=b.target;c instanceof f.ui.Radio&&this.activateItem(c)},__onKeyUp:function(a,b){if(!this.getOption("disabled")){var d=b.keyCode;if(!b.hasSystemKey)switch(d){case c.SPACE:case c.ENTER:this._activeItem&&this.selectItem(this._activeItem),
b.preventDefault()}}},__onKeyDown:function(a,b){if(!this.getOption("disabled")){var d=b.keyCode;if(!b.hasSystemKey)switch(d){case c.UP_ARROW:case c.LEFT_ARROW:this.prevItem();b.preventDefault();break;case c.DOWN_ARROW:case c.RIGHT_ARROW:this.nextItem();b.preventDefault();break;case c.SPACE:case c.ENTER:this._activeItem&&this.selectItem(this._activeItem),b.preventDefault()}}},__focus:function(a,b){b.target==a&&!this._activeItem&&(this._selectedItem?this.activateItem(this._selectedItem):this.nextItem())},
__blur:function(a,b){b.target==a&&this._activeItem&&(this._activeItem.deactivate(),this._activeItem=null)}}})})(fruit,fruit.ui,fruit.util,fruit.dom,fruit.util.keys);
(function(f){f.define("fruit.ui.TextBox",{extend:"fruit.ui.Component",view:{tag:"span",attr:{"class":"f-textbox",role:"textbox"},content:[{name:"text",tag:"input",attr:{type:"text"}},{name:"icon",tag:"a"}]},options:{placeHolder:{defaultValue:null,acceptTypes:["String","Null"]},text:{defaultValue:null,acceptTypes:["String","Number","Null"]},readonly:{defaultValue:!1,acceptTypes:["Boolean"]},icon:{defaultValue:null,acceptTypes:["String","Null"]},maxLength:{defaultValue:null,acceptTypes:["Number","Null"]},
type:{defaultValue:"text",acceptTypes:["String"]}},triggers:{option:{text:{target:"text",action:"setAttribute",params:["value","#value#"]},readonly:[{target:"text",action:"setAttribute",params:["readonly","#value#"]},{action:"setAttribute",params:["aria-readonly","#value#"]}],icon:{target:"icon",action:"switchClass",params:["#value#",{"null":"",DEFAULT:"f-textbox-icon"}]},maxLength:{target:"text",action:"setAttribute",params:["maxlength","#value#"]},type:{target:"text",action:"setAttribute",params:["type",
"#value#"]}},event:{focus:{action:"__focus"},blur:{action:"__blur"},input:{action:"__input"},change:{action:"__change"}}},methods:{init:function(){this.focusable=!0;this.attachBehavior({behavior:"Placeholder",params:{text:this.getOption("placeHolder"),inputTarget:this.text}})},showIcon:function(d){d?this.icon.setStyle({display:"inline-block"}):this.icon.setStyle({display:"none"})},disableIcon:function(d){this.icon.setOption("disabled",d)},focus:function(){this.text.focus()},getValue:function(){return this.getOption("text")},
setValue:function(d){this.setOption("text",d)},__supportPlaceHolder:function(){return"placeholder"in document.createElement("input")},__showPlaceHolder:function(){if(!this.__supportPlaceHolder()){var d=this.text,e=this.getText(),b=d.getAttribute("placeHolder")||"",c=d.element.defaultValue;d.addClass("placeHolder");(e===c||e===b)&&this.setText(b)}},__getPlaceHolder:function(){return this.text.getAttribute("placeHolder")},__focus:function(){this.text.getAttribute("readOnly")||this.addClass("f-textbox-focus");
this.trigger("Focus")},__blur:function(){this.removeClass("f-textbox-focus");this.trigger("Blur")},__input:function(){this.setOption("text",this.text.getAttribute("value"));this.trigger("Input")},__change:function(){this.setOption("text",this.text.getAttribute("value"));this.trigger("Change")},__iconClick:function(){this.getOption("disabled")||this.trigger("iconClick")}}})})(fruit,fruit.ui,fruit.util,fruit.dom,fruit.util.keys);
(function(f){f.define("fruit.ui.Textarea",{extend:"fruit.ui.Component",view:{tag:"span",attr:{"class":"f-textarea",role:"textarea"},content:{name:"textarea",tag:"textarea",attr:{"class":"f-textarea-body",role:"textarea"}}},options:{placeHolder:{defaultValue:null,acceptTypes:["String"]},minHeight:{defaultValue:50,acceptTypes:["Number","Null"]},maxHeight:{defaultValue:null,acceptTypes:["Number","Null"]},text:{defaultValue:null,acceptTypes:["String"]},readonly:{defaultValue:null,acceptTypes:["Boolean",
"Null"]}},triggers:{option:{minHeight:{action:"setStyle"},maxHeight:{action:"setStyle"},text:{action:"setText",target:"textarea"},readonly:{action:"setAttribute",params:["readonly","#value#"]}},event:{input:{action:"adjust"},ready:{action:"adjust"}}},methods:{init:function(){this.attachBehavior({behavior:"Placeholder",params:{text:this.getOption("placeHolder"),inputTarget:this.textarea}})},adjust:function(){var d=this.getOption("minHeight"),e=this.getOption("maxHeight"),b=0,b="IE"==f.util.browserName,
c=this.textarea;b||c.element.setStyle({height:d});var a=c.element.element.scrollHeight,g=this.__getPaddings(c);a>d?(e&&a>e?(b=e-g,c.element.setStyle({overflowY:"auto"})):(b=a-g,c.element.setStyle({overflowY:"hidden"})),c.element.setStyle({height:b})):b&&c.element.setStyle({height:d})},__getPaddings:function(d){return parseFloat(d.element.getStyle("paddingTop"))+parseFloat(d.element.getStyle("paddingBottom"))}}})})(fruit,fruit.ui);
(function(f,d,e,b,c){f.define("fruit.ui.SearchBox",{extend:"fruit.ui.Component",view:{attr:{"class":"f-searchbox"},content:{name:"text",tag:"input",attr:{type:"text"}}},options:{placeholder:{defaultValue:null,acceptTypes:["String","Null"]},text:{defaultValue:"",acceptTypes:["String","Null"]}},triggers:{option:{placeholder:{target:"text",action:"setAttribute",params:["placeholder","#value#"]},text:{target:"text",action:"setAttribute",params:["value","#value#"]}},event:{focus:{action:"__click"},blur:{action:"__blur"},
click:{action:"__click"},keyup:{action:"__keyup"},keydown:{action:"__keydown"}}},methods:{init:function(){this.focusable=!0;this.__manuallyOpen=!1},__click:function(){this.addClass("f-searchbox-focus");this.text.focus()},__blur:function(){this.__manuallyOpen||(this.removeClass("f-searchbox-focus"),this.text.blur(),this.text.setAttribute("value",this.getOption("text")))},__keyup:function(a,b){if(!b.hasSystemKey){switch(b.keyCode){case c.ENTER:b.preventDefault(),this.trigger("command",this.text.getAttribute("value"))}b.routing=
"none"}},__keydown:function(){},open:function(){this.__click();this.__manuallyOpen=!0},close:function(){this.__manuallyOpen=!1;this.__blur()}}})})(fruit,fruit.ui,fruit.util,fruit.dom,fruit.util.keys);
(function(f,d,e){f.define("fruit.ui.AccordionHead",{extend:"fruit.ui.Component",view:{tag:"a",attr:{"class":"f-accordion-header"},content:[{tag:"i",attr:{"class":"icon-accordion"}},{tag:"span",content:"{title}"}]},triggers:{event:{click:{action:"__click"},keydown:{action:"__KeyDown"}}},methods:{__click:function(){this.trigger("accordionHeadClick",{source:this.$parent})},active:function(){this.addClass("f-accordion-header-selected");this.setAttribute("tabIndex",0)},deactive:function(){this.removeClass("f-accordion-header-selected");
this.removeAttribute("tabIndex")},focusMe:function(){this.focus()},__KeyDown:function(b,c,a){this.trigger("keydownInHead",{source:this,sender:b,event:c,type:a})}}});f.define("fruit.ui.AccordionPanel",{extend:"fruit.ui.Component",view:{tag:"div",content:"{content}"},methods:{active:function(){this.removeClass("hidden");this.addClass("f-accordion-content");var b=this.$firstChild;b&&b.interfaceOf("fruit.ui.IPanel")&&b.load()},deactive:function(){this.removeClass("f-accordion-content");this.addClass("hidden")}}});
f.define("fruit.ui.Accordion",{extend:"fruit.ui.Component",view:{tag:"div",attr:{"class":"f-accordion",role:"presentation"},content:[{tag:"ul",name:"AccordionCollection",attr:{"class":"f-accordion-wrap"},template:{tag:"li",attr:{"class":"f-accordion-item"},content:[{type:"AccordionHead"},{type:"AccordionPanel",options:{hidden:!0}}]}}]},triggers:{option:{items:{action:"setModel"}},event:{ready:{action:"__ready"},accordionHeadClick:{action:"__AccordionHeadClick"},keydownInHead:{action:"__naviKeyDown"}}},
options:{items:{defaultValue:null,acceptTypes:["Array","Null"]},defaultActive:{defaultValue:0,acceptTypes:["Number"]}},methods:{setModel:function(b,c){this.superMethod([new f.ui.data.ViewModelCollection(b)],c)},addPanel:function(b,c){if(b){var a=this.getModel().length;if(!c||c>a)c=a;this.model.insertItem(b,c);c<=this.activePanelIndex&&this.activePanelIndex++}},removePanel:function(b){var c=this.getModel().length;b<c&&0<=b&&(this.model.removeItemAt(b),c=this.activePanelIndex,b<=this.activePanelIndex&&
(0==b&&0==this.activePanelIndex?(c=0,this.activePanelIndex=1):c=this.activePanelIndex-1),this.active(c))},__ready:function(){this.activePanelIndex=this.getOption("defaultActive");if(this.activePanelIndex>=this.getModel().length||0>this.activePanelIndex)e.logger.error("Option defaultActive set error."),this.activePanelIndex=0;this.__activeAccordion(this.activePanelIndex,!0)},__AccordionHeadClick:function(b,c){var a=c.source.getIndex();a!=this.activePanelIndex&&this.active(a)},active:function(b){b!=
this.activePanelIndex&&(this.__deactiveAccordion(this.activePanelIndex),this.activePanelIndex=b,this.__activeAccordion(b))},prev:function(){0<this.activePanelIndex&&this.active(this.activePanelIndex-1)},next:function(){this.activePanelIndex<this.getModel().length-1&&this.active(this.activePanelIndex+1)},__activeAccordion:function(b,c){var a=this.AccordionCollection.childAt(b);if(a){var d=a.$firstChild;d&&(d.active(),c||d.focusMe());(a=a.$lastChild)&&a.active()}},__deactiveAccordion:function(b){if(b=
this.AccordionCollection.childAt(b)){var c=b.$firstChild;c&&c.deactive();(b=b.$lastChild)&&b.deactive()}},__naviKeyDown:function(b,c){var a=c.event;if(!a.ctrlKey&&!a.altKey)switch(a.keyCode){case e.keys.LEFT_ARROW:case e.keys.UP_ARROW:this.prev();break;case e.keys.RIGHT_ARROW:case e.keys.DOWN_ARROW:this.next()}}}})})(fruit,fruit.ui,fruit.util,fruit.dom);
(function(f,d,e,b,c){f.define("fruit.ui.data.CalendarItemViewModel",{extend:"fruit.ui.data.ViewModel",properties:{itemClass:{get:function(){var a=[],b=this.model,c=b.dataObj;c.getMonth()<b.currentMonth||c.getFullYear()<b.currentYear?a.push("f-calendar-item-prev"):c.getMonth()>b.currentMonth||c.getFullYear()>b.currentYear?a.push("f-calendar-item-next"):a.push("f-calendar-item-current");e.formatDate(c,"yyyy-mm-dd")==b.today&&a.push("f-calendar-item-today");return a.join(" ")}},day:{get:function(){return this.getValue("dataObj").getDate()}}}});
f.define("fruit.ui.CalendarItem",{extend:"fruit.ui.Component",view:{tag:"li",content:"{day}",attr:{"class":"{itemClass}"}},options:{selected:{defaultValue:!1,acceptTypes:["Boolean"]}},triggers:{event:{click:{action:"__itemClick"}},option:{selected:{action:"toggleClass",params:["f-calendar-item-selected","#value#"]}}},methods:{__itemClick:function(){var a=this.getModel().formatDate;this.trigger("itemClick",{date:e.formatDate(this.dateObj,a),dateObj:this.dateObj,item:this})}}});f.define("fruit.ui.Calendar",
{extend:"fruit.ui.Component",view:{attr:{"class":"f-calendar",tabIndex:"-1"},content:[{attr:{"class":"f-calendar-header"},content:[{name:"rightBtn",tag:"span",attr:{"class":"f-calendar-header-rightBtn"}},{name:"leftBtn",tag:"span",attr:{"class":"f-calendar-header-leftBtn"}},{name:"todayBtn",tag:"button",attr:{"class":"f-btn f-btn-small"},content:"Today"},{tag:"span",attr:{"class":"f-calendar-header-text"},content:"{currentDateLabelText}"}]},{attr:{"class":"f-calendar-content"},content:[{model:"{dayNames}",
tag:"ul",attr:{"class":"f-calendar-content-header"},template:{tag:"li",content:"{@self}"}},{name:"contentBody",tag:"ul",attr:{"class":"f-calendar-content-body"},template:{type:"CalendarItem",options:""}}]}]},options:{selectedDay:{defaultValue:null,acceptTypes:["String","Null"]},formatDate:{defaultValue:"yyyy-mm-dd",acceptTypes:["String","Null"]}},triggers:{event:{ready:{action:"__updateDate"},keydown:{action:"__keyup"},click:[{source:"rightBtn",action:"__increaseMonth"},{source:"leftBtn",action:"__decreaseMonth"},
{source:"todayBtn",action:"__returnToToday"}],itemClick:{source:"contentBody",action:"__itemClick"}}},methods:{init:function(){this.__dateObj=e.newDate(this.getOption("selectedDay"));this.__selectedDayTime=this.getOption("selectedDay")?this.__dateObj.getTime():0},_$generateDateModel:function(){var a=this.__dateObj;this.__currentMonth=a.getMonth();this.__currentYear=a.getFullYear();this.__today=e.formatDate(new Date,"yyyy-mm-dd");this.__viewModelCollection=new f.ui.data.ViewModelCollection(this._$generateDateGrid(),
"fruit.ui.data.CalendarItemViewModel");this.__currentModel={dayNames:e.getDayNames("ddd"),currentDateLabelText:this.__getCurrentDateLabelText()}},_$generateDateGrid:function(){for(var a=[],b=e.newDate(this.__currentYear+"-"+(this.__currentMonth+1)+"-1"),c=b.getDay(),b=b.getTime()-864E5*c,c=0;42>c;c++){var d=b+864E5*c;d==this.__selectedDayTime&&(this.__selectedItemIndex=c);a.push({dataObj:new Date(d),dateTime:d,currentMonth:this.__currentMonth,currentYear:this.__currentYear,today:this.__today,formatDate:this.getOption("formatDate")})}return a},
__getCurrentDateLabelText:function(){return e.formatDate(this.__dateObj,"mmmm yyyy")},__increaseMonth:function(){this.__dateObj.setMonth(++this.__currentMonth);this.__updateDate()},__decreaseMonth:function(){this.__dateObj.setMonth(--this.__currentMonth);this.__updateDate()},__returnToToday:function(){this.__dateObj=new Date;this.__updateDate()},__keyup:function(a,b){var d=b.keyCode||b.charCode;if(this.__selectedItemIndex&&!b.ctrlKey&&!b.altKey){switch(d){case c.UP_ARROW:this.__selectedItemIndex-=
7;break;case c.DOWN_ARROW:this.__selectedItemIndex+=7;break;case c.LEFT_ARROW:this.__selectedItemIndex--;break;case c.RIGHT_ARROW:this.__selectedItemIndex++}if(42<=this.__selectedItemIndex)return this.__increaseMonth(),!1;if(0>=this.__selectedItemIndex)return this.__decreaseMonth(),!1;this.__setSelectedItem(this.__selectedItemIndex);b.routing="none";return!1}},__itemClick:function(a,b){this.__setSelectedItem(b.item.getIndex())},__setSelectedItem:function(a){this.__selectedItem&&this.__selectedItem.setOption("selected",
!1);this.__selectedItem=this.contentBody.childAt(a);this.__selectedDayTime=this.__selectedItem.getModel().dateTime;this.__selectedItem.setOption("selected",!0)},__updateDate:function(){delete this.__selectedItemIndex;this._$generateDateModel();this.setModel(this.__currentModel);this.contentBody.setModel(this.__viewModelCollection);this.__selectedItemIndex&&this.__setSelectedItem(this.__selectedItemIndex)},getSelctedDay:function(){return e.formatDate(this.__selectedItem.dateObj,this.getOption("formatDate"))}}})})(fruit,
fruit.ui,fruit.util,fruit.dom,fruit.util.keys);
(function(f){f.define("fruit.ui.data.DataGridViewModel",{extend:"fruit.ui.data.ViewModel",entity:{init:function(d,e){this.columns=e},getModel:function(d){var e=this.superMethod(arguments),d=e.path,b=d.split("."),c;if(b&&0<b.length){c=b[0];if("columns"==c)return b.shift(),{model:this.columns,path:b.join(".")};if("rows"==c)return b.shift(),{model:this.model,path:b.join(".")};if("pages"==c)return b.shift(),{model:this.pages,path:b.join(".")}}return e}}});f.define("fruit.ui.DataGridPageLink",{extend:"fruit.ui.Component",
view:{tag:"li"},options:{selected:{defaultValue:!1},text:{defaultValue:null}},triggers:{option:{selected:{action:"toggleClass",params:["f-pagination-item-selected","#value#"]},text:{action:"setText"}},event:{click:{action:"__click"}}},events:{subscribe:{"this":{click:"__click"}}},methods:{__click:function(){this.trigger("pageLinkClick",{item:this})}}});f.define("fruit.ui.DataGridRow",{extend:"fruit.ui.Component",view:{tag:"tr",attr:{"class":"f-datagrid-row"},content:[{tag:"td",content:"{name}"},{tag:"td",
content:"{type}"}]}});f.define("fruit.ui.DataGrid",{extend:"fruit.ui.Component",view:{attr:{"class":"f-datagrid"},content:[{attr:{"class":"f-datagrid-toolbar"}},{model:"{columns}",attr:{"class":"f-datagrid-header"},content:{tag:"table",content:[{tag:"colgroup",template:{tag:"col",attr:{width:"{width}"}}},{tag:"thead",content:{tag:"tr",template:{tag:"th",content:"{text}"}}}]}},{name:"body",attr:{"class":"f-datagrid-body"},content:{attr:{"class":"f-datagrid-body-wrap"},content:{tag:"table",content:[{model:"{columns}",
tag:"colgroup",template:{tag:"col",attr:{width:"{width}"}}},{name:"tbody",tag:"tbody",model:"{rows}"}]}}},{attr:{"class":"f-datagrid-footer"},content:{content:{attr:{"class":"f-pagination"},content:{tag:"ul",name:"pageLink",model:"{pages}",template:{type:"DataGridPageLink",options:{text:"{number}",selected:"{selected}"}}}}}}]},options:{height:{defaultValue:360},editable:{defaultValue:!1},columns:{defaultValue:null},pageCapacity:{defaultValue:10},currentPage:{defaultValue:0}},triggers:{option:{height:{target:"body",
action:"setStyle",params:["height","#value#"]}},event:{pageLinkClick:{source:"pageLink",action:"__pageLinkClick"},click:{source:"tbody",action:"__tbody_click"}}},methods:{init:function(){var d=this.getOption("columns"),e,b=0,c,a,f,h=this.getOption("editable");if(d){a={tag:"tr"};f=a.content=[];for(c=d.length;b<c;b++)e=d[b],e.field?f.push({tag:"td",content:"{"+e.field+"}"}):e.template&&f.push({tag:"td",content:e.template});h&&f.push({tag:"td",content:[{type:"Button",options:{text:"Edit"}},{type:"Button",
options:{text:"Remove"}}]});this.tbody.template=a}},setModel:function(d){d instanceof f.ui.DataGridViewModel||(d=new f.ui.DataGridViewModel(d,this.getOption("columns")));d.paginate(this.getOption("pageCapacity"));d.selectPage(this.getOption("currentPage"));this.superMethod(arguments)},paginate:function(d){this.setOption("pageCapacity",d);this.updateModel()},selectPage:function(d){this.setOption("currentPage",d);this.updateModel()},updateModel:function(){this.model&&this.setModel(this.model)},__pageLinkClick:function(d,
e){this.selectPage(e.item.getModel().index)},__tbody_click:function(d,e){var b=e.target,c;b instanceof f.ui.Button&&(c=b.getText(),"Edit"==c?(c=b.$parent.$parent,c.children(function(a){var b=a.getModel("content"),c;switch(f.util.getType(b)){case "String":c=f.ui.createComponent({type:"TextBox",options:{text:"{"+a.__propMap.content+"}"}});break;case "Boolean":c=f.ui.createComponent({type:"CheckBox",options:{checked:"{"+a.__propMap.content+"}"}});break;case "Number":c=f.ui.createComponent({type:"NumberSpinner",
options:{value:"{"+a.__propMap.content+"}"}})}c&&(a.empty(),a.appendChild(c),c.model=a.model,c.__modelPath=a.__modelPath,c._$onModelChanged(c,{action:"init"}))}),b.setText("Save")):"Save"==c?(c=b.$parent.$parent,c.children(function(a){a._$onModelChanged(a,{action:"init"})}),b.setText("Edit")):"Remove"==c&&(this.model.removeItem("",b.getModel()),this.updateModel()))}}})})(fruit,fruit.ui);
(function(f,d,e,b,c,a,g,h,k){f.define("fruit.ui.Dialog",{extend:"fruit.ui.Popup",view:{dynamic:!0,attr:{"class":"f-dialog",style:{display:"none"},role:"dialog"},content:[{name:"header",attr:{"class":"f-dialog-header"},content:[{tag:"i",name:"headerIcon"},{tag:"span",name:"headerText",attr:{"class":"f-dialog-header-title"}},{attr:{"class":"f-toolbar"},content:[{name:"btnClose",tag:"button",attr:{type:"button","class":"f-toolbar-item f-icon-btn"},content:{tag:"i",attr:{"class":"icon-close-x18"}},options:{title:"Close"}}]}]},
{name:"body",attr:{"class":"f-dialog-content"}},{name:"footer",attr:{"class":"f-dialog-footer"},content:{attr:{"class":"f-toolbar f-toolbar-right"},content:[{type:"Button",name:"btnCancel",options:{text:"Cancel"}},{type:"Button",name:"btnOk",options:{text:"Ok",theme:"primary"}}]}}]},regions:{"default":{target:"body"},header:{target:"header"},footer:{target:"footer"},headerText:{target:"headerText"}},options:{header:{defaultValue:null,acceptTypes:["String","Object","Array","Null"]},body:{defaultValue:null,
acceptTypes:["String","Object","Array","Null"]},footer:{defaultValue:null,acceptTypes:["String","Object","Array","Null"]},fixed:{defaultValue:!0,acceptTypes:["Boolean"],readonly:!0},modal:{defaultValue:!0,acceptTypes:["Boolean"],readonly:!1},width:{defaultValue:null,acceptTypes:["Number","Null"]},position:{defaultValue:"center",acceptTypes:["String","Object"]},draggable:{defaultValue:!0,acceptTypes:["Boolean"],readonly:!0},resizable:{defaultValue:!0,acceptTypes:["Boolean"],readonly:!0},closeable:{defaultValue:!0,
acceptTypes:["Boolean"],readonly:!0},focusIndex:{defaultValue:1,acceptTypes:["Number","Null"]}},triggers:{option:{header:{target:"headerText",action:"setContent"},body:{target:"body",action:"setContent"},footer:{target:"footer",action:"setContent"},width:{action:"setStyle",params:["width","#value#"]}},event:{click:[{source:"btnOk",action:"execute"},{source:"btnCancel",action:"cancel"},{source:"header",action:"__onDragStart"}],mousedown:{source:"btnClose",action:"close"},keydown:[{source:"btnClose",
action:"closeKeyDown"},{action:"myKeydown"}],keyup:{source:"btnClose",action:"closeKeyup"},onDragStart:{action:"__onDragStart"}}},methods:{init:function(){this._focusables=[];this.btnClose.focusable=!0;this.__resolveFocusables(this);this._focusables.push(this._focusables.shift());d.TooltipBehavior&&this.btnClose.attachBehavior({behavior:"Tooltip"});this.getOption("draggable")&&d.DraggableBehavior&&this.attachBehavior({behavior:"Draggable",params:{handle:this.header}});this.getOption("resizable")&&
d.ResizableBehavior&&this.attachBehavior({behavior:"Resizable",params:{direction:"se",target:this.body,min:{width:100,height:50},max:{width:600,height:400}}});if("center"==this.getOption("position")){var a=this;h.addEvent(window,"resize",function(){a.setPosition("center")})}this.__clearTitleAlt();this.__closeable()},__closeable:function(){!1==this.getOption("closeable")&&this.btnClose.setStyle("display","none")},myKeydown:function(a,b){!b.ctrlKey&&!b.altKey&&(b.keyCode||b.charCode)===c.ESCAPE&&this.getOption("closeable")&&
this.close()},__clearTitleAlt:function(){if(this.getOption("title")||this.getOption("alt"))this.removeAttribute("title"),this.removeAttribute("alt")},__onDragStart:function(){var a=this.getOption("focusIndex");this._focusables[a]&&this._focusables[a].focus()},closeKeyDown:function(a,b){if(!b.ctrlKey&&!b.altKey&&(b.keyCode===e.keys.ENTER||b.keyCode===e.keys.SPACE))b.preventDefault&&b.preventDefault(),b.returnValue=!1},closeKeyup:function(a,b){!b.ctrlKey&&!b.altKey&&(b.keyCode===e.keys.ENTER||b.keyCode===
e.keys.SPACE)&&this.close()},loadContent:function(b,c){this.body.empty();var d=this;b&&(c?(this.body.setContent({tag:"iframe",attr:{src:b,frameBorder:0}}),d.trigger("onContentReady")):a.get(b,null,function(a){d.body.setContent(a);d.trigger("onContentReady")},"html"))},setPosition:function(a){var c=this.element.getSize(this.element),d=b.getDocRect(),c={x:0.5*(d.width-c.width),y:0.5*(d.height-c.height)};"object"===typeof a?c={x:x=0<=a.x?a.x:0,y:0<=a.y?a.y:0}:this.getOption("fixed")||(c={x:c.x+d.scrollX,
y:c.y+d.scrollY});this.setStyle({left:c.x,top:c.y});this.setOption("position",a)},open:function(){this.opened||(this._$appendToBody(),this._$resolveZIndex(),this.zIndex++,this._$addToStack(),this.setStyle({display:"block",position:this.getOption("fixed")?"fixed":"absolute","z-index":this.zIndex}),this.setPosition(this.getOption("position")),this.getOption("modal")&&k.showOverlay(this),this.__restoreFocus(),this.opened=!0,this.trigger("open"))},close:function(){if(!1!==this.opened){this.setStyle({display:"none"});
this._$removeFromStack();this.getOption("modal")&&k.off("keyup",this.__onKeyUp,this);var a=this.__findTopModal();a&&a.getOption("modal")?(k.showOverlay(a),a.__restoreFocus()):k.hideOverlay();k.getGlobalTooltip().hide();this.opened=!1;this.trigger("close")}},execute:function(){this.trigger("execute");this.close()},cancel:function(){this.trigger("cancel");this.close()},destroy:function(){this.close();this.superMethod(arguments)},__restoreFocus:function(){this.__setFocus(this.getOption("focusIndex"))},
__setFocus:function(a){this._focusables&&this._focusables.length>a&&this._focusables[a].focus();this.setOption("focusIndex",a)},__prevFocus:function(){var a=this.getOption("focusIndex"),a=0==a?this._focusables.length-1:a-1;this.__setFocus(a)},__nextFocus:function(){var a=this.getOption("focusIndex"),a=a==this._focusables.length-1?0:a+1;this.__setFocus(a)},__getBody:function(){return this.body.getAttribute("html")},__resolveFocusables:function(a){e.each(a.children(),function(a){a.isPopup||(a.focusable?
this._focusables.push(a):this.__resolveFocusables(a))},this)},__findTopModal:function(){var a=null,b=this._$getStack(),c=0;e.each(b,function(b){b instanceof d.Dialog&&b.getOption("modal")&&b.zIndex>c&&(c=b.zIndex,a=b)});return a}}});var j=d.createComponent({attr:{"class":"f-scrim"}});k.register({showOverlay:function(a){var c=this._overlay;this._target=a;c||(c=this._overlay=j,c.element.appendTo(b.getBody()),k.on("keydown",function(a,b){if(this._target){var c=e.keys;if(!b.hasSystemKey)switch(b.keyCode){case c.ESCAPE:this._target.getOption("closeable")&&
this._target.cancel();break;case c.TAB:b.preventDefault(),b.shiftKey?this._target.__prevFocus():this._target.__nextFocus()}}},this));c.setStyle({display:"block","z-index":a.zIndex-1||1E3})},hideOverlay:function(){var a=this._overlay;this._target=null;a&&a.setStyle({display:"none"})}})})(fruit,fruit.ui,fruit.util,fruit.dom,fruit.util.keys,fruit.io.ajax,fruit.util.i18n,fruit.event.Engine,fruit.Application);
(function(f){f.ui.Alert=function(d,e){var b;b=new f.ui.Dialog({body:d,modal:!0,resizable:!1,fixed:!0,header:"Alert"});b.setAttribute("role","alert");b.btnCancel.hide();e&&(e.text&&b.btnOk.setOption("text",e.text),e["class"]&&b.btnOk.setAttribute("class",e["class"]),e.style&&b.btnOk.setAttribute("style",e.style));b.renderTo();b.open();return b}})(fruit);
(function(f){f.ui.Confirm=function(d,e,b,c){d=new f.ui.Dialog({header:"Confirm",body:d,resizable:!1,model:!0,fixed:!0,listeners:{execute:e,cancel:b}});d.setAttribute("role","alertdialog");if(c&&(c.execute&&(c.execute.text&&d.btnOk.setOption("text",c.execute.text),c.execute["class"]&&d.btnOk.setAttribute("class",c.execute["class"]),c.execute.style&&d.btnOk.setAttribute("style",c.execute.style)),c.cancel))c.cancel.text&&d.btnCancel.setOption("text",c.cancel.text),c.cancel["class"]&&d.btnCancel.setAttribute("class",
c.cancel["class"]),c.cancel.style&&d.btnCancel.setAttribute("style",c.cancel.style);d.renderTo();d.open();return d}})(fruit);
(function(f){f.define("fruit.ui.Loading",{extend:"fruit.ui.Component",view:{tag:"span",name:"size",attr:{"class":"f-loading hidden",type:"loading",role:"loading"},content:[{name:"icon",tag:"i",attr:{"class":"f-loading-img"}},{name:"text",tag:"span",attr:{"class":"f-loading-text"}}]},options:{text:{defaultValue:null,acceptTypes:["String","Null"]},hasIcon:{defaultValue:!0,acceptTypes:["Boolean"],readOnly:!0},interval:{defaultValue:40,acceptTypes:["Number"],readOnly:!0},size:{defaultValue:"normal",acceptTypes:["String"],
readOnly:!0}},triggers:{option:{text:{target:"text",action:"setText"},hasIcon:[{target:"icon",action:"toggleClass",params:["f-loading-img","#value#"]},{action:"toggleClass",params:["","#value#"]}],size:{action:"switchClass",params:["#value#",{normal:"f-loading-big",small:""}]},event:{}}},methods:{init:function(){this.setTime=null;this.iconStart=this.iconNumber=12;this.iconStep=32;this.i=0;"small"===this.getOption("size")&&(this.i=this.iconNumber,this.iconStart=2*this.iconNumber);this.setStyle({display:"none"})},
destroy:function(){this.hide();this.superMethod(arguments)},show:function(){var d=f.util.bind(this.__rotation,this);this.setTime=new f.effect.Animator({duration:0,interval:this.getOption("interval")});this.setTime.start(d);this.setStyle({display:"block"})},hide:function(){this.setTime.stop();this.setStyle({display:"none"})},__rotation:function(){this.i++;this.i===this.iconStart&&(this.i="small"===this.getOption("size")?this.iconNumber:0);this.icon.setStyle("background-position","0 -"+this.i*this.iconStep+
"px")}}})})(fruit,fruit.ui,fruit.util,fruit.dom,fruit.util.keys);
(function(f,d,e){f.define("fruit.ui.TabHead",{extend:"fruit.ui.Component",view:{tag:"li",attr:{"class":"f-tab-item",role:"tab"},content:[{tag:"a",name:"tabTitle",content:"{title}"}]},triggers:{event:{click:{action:"__click"},keydown:{action:"__keyDown"}}},methods:{__click:function(){this.trigger("tabHeadClick",{source:this})},active:function(){this.addClass("f-tab-item-selected");this.tabTitle.setAttribute("tabIndex",0)},deactive:function(){this.removeClass("f-tab-item-selected");this.tabTitle.removeAttribute("tabIndex")},
focusMe:function(){this.tabTitle.focus()},__keyDown:function(b,c,a){this.trigger("keydownInHead",{source:this,sender:b,event:c,type:a})}}});f.define("fruit.ui.TabPanel",{extend:"fruit.ui.Component",view:{tag:"div",attr:{role:"tabpanel"},content:"{content}"},methods:{active:function(){this.removeClass("hidden");this.addClass("f-tab-content-body");var b=this.$firstChild;b&&b.interfaceOf("fruit.ui.IPanel")&&b.load()},deactive:function(){this.removeClass("f-tab-content-body");this.addClass("hidden")}}});
f.define("fruit.ui.Tab",{extend:"fruit.ui.Component",view:{tag:"div",attr:{"class":"f-tab"},content:[{tag:"ul",name:"tabHeads",attr:{"class":"f-tab-wrap",role:"tablist"},template:{type:"TabHead"}},{tag:"div",name:"tabPanels",attr:{"class":"f-tab-content"},template:{type:"TabPanel",options:{hidden:!0}}}]},triggers:{option:{items:{action:"setModel"}},event:{ready:{action:"__ready"},tabHeadClick:{source:"tabHeads",action:"__tabHeadClick"},keydownInHead:{action:"__naviKeyDown"}}},options:{items:{defaultValue:null,
acceptTypes:["Array","Null"]},defaultActive:{defaultValue:0,acceptTypes:["Number"]}},methods:{setModel:function(b,c){this.superMethod([new f.ui.data.ViewModelCollection(b)],c)},addPanel:function(b,c){if(b){var a=this.getModel().length;if(!c||c>a)c=a;this.model.insertItem(b,c);c<=this.activePanelIndex&&this.activePanelIndex++}},removePanel:function(b){var c=this.getModel().length;b<c&&0<=b&&(this.model.removeItemAt(b),c=this.activePanelIndex,b<=this.activePanelIndex&&(0==b&&0==this.activePanelIndex?
(c=0,this.activePanelIndex=1):c=this.activePanelIndex-1),this.active(c))},__ready:function(){this.activePanelIndex=this.getOption("defaultActive");if(this.activePanelIndex>=this.getModel().length||0>this.activePanelIndex)e.logger.error("Option defaultActive set error."),this.activePanelIndex=0;this.__activeTabHead(this.activePanelIndex,!0);this.__activeTabPanel(this.activePanelIndex)},__tabHeadClick:function(b,c){if(c.source.$parent==this.tabHeads){var a=c.source.getIndex();a!=this.activePanelIndex&&
this.active(a)}},active:function(b){b!=this.activePanelIndex&&(this.__deactiveTabHead(this.activePanelIndex),this.__deactiveTabPanel(this.activePanelIndex),this.activePanelIndex=b,this.__activeTabHead(b),this.__activeTabPanel(b))},prev:function(){0<this.activePanelIndex&&this.active(this.activePanelIndex-1)},next:function(){this.activePanelIndex<this.getModel().length-1&&this.active(this.activePanelIndex+1)},first:function(){0!=this.activePanelIndex&&this.active(0)},last:function(){var b=this.getModel().length-
1;this.activePanelIndex!=b&&this.active(b)},__activeTabHead:function(b,c){var a=this.tabHeads.childAt(b);a&&(a.active(),c||a.focusMe())},__activeTabPanel:function(b){(b=this.tabPanels.childAt(b))&&b.active()},__deactiveTabHead:function(b){(b=this.tabHeads.childAt(b))&&b.deactive()},__deactiveTabPanel:function(b){(b=this.tabPanels.childAt(b))&&b.deactive()},__naviKeyDown:function(b,c){if(c.source.$parent==this.tabHeads){var a=c.event;if(!a.ctrlKey&&!a.altKey)switch(a.keyCode){case e.keys.LEFT_ARROW:this.prev();
break;case e.keys.RIGHT_ARROW:this.next();break;case e.keys.HOME:this.first();break;case e.keys.END:this.last()}}}}})})(fruit,fruit.ui,fruit.util,fruit.dom);
(function(f){f.define("fruit.ui.TooltipDialog",{extend:"fruit.ui.Popup",view:{attr:{"class":"f-tooltip f-tooltip-dialog",style:{left:20,top:30}},content:[{name:"content",tag:"span",attr:{"class":"f-tooltip-text"},content:{name:"list",type:"List"}}]},options:{items:{defaultValue:null,acceptTypes:["Object","Array","Null"]},direction:{defaultValue:"top",acceptTypes:["String"]},position:{defaultValue:null,acceptTypes:["Object","Null"]},content:{defaultValue:null,acceptTypes:["String","Object","Null"]}},
triggers:{option:{items:{target:"list",action:"setOption",params:["items","#value#"]},direction:{action:"switchClass",params:["#value#",{top:"f-tooltip-top",tl:"f-tooltip-top-left",tr:"f-tooltip-top-right",right:"f-tooltip-right",rt:"f-tooltip-right-top",rb:"f-tooltip-right-bottom",bottom:"f-tooltip-bottom",bl:"f-tooltip-bottom-left",br:"f-tooltip-bottom-right",left:"f-tooltip-left",lt:"f-tooltip-left-top",lb:"f-tooltip-left-bottom"}]},position:{action:"setPosition",params:"#value#"},content:{target:"content",
action:"setContent",params:"#value#"}}},methods:{show:function(){this.setStyle({display:"block"})},hide:function(){this.setStyle({display:"none"})},setPosition:function(d){d=d||{x:0,y:0};this.setStyle({left:d.x,top:d.y})}}})})(fruit,fruit.Application,fruit.dom.position,fruit.ui,fruit.util,fruit.dom,fruit.util.keys);
(function(f,d,e,b,c){f.define("fruit.ui.TreeNode",{extend:"fruit.ui.Component",view:{tag:"li",attr:{"class":"f-tree-item f-tree-item-open"},content:[{name:"container",attr:{"class":"f-tree-item-container"},tag:"a",content:[{name:"arrow",tag:"span",attr:{"class":"f-tree-item-arrow"}},{name:"icon",tag:"span",attr:{"class":"f-tree-item-file"}},{name:"text",tag:"span",attr:{"class":"f-tree-item-text"},content:"{title}"}]},{tag:"ul",attr:{"class":"f-tree-wrap"},model:"{node}",template:{type:"fruit.ui.TreeNode"}}]},
triggers:{event:{click:[{source:"container",action:"__selfClick"},{source:"arrow",action:"__arrowClick"}]}},methods:{itemClick:function(){this.container.hasClass("f-tree-item-container-folder")&&this.arrowClick();this.trigger("itemClick",{value:this.getModel().value,item:this})},arrowClick:function(){this.hasClass("f-tree-item-open")?this.removeClass("f-tree-item-open"):this.addClass("f-tree-item-open")},__selfClick:function(a,b){this.itemClick();b.routing="none"},__arrowClick:function(a,b){this.arrowClick();
b.routing="none"},syncModel:function(){this.superMethod(arguments);var a=this.getModel();a.node&&0!=a.node.length?(this.container.addClass("f-tree-item-container-folder"),this.setAttribute("role","group")):this.setAttribute("role","treeitem");a.iconClass&&this.icon.setClass(a.iconClass)}}});f.define("fruit.ui.Tree",{extend:"fruit.ui.Component",view:{attr:{"class":"f-tree",tabIndex:"0",role:"tree"},content:[{tag:"ul",attr:{"class":"f-tree-wrap"},name:"treeRoot",model:"{@self}",template:{type:"fruit.ui.TreeNode"}}]},
triggers:{option:{items:{action:"setModel"}},event:{itemClick:{action:"__itemClick"},focus:{action:"__focus"},keydown:{action:"__onKeyDown"},click:{action:"__click"}}},options:{items:{defaultValue:null,acceptTypes:["Array","Null"]}},methods:{__getCurrentItemIndex:function(a){for(var b=0;b<this.itemlist.length;b++)if(this.itemlist[b].$id==a.$id)return b},__click:function(a,b){b.routing="none"},__itemClick:function(a,b){this.__selectItem(b.item)},setModel:function(){this.superMethod(arguments);var a=
[];this.traverse(function(b){b instanceof f.ui.TreeNode&&a.push(b)});this.itemlist=a},__onKeyDown:function(a,b){if(!this.getOption("disabled")){var d=b.keyCode;if(!b.hasSystemKey)switch(d){case c.UP_ARROW:this.prevItem();b.preventDefault();break;case c.LEFT_ARROW:this.__leftItemAction();b.preventDefault();break;case c.DOWN_ARROW:this.nextItem();b.preventDefault();break;case c.RIGHT_ARROW:this.__rightItemAction();b.preventDefault();break;case c.SPACE:this.executeSelectedItem();b.preventDefault();break;
case c.ENTER:this.executeSelectedItem(),b.preventDefault()}}},__leftItemAction:function(){var a=this.__getCurrentItem(),b=this.__getItemType(a),c=a.$parent.$parent;"folder"==b?a.hasClass("f-tree-item-open")?a.removeClass("f-tree-item-open"):c.hasClass("f-tree")||this.__selectItem(c):"file"==b&&(c.hasClass("f-tree")||this.__selectItem(c))},__rightItemAction:function(){var a=this.__getCurrentItem();"folder"==this.__getItemType(a)&&(a.hasClass("f-tree-item-open")?this.nextItem():a.addClass("f-tree-item-open"))},
nextItem:function(){for(var a,b,c=this.currentItemIndex+1||0;c<this.itemlist.length;c++){var d=this.itemlist[c];if("none"!=d.$parent.getStyle("display")){a=d;b=c;break}}this.__selectItem(a,b)},prevItem:function(){for(var a,b,c=this.currentItemIndex-1||0;0<=c;c--){var d=this.itemlist[c];if("none"!=d.$parent.getStyle("display")){a=d;b=c;break}}this.__selectItem(a,b)},executeSelectedItem:function(){this.__getCurrentItem().itemClick()},__focus:function(){e.delay(0.2,function(){this.__getCurrentItem()},
this)},__getItemType:function(a){return a.container.hasClass("f-tree-item-container-folder")?"folder":"file"},__getCurrentItem:function(){e.isUndef(this.currentItem)&&this.__selectItem();return this.currentItem},__selectItem:function(a,b){this.currentItem&&this.currentItem.removeClass("f-tree-item-selected");e.isUndef(a)&&(a=this.itemlist[0],b=0);this.currentItem=a;this.currentItemIndex=b||this.__getCurrentItemIndex(a);this.currentItem.container.focus();this.currentItem.addClass("f-tree-item-selected")}}})})(fruit,
fruit.ui,fruit.util,fruit.dom,fruit.util.keys);
(function(f,d,e){f.define("fruit.ui.Notification",{extend:"fruit.ui.Component",view:{tag:"div",attr:{"class":"f-notice"},content:{tag:"span",name:"noticeSpan",content:[{tag:"span",name:"message",content:"{message}",attr:{"class":"f-notice-text"}},{tag:"a",name:"closeIcon",attr:{href:"javascript:;","class":"icon-close-x16"}}]}},triggers:{event:{ready:{action:"__ready"},click:[{source:"closeIcon",action:"__closeNotice"}]}},options:{type:{defaultValue:"confirm",acceptTypes:["String","Null"]},message:{defaultValue:"",
acceptTypes:["String","Null"]},hasIcon:{defaultValue:!1,acceptTypes:["Boolean","Null"]},hasClose:{defaultValue:!0,acceptTypes:["Boolean","Null"]},isGlobal:{defaultValue:!1,acceptTypes:["Boolean","Null"]},autoClose:{defaultValue:0,acceptTypes:["Number","Null"]}},methods:{init:function(){this.autoCloseTimer=null;this.minStayTime=3E3},__ready:function(){var b=this,c=this.noticeSpan;switch(this.getOption("type").toLowerCase()){case "confirm":c.addClass("f-confirmation");break;case "alert":c.addClass("f-alert");
break;case "error":c.addClass("f-error")}this.message.setText(this.getOption("message"));this.getOption("hasIcon")&&this.addClass("f-notice-icon");this.getOption("hasClose")&&this.addClass("f-notice-close");this.getOption("isGlobal")&&this.__initGlobalNotice();c=this.getOption("autoClose");0<c&&(b.autoCloseTimer=setTimeout(function(){b.__closeNotice()},c))},__initGlobalNotice:function(){this._showTimer=new Date;this.addClass("f-notice-top");this.setStyle("marginLeft",-0.5*this.getBound().width);this.__onGlobalEvent()},
__blankClick:function(b,c){if(c&&c.target){var a=this.getElement(),d=c.target;d.getElement?d!==a&&!a.contains(d.getElement())&&new Date-this._showTimer>this.minStayTime&&this.__hideGlobalNotice():d!==a&&!a.contains(d)&&new Date-this._showTimer>this.minStayTime&&this.__hideGlobalNotice()}},__closeNotice:function(){this.getOption("isGlobal")?this.__hideGlobalNotice():(this.autoCloseTimer&&clearTimeout(this.autoCloseTimer),this.destroy())},__hideGlobalNotice:function(){this.hasRender&&(this.__unGlobalEvent(),
this.hide(),this.hasRender=!1)},__showGlobalNotice:function(){this.hasRender=!0;this.show();this.__onGlobalEvent()},__onGlobalEvent:function(){e.on("click",this.__blankClick,this)},__unGlobalEvent:function(){e.off("click",this.__blankClick,this)}}});d.extend(f.ui,{globalNotice:null,notify:function(b){b=d.extend({},b);b.isGlobal=!0;f.ui.globalNotice?(f.ui.globalNotice.message.setText(b.message),f.ui.globalNotice.hasRender||f.ui.globalNotice.__showGlobalNotice()):(f.ui.globalNotice=new f.ui.Notification(b),
f.ui.globalNotice.renderTo(),f.ui.globalNotice.hasRender=!0)}})})(fruit,fruit.util,fruit.Application);
(function(f,d,e,b){f.define("fruit.Router",{singleton:!0,mixins:"fruit.Observable",methods:{routerMap:{},routerRegMap:[],init:function(){var c=this;this.__isStart=!1;d.isIE?setInterval(function(){c.__isStart&&d.getURL()!==c.__prevURL&&c.__checkURL()},300):e.addEvent(b,"hashchange",function(){c.__checkURL()})},registerRouteMap:function(b,a){if(b)for(var d in b)"/"==d.substr(0,1)?this.routerRegMap.push([d.substr(1,d.length-2),b[d]]):this.routerMap[d]=b[d];this.routerContext=a},setDefault:function(b){this.__defaultRouter=
b;if(!this.routerMap[b])throw"Please define default router";},start:function(){this.__isStart=!0;this.__checkURL()},getHash:function(){return this.__prevRouterHash||""},__checkURL:function(){var b=this.__parserHash();this.__callRouterMethod(this.__getCurrentRouterObj(b.router),b);this.trigger("HashChange",{hash:b},this.routerContext)},__getCurrentRouterObj:function(b){if(this.routerMap[b])return this.routerMap[b];for(var a=0;a<this.routerRegMap.length;a++)if(RegExp(this.routerRegMap[a][0]).test(b))return this.routerRegMap[a][1];
return""===b&&this.__defaultRouter?this.routerMap[this.__defaultRouter]:""},__callRouterMethod:function(b,a){this.__callPrevRouterMethod(a);this.__callCurrentRouterMethod(b,a)},__callPrevRouterMethod:function(b){var a=this.__prevRouterObj;return d.isObject(a)&&a.leave?!1!==a.leave.call(this.routerContext,this.__prevRouterHash,b):!0},__callCurrentRouterMethod:function(b,a){f.util.isObject(b)&&b.enter?(this.__prevRouterHash=a,this.__prevRouterObj=b,b.enter.call(this.routerContext,a)):(this.__prevRouterHash=
a,this.__prevRouterObj=b,""!=b&&b.call(this.routerContext,a))},__parserHash:function(){var b=this.__prevURL=d.getURL();this.rootURL=d.baseURL();var a=d.getURLHash();if(""!=a)return/\//.test(a)?(a.split("/"),{router:a.substring(0,a.indexOf("/")),params:a.substr(a.indexOf("/")+1)}):{router:a,params:[]};this.rootURL=b;return{router:"",params:[]}},redirect:function(c,a){this.__callPrevRouterMethod({router:c,params:a})&&(this.__prevRouterHash="",b.location.href=this.rootURL+"#"+c+(a?"/"+a:""))}}})})(fruit,
fruit.util,fruit.event.Engine,window);
(function(f,d){var e=f.util.bind,b={},c=0,a,g,h=0,k=function(a){var b=a.length,c=0,d="";0!==b&&function w(){function e(){c++;c<b&&w()}a[c].inline?((d=a[c].url)&&f.io.load.script(d,null,null,!0),e()):f.io.load.script(a[c].url,e,e)}()},j=function(a,b){var c=b.indexOf("<\/script>",a);lastEndScriptIndex=c+9;return[b.substring(a,c),lastEndScriptIndex]},l=function(b){q(b);m();a.trigger("afterrefresh")},o=function(){n();if("function"===typeof a.option.ajaxError)return a.option.ajaxError},n=function(){d.each(b,
function(b,c){a.off(c,b)})},m=function(){var a=f.util.getURLParams()._anchor;a&&(a=$("a[name="+a+"]").offset())&&window.scrollTo(0,a.top)},q=function(b,c){var d;d=[];var e=0,f=[],g=/<script(.*?)>/ig,h,l;for(lastEndScriptIndex=-1;h=g.exec(b);)h.index<lastEndScriptIndex||(d.push(b.substring(e,h.index)),e=g.lastIndex,h=h[1],(l=/src="(.*?)"/i.exec(h))?(f.push({url:l[1],inline:!1}),"/"!==h.charAt(h.length-1)&&(e=j(e,b),e=e[1])):(e=j(e,b),f.push({url:e[0],inline:!0}),e=e[1]));d.push(b.substr(e));d=d.join("");
c=c||a.option.bodyID;$(c).empty();$(d).appendTo(c);k(f)};f.define("fruit.Frame",{mixins:"fruit.Observable",singleton:!0,entity:{lockMessage:{},lockFn:{},option:{mockup:"",bodyID:null,defaultUrl:null,pageFreshFrequency:20},run:function(b){this.option=d.extend(this.option,b);a=this;this.on(b.listeners);b=f.Router;this.beforeUrl=f.util.getURL();b.on("hashChange",e(this.onHashChange,this));b.start()},onHashChange:function(){var a=f.util.getURLHash()||this.option.defaultUrl,a="function"===typeof this.option.ajaxUrl?
this.option.ajaxUrl():f.util.baseURL()+a;if(!1===this.trigger("hashChange",[{module:this.module(),feature:this.feature(),params:f.util.getURLParams(),afterUrl:f.util.getURL(),isFeatureChange:this.moduleFeature(this.beforeUrl)===this.moduleFeature()?!1:!0,beforeUrl:this.beforeUrl}],null,!0))return!1;this.refreshBody(a)},html:q,refreshBody:function(b){f.util.getURLHash()!==g&&(0<c?this.trigger("lockmsg"):h>=this.option.pageFreshFrequency?window.location.reload(!0):(a.trigger("beforerefresh"),n(),f.io.ajax({url:b,
type:a.option.ajaxType||"POST",success:l,error:o}),h++))},anchor:function(a){if(a){var b=f.util.getURLParams();b._anchor=a;a=f.util.generateURLString(b);window.location.hash=a;m()}},moduleFeature:function(a){a=f.util.getURLHash(a)||this.option.defaultUrl;/\?/.test(a)&&(a=a.substr(0,a.indexOf("?")));return a},module:function(a){return this.moduleFeature(a).split("/").slice(1,2).join("")},feature:function(a){if(this.moduleFeature(a))return a=this.moduleFeature(a).split("/"),2<a.length?a.slice(2,3)[0]:
""},lock:function(a,b,d){void 0===this.lockMessage[a]&&c++;this.lockMessage[a]=b;d&&(this.lockFn[a]=d);g=f.util.getURLHash()},unlock:function(a){a||(c=0,this.lockMessage={},this.lockFn={});"undefined"!=typeof this.lockMessage[a]&&(c--,delete this.lockMessage[a],delete this.lockFn[a]);g=null},hold:function(){g&&(window.location.hash=g)},on:function(a,c,e){if(d.isObject(a))return this.superMethod(arguments);!0===e&&(b[a]=c);this.superMethod([a,c])}}})})(fruit,fruit.util);
(function(f){f.define("fruit.Cookie",{singleton:!0,mixins:"fruit.Observable",methods:{setCookie:function(d,e,b){if(d){if(b){var c=new Date;c.setTime(c.getTime()+864E5*b);b="; expires="+c.toGMTString()}else b="";document.cookie=d+"="+escape(e)+b+"; path=/";this.trigger("CookieChange",this)}},getCookie:function(d){if(d&&(d=document.cookie.match(RegExp(d+"=(.*?)(?:;|$)"))))return unescape(d[1].replace(/\+/g,"%20"))},delCookie:function(d){this.setCookie(d,"",-1)},destory:function(){for(var d=document.cookie.split(";"),
e=0;e<d.length;e++)this.delCookie(d[e].split("=")[0])}}})})(fruit,fruit.util,fruit.event.Engine,window);
(function(f){f.ns("fruit.io");f.io.ajax=function(d){var d=f.util.extend({},d),e=d.beforeSend,b=d.success,c=d.error,a=d.complete;!d.method&&d.type&&(d.method=d.type,delete d.type);!d.responseType&&d.dataType&&(d.responseType=d.dataType,delete d.dataType);d.listeners={beforeSend:e,success:b,error:c,complete:a};delete d.beforeSend;delete d.success;delete d.error;delete d.complete;f.util.isDefine(d.spi)||f.util.isDefine(d.listeners.error)?d.spi?!1!==d.useMerge?d=f.io.MergeSPIRequest.add(d):(d=new f.io.SPIRequest(d),
d.send()):(d=new f.io.PageRequest(d),d.send()):(d=new f.io.Request(d),d.send());return d}})(fruit);
(function(f){f.define("fruit.io.PageRequest",{extend:"fruit.io.Request",statics:{mock:null},options:{method:"GET"},methods:{send:function(){var d=this.updateOptions(),e,b=f.io.PageRequest.mock;b?(404==b.status||500==b.status?e="error":200==b.status&&(e="success"),"success"==e?d.success(b.responseText,e,{}):d.error(b,"error"),d.complete(b.responseText,e)):this.superMethod([d]);return this},onSuccess:function(){var d="process"+f.util.upperFirstChar(this.getOption("responseType"));this[d]?this[d].apply(this,
arguments):this.trigger("success",arguments,this,!0);f.util.logger.info("request success trigger!")},processHtml:function(d,e,b){var c=0<=d.lastIndexOf("<\!--PAGE_IDENTITY:SESSOIN_TIME_OUT--\>"),a=0<=d.lastIndexOf("<\!--PAGE_IDENTITY:GLOBAL_ERROR_PAGE--\>");c?f.io.Request.trigger(f.io.EVENT_SESSION_TIMEOUT,[d],null,!0):a?f.io.Request.trigger(f.io.GLOBAL_PAGE_ERROR,[d],null,!0):this.trigger("success",arguments,this,!0)},onError:function(d,e){this.trigger("error",arguments,this,!0)},onComplete:function(d,
e){this.trigger("complete",arguments,this,!0);f.io.Request.trigger(f.io.Request_COMPLETE,arguments,this,!0)},updateOptions:function(){var d=f.util.bind,e=this.getOption("listeners").beforeSend;this.setOption("listeners",{success:this.onSuccess?d(this.onSuccess,this):null,error:this.onError?d(this.onError,this):null,complete:this.onComplete?d(this.onComplete,this):null,beforeSend:e?d(e,this):null});return this.getAllOptions()}}})})(fruit);
(function(f){f.define("fruit.io.SPIRequest",{extend:"fruit.io.Request",statics:{SUCCESS:"SUCCESS",FAILURE:"FAILURE",PENDING:"PENDING",defaultUrl:"",getToken:function(){return null},setDefaultUrl:function(d){this.defaultUrl=d},getDefaultUrl:function(){return this.defaultUrl}},options:{method:"POST",responseType:"json",spi:"",id:"",useMerge:!0},methods:{init:function(d){this.setOption("url",d.url||f.io.SPIRequest.defaultUrl);this.useMerge=this.getOption("spi")&&this.getOption("useMerge")?!0:!1;this.id=
Math.uuid();this.aborted=!1},send:function(){return this.superMethod([this.updateOptions()])},abort:function(){this.useMerge?this.aborted=!0:this.superMethod()},onSuccess:function(d){f.util.isArray(d)&&(d=d[0]);switch(d.status){case f.io.SPIRequest.SUCCESS:this.trigger("success",[d,d.status,this],null,!0);break;case f.io.SPIRequest.FAILURE:if(1155==d.exceptionID||102==d.exceptionID){var e={};d.reason&&(e={timeoutType:d.reason});f.io.Request.trigger(f.io.EVENT_SESSION_TIMEOUT,[e],null,!0);f.util.logger.info("Session_Timeout Trigger!")}else this.statusText=
"failure",this.trigger("error",[this,"failure",d],null,!0);break;case f.io.SPIRequest.PENDING:f.io.MergeSPIRequest.add(this,!0);break;default:f.util.logger.warn("unknow result status ["+d.status+"]!")}},onError:function(d,e){this.trigger("error",arguments,this,!0)},onComplete:function(d,e){this.trigger("complete",arguments,this,!0);f.io.Request.trigger(f.io.Request_COMPLETE,arguments,this,!0)},updateOptions:function(){var d=f.util.bind,e=this.getOption("listeners").beforeSend;this.setOption("data",
this.getData());this.setOption("listeners",{success:this.onSuccess?d(this.onSuccess,this):null,error:this.onError?d(this.onError,this):null,complete:this.onComplete?d(this.onComplete,this):null,beforeSend:e?d(e,this):null});return this.getAllOptions()},getData:function(){var d=this.getDataObject();f.util.isArray(d)||(d=[d]);var e=f.io.SPIRequest.getToken();return e?{__spiCall__:JSON.stringify(d),token:e}:{__spiCall__:JSON.stringify(d)}},getDataObject:function(){var d=this.getOption("spi").split("."),
e=this.getOption("isSecondCall")?"":d[0],b=this.getOption("data");return b?{id:this.id,service:e,spi:d[1],parameters:b}:{id:this.id,service:e,spi:d[1]}}}})})(fruit);
(function(f){var d=f.util.bind;f.define("fruit.io.MergeSPIRequest",{extend:"fruit.io.SPIRequest",statics:{waitTime:100,maxRequest:20,checkWaitTime:20,count:0,add:function(d,b){if(!this.instance){var c=f.util.extend({},d,{spi:""});this.instance=new f.io.MergeSPIRequest(c)}c=d.$name?d:new f.io.SPIRequest(d);b&&c.setOption("isSecondCall",!0);this.instance.push(c);this.count++;return c}},methods:{init:function(){this.list={};var e=this.getStatics();this.timeid=setTimeout(d(this.send,this),e.waitTime)},
send:function(){var d=this.getStatics();d.instance=null;this.timeid=d.count=0;this.superMethod()},push:function(d){var b=this.getStatics();this.list[d.id]=d;b.maxRequest<b.count&&(this.timeid&&clearTimeout(this.timeid),this.send())},onSuccess:function(d,b,c){this.distribute(arguments,d)},onError:function(d,b){this.distribute(arguments)},onComplete:function(){this.distribute(arguments)},getDataObject:function(){var d=[];f.util.each(this.list,function(b){d.push(b.getDataObject())});return d},distribute:function(d,
b){var c=this,a,g=this.list,h=this.distribute.caller.$name,k={};b&&f.util.each(b,function(a){k[a.id]=a});f.util.each(g,function(f){if(f.aborted)"onComplete"==h?c.trigger("complete",[c,"abort"],c,!0):c.trigger("error",[c,"abort"],c,!0);else{var g=[];b&&f.id&&k[f.id]?(f=f.id,a=c.list[f],g[0]=k[f]):(a=f,g=d);a[h].apply(a,g)}})}}})})(fruit);
(function(f){f.ns("fruit.io");f.io.ajax=function(d){var d=f.util.extend({},d),e=d.beforeSend,b=d.success,c=d.error,a=d.complete;!d.method&&d.type&&(d.method=d.type,delete d.type);!d.responseType&&d.dataType&&(d.responseType=d.dataType,delete d.dataType);d.listeners={beforeSend:e,success:b,error:c,complete:a};delete d.beforeSend;delete d.success;delete d.error;delete d.complete;f.util.isDefine(d.spi)||f.util.isDefine(d.listeners.error)?d.spi?!1!==d.useMerge?d=f.io.MergeSPIRequest.add(d):(d=new f.io.SPIRequest(d),
d.send()):(d=new f.io.PageRequest(d),d.send()):(d=new f.io.Request(d),d.send());return d}})(fruit);
(function(f){f.ns("fruit.io.load").extend({script:function(d,e,b,c,a){var f=a||document.getElementsByTagName("head")[0],h,k=!1;h=(a||document).createElement("script");h.language="javascript";h.charset="UTF-8";h.type="text/javascript";h.onload=h.onreadystatechange=function(){if(!k&&(!h.readyState||"loaded"===h.readyState||"complete"===h.readyState))k=!0,e&&e(),h.onload=h.onreadystatechange=null,h.parentNode.removeChild(h),h=null};h.onerror=function(){k||(k=!0,b&&b())};c?h.text=d:h.src=d;f.appendChild(h);
!k&&c&&(k=!0,e&&e());f=null},style:function(d,e,b,c){c=c||document;b?(b=styleCache[c],b||(b=styleCache[c]=c.createElement("style"),b.setAttribute("type","text/css"),document.getElementsByTagName("head")[0].appendChild(b)),b.styleSheet&&(b.styleSheet.cssText+=d)||b.appendChild(c.createTextNode(d))):(b=document.createElement("link"),b.charset="UTF-8",b.rel="stylesheet",b.type="text/css",b.href=d,c.getElementsByTagName("head")[0].appendChild(b));e&&e()}})})(fruit);
fruit.defineInterface("fruit.interfaces.IStore","getModel,getModelCollection,read,create,update,destroy".split(","));
(function(f,d,e){f.define("fruit.data.AjaxStore",{mixins:"fruit.Observable",implement:"fruit.interfaces.IStore",options:{responseType:{defaultValue:"json",acceptTypes:["String","Null"]},modelType:{defaultValue:"fruit.ui.data.ViewModel",acceptTypes:["String","Null"]},idAttribute:{defaultValue:"id",acceptTypes:["String","Null"]},url:{defaultValue:"",acceptTypes:["Object","String"]}},methods:{init:function(){this.id=Math.uuid();this.loading=!1;this.modelCollection=this.data=null},save:function(b){"create"==
b.action.toLowerCase()&&this.create(b.data);"update"==b.action.toLowerCase()&&this.update(b.data);"destroy"==b.action.toLowerCase()&&this.destroy(b.data)},read:function(b){var c=this.getOption("url"),a="",a=d.isString(c)?c:c.read||"";this.__ajax("Read",a,"GET",b||{})},create:function(b,c){var a=this.getOption("url"),g="";if(d.isObject(a)){var g=a.create||"",a={},h=c.item;h instanceof f.ui.data.ViewModel&&(a=h.getJSON());this.__ajax("Create",g,"POST",a)}else e.error("The url config should be defined as an object.")},
update:function(b,c){var a=this.getOption("url"),g="";if(d.isObject(a)){var g=a.update||"",a={},h=c.item;h instanceof f.ui.data.ViewModel&&(a=h.getJSON());this.__ajax("Update",g,"POST",a)}else e.error("The url config should be defined as an object.")},destroy:function(b,c){var a=this.getOption("url"),g="";if(d.isObject(a)){var g=a.destroy||"",a={},h=c.item;if(h instanceof f.ui.data.ViewModel){var k=this.getOption("idAttribute");a[k]=h.getValue(k)}this.__ajax("Destroy",g,"POST",a)}else e.error("The url config should be defined as an object.")},
__checkSpi:function(b){return 0==b.indexOf("spi:")?b.substr(4):!1},__ajax:function(b,c,a,e){var h=d.bind,k=this.getAllOptions(),b=d.capitalize(b),b={method:a,responseType:k.responseType,data:e,success:h(this["__on"+b+"Success"],this),error:h(this["__on"+b+"Error"],this),complete:h(this["__on"+b+"Complete"],this)},c=d.trim(c);(a=this.__checkSpi(c))?b.spi=a:b.url=c;f.io.ajax(b)},getModel:function(b){var c=this.getOption("idAttribute")||"id";this.modelCollection||(this.modelCollection=this.getModelCollection());
return b?this.modelCollection.first(function(a){return a.getValue(c)==b}):this.modelCollection.getItem(0)},getModelCollection:function(){if(!this.modelCollection){var b=this.getOption("modelType"),c=d.clone(this.data);d.isArray(c)||(c=[this.data]);if(this.modelCollection=new f.ui.data.ViewModelCollection(c,b))this.modelCollection.on("add",this.create,this),this.modelCollection.on("edit",this.update,this),this.modelCollection.on("remove",this.destroy,this)}return this.modelCollection},__onReadSuccess:function(b,
c,a){this.data=this.__parseToJson(b);this.trigger("readSuccess",[this.data,c,a],null,!0)},__onReadError:function(b,c){this.trigger("readError",[b,c],null,!0);e.warn("read error, status="+c)},__onReadComplete:function(b,c){this.trigger("readComplete",[b,c],null,!0)},__parseToJson:function(b){return b||{}}}},function(){var b=this.prototype;d.each(["Create","Update","Destroy"],function(c){var a=c.toLowerCase();b["__on"+c+"Success"]=function(b,c,d){this.trigger(a+"Success",[b,c,d,a],null,!0)};b["__on"+
c+"Error"]=function(b,c){this.trigger(a+"Error",[b,c,a],null,!0);e.warn(a+" error, status = "+c)};b["__on"+c+"Complete"]=function(b,c){this.trigger(a+"Complete",[b,c,a],null,!0)}})})})(fruit,fruit.util,fruit.util.logger);
(function(f){f.define("fruit.Graphic.SVGGraphic",{entity:{generateRoot:function(d){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("width",d.width||"100%");e.setAttribute("height",d.height||"100%");return e},rect:function(d){var e=this.defaultSymbol(d);e.style.stroke=d.stroke||"rgb(0, 0, 0, 0)";e.style.strokeWidth=parseInt(d.strokeWidth)||1;e.setAttribute("rx",parseInt(d.rx)||0);e.setAttribute("ry",parseInt(d.ry)||0);return e},circle:function(d){var e=this.defaultSymbol(d);
e.setAttribute("r",parseInt(d.r)||0);e.setAttribute("cx",parseInt(d.x)||0);e.setAttribute("cy",parseInt(d.y)||0);return e},ellipse:function(d){var e=this.defaultSymbol(d);e.setAttribute("r",parseInt(d.r)||0);e.setAttribute("cx",parseInt(d.x)||0);e.setAttribute("cy",parseInt(d.y)||0);e.setAttribute("rx",parseInt(d.rx)||0);e.setAttribute("ry",parseInt(d.ry)||0);return e},line:function(d){var e=document.createElementNS("http://www.w3.org/2000/svg","line");e.setAttribute("x1",parseInt(d.x1)||0);e.setAttribute("y1",
parseInt(d.y1)||0);e.setAttribute("x2",parseInt(d.x2)||0);e.setAttribute("y2",parseInt(d.y2)||0);e.style.stroke=d.stroke||"rgb(0, 0, 0, 0)";e.style.strokeWidth=parseInt(d.strokeWidth)||1;return e},path:function(d){var e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("d",d.path||"");e.style.fill=d.fill;return e},image:function(d){var e=document.createElementNS("http://www.w3.org/2000/svg","image");d.src&&e.setAttributeNS("http://www.w3.org/1999/xlink","href",d.src);d.width&&
e.setAttribute("width",parseInt(d.width));d.height&&e.setAttribute("height",parseInt(d.height));d.x&&e.setAttribute("x",parseInt(d.x)||0);d.y&&e.setAttribute("y",parseInt(d.y)||0);return e},text:function(d){var e=this.defaultSymbol(d),d=document.createTextNode(d.text||"");e.appendChild(d);return e},defaultSymbol:function(d){var e=document.createElementNS("http://www.w3.org/2000/svg",d.type);d.width&&e.setAttribute("width",parseInt(d.width));d.height&&e.setAttribute("height",parseInt(d.height));d.x&&
e.setAttribute("x",parseInt(d.x)||0);d.y&&e.setAttribute("y",parseInt(d.y)||0);d.fill&&(e.style.fill=d.fill);return e},animate:function(d){var e=document.createElementNS("http://www.w3.org/2000/svg",d.type||"animateTransform");e.setAttributeNS(null,"attributeName",d.attr);e.setAttributeNS(null,"attributeType","xml");e.setAttributeNS(null,"from",d.from);e.setAttributeNS(null,"to",d.to);e.setAttributeNS(null,"begin","0s");e.setAttributeNS(null,"dur",d.dur+"s");return e}}})})(fruit,fruit.util);
(function(f){f.define("fruit.Graphic.VMLGraphic",{entity:{init:function(){document.namespaces.add("v","urn:schemas-microsoft-com:vml");document.createStyleSheet().addRule("v\\: *","behavior:url(#default#VML); position:absolute");document.createStyleSheet().addRule("v\\:roundrect","behavior:url(#default#VML); position:absolute");document.createStyleSheet().addRule("v\\:oval","behavior:url(#default#VML); position:absolute");document.createStyleSheet().addRule("v\\:roundrect","behavior:url(#default#VML); position:absolute");
document.createStyleSheet().addRule("v\\:fill","behavior:url(#default#VML); position:absolute");document.createStyleSheet().addRule("v\\:line","behavior:url(#default#VML); position:absolute");document.createStyleSheet().addRule("v\\:shape","behavior:url(#default#VML); position:absolute");document.createStyleSheet().addRule("v\\:polyline","behavior:url(#default#VML); position:absolute");document.createStyleSheet().addRule("v\\:stroke","behavior:url(#default#VML); position:absolute")},generateRoot:function(){},
rect:function(){},circle:function(){},ellipse:function(){},line:function(){},path:function(){},defaultSymbol:function(){}}})})(fruit,fruit.util);
(function(f,d){document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1");var e=document.all&&!(0<=navigator.userAgent.indexOf("Opera"))?!0:!1;f.define("fruit.Graphic.GraphicManager",{singleton:!0,entity:{init:function(){this.engine=e?new f.Graphic.VMLGraphic:new f.Graphic.SVGGraphic},getGraphic:function(b){var c=this.generateRoot(b);return this.__generateChild(b.content,c)},generateRoot:function(b){return this.engine.generateRoot(b)},__generateChild:function(b,
c){if(b){b=d.isArray(b)?b:[b];for(i=0;i<b.length;i++){var a=this.generateSymbol(b[i]);c.appendChild(a)}return c}},generateSymbol:function(b){switch(b.type){case "rect":b=this.engine.rect(b);break;case "circle":b=this.engine.circle(b);break;case "ellipse":b=this.engine.ellipse(b);break;case "line":b=this.engine.line(b);break;case "linearGradient":b=this.engine.linearGradient(b);break;case "defs":b=this.engine.defs(b);break;case "polyline":b=this.engine.polyline(b);break;case "polygon":b=this.engine.polygon(b);
break;case "path":b=this.engine.path(b);break;case "image":b=this.engine.image(b);break;case "text":b=this.engine.text(b);break;default:b=this.engine.defaultSymbol(b)}return b},generateAnimateSymbol:function(b){return this.engine.animate(b)}}})})(fruit,fruit.util);
(function(f,d,e){f.define("fruit.Graphic.core",{mixins:["fruit.Observable"],options:{height:{defaultValue:"100%"},width:{defaultValue:"100%"}},entity:{colorTable:"#0086C0,#91DC0D,#13ACDC,#FFAF09,#119E1B,#F85B37,#652D89,#F58025,#B64926".split(","),init:function(){this.graphic||(this.graphic=e.generateRoot({width:this.getOption("width"),height:this.getOption("height")}))},renderTo:function(b){this.graphic&&(b=(b=d.isString(b)?document.getElementById(b):b)||document.body,b.appendChild(this.graphic))},
setModel:function(b){this.model&&(this.model instanceof f.ui.data.ViewModel?(this.model.off("refresh",this.syncModel,this),this.model.off("edit",this.editModel,this)):this.model instanceof f.ui.data.ViewModelCollection&&(this.model.off("reset",this.syncModel,this),this.model.off("add",this.syncModel,this),this.model.off("remove",this.syncModel,this)));if(this.model=b)if(this.model instanceof f.ui.data.ViewModel)this.model.on("refresh",this.syncModel,this),this.model.on("edit",this.editModel,this),
this.modelType="VM";else if(this.model instanceof f.ui.data.ViewModelCollection)this.model.on("reset",this.syncModel,this),this.model.on("add",this.syncModel,this),this.model.on("remove",this.syncModel,this),this.modelType="VMC";else throw"model must be ViewModel or ViewModelCollection";this.syncModel()},syncModel:function(){},editModel:function(){},empty:function(){for(;this.graphic.lastChild;)this.graphic.removeChild(this.graphic.lastChild)}}});f.Graphic.core.regProcessor("graphic",function(b,c){if(c.graphic){var a=
e.getGraphic(c.graphic);b.prototype.graphic=a}})})(fruit,fruit.util,fruit.Graphic.GraphicManager);
(function(f,d,e){f.define("fruit.Graphic.Sector",{extend:"fruit.Graphic.core",graphic:{}});f.define("fruit.Graphic.Pie",{extend:"fruit.Graphic.core",options:{title:{defaultValue:""}},entity:{init:function(){this.sector=[]},syncModel:function(){var b=this.model.model;this.__serializeModel(b);this.__drawPie(b)},editModel:function(b){b=this.model.model;this.__serializeModel(b);this.__animatePie(b)},__serializeModel:function(b){for(var c=b.length,a=0,d=this.getOption("width"),e=this.getOption("height"),
f=Math.min(e,d)/2,j=0,l=d/2,o=0,n=0;n<c;n++)o+=parseInt(b[n].value);for(n=0;n<c;n++){var m=b[n];m.angle=Math.ceil(360*(m.value/o));var a=a+m.angle,q=[];q.push("M "+e/2+","+d/2);q.push("L"+l+","+j);q.push("A"+f+","+f+" 0 ");q.push(180<=m.angle?"1,1":"0,1");l=parseInt(d/2+f*Math.sin(Math.PI*a/180));j=parseInt(e/2-f*Math.cos(Math.PI*a/180));q.push(l+","+j);q.push("z");m.path=q.join(" ")}},__drawPie:function(b){for(var c=this.colorTable,a=b.length,d=0;d<a;d++){var f=e.generateSymbol({type:"path",path:b[d].path,
fill:c[d%c.length]});this.sector[d]=f;this.graphic.appendChild(f);f.addEventListener("click",this.__showSector)}},__animatePie:function(b){for(var c=b.length,a=0;a<c;a++){var d=b[a],f=this.sector[a],k=f.getAttribute("d"),k=e.generateAnimateSymbol({type:"animate",attr:"d",from:k,to:d.path,dur:0.5});f.appendChild(k);(function(a,b,c){setTimeout(function(){a.setAttribute("d",c);b.parentNode.removeChild(b)},500);setTimeout(function(){b.beginElement()},0)})(f,k,d.path)}},__showSector:function(){}}})})(fruit,
fruit.util,fruit.Graphic.GraphicManager);
(function(f,d,e){f.define("fruit.Graphic.Device",{mixins:["fruit.Observable"],options:{config:{defaultValue:null,acceptType:["Object","null"]},icon:{defaultValue:"images/router.png",acceptType:["String","null"]}},entity:{init:function(){var b=this,c=this.getOption("config"),a=this.getOption("icon");this.graphic=e.generateSymbol({type:"g"});var a=this.img=e.generateSymbol({type:"image",src:a,x:c.x,y:c.y,width:32,height:32}),d=this.text=e.generateSymbol({type:"text",x:c.x+32,y:c.y+32,text:c.name,fill:"#999"});
this.graphic.appendChild(a);this.graphic.appendChild(d);a.addEventListener("click",function(){b.trigger("nodeClick",c)});a.addEventListener("mousedown",function(){b.trigger("mousedown",c)})}}});f.define("fruit.Graphic.Router",{extend:"fruit.Graphic.Device",options:{icon:{defaultValue:"images/router.png",acceptType:["String","null"]}},entity:{}});f.define("fruit.Graphic.Server",{extend:"fruit.Graphic.Device",options:{icon:{defaultValue:"images/server.png",acceptType:["String","null"]}},entity:{}});
f.define("fruit.Graphic.Switch",{extend:"fruit.Graphic.Device",options:{icon:{defaultValue:"images/switch.png",acceptType:["String","null"]}},entity:{}});f.define("fruit.Graphic.Topology",{extend:"fruit.Graphic.core",options:{title:{defaultValue:""}},graphic:{},entity:{init:function(){this.r=32;this.dateObj={}},__attachEvent:function(){this.dragging=!1;document.addEventListener("click",function(b){"image"==b.target.nodeName&&console.log(1)})},syncModel:function(){var b=this.model.model;this.__serializeModel(b.node);
this.__draw(b.node)},editModel:function(b){b=this.model.model;this.__serializeModel(b.node);this.__draw(b.node)},__serializeModel:function(b){for(var c=this.getOption("width")-2*this.r,a=this.getOption("height")-2*this.r,e=b.length,f,k=0;k<e;k++){var j=b[k];j.ip==j.connection&&alert(1);f=this.dateObj[j.ip]?this.dateObj[j.ip].connections:[];this.dateObj[j.ip]=j;this.dateObj[j.ip].connections=f;this.dateObj[j.connection]?this.dateObj[j.connection].connections.push(j.ip):this.dateObj[j.connection]={connections:[j.ip]};
this.dateObj[j.ip].connections.push(j.connection)}for(k=0;k<e;k++)j=b[k],d.arrayUniq(j.connections);b.sort(function(a,b){return b.connections.length-a.connections.length});f=b[0].connections.length;for(var l=Math.floor(c/(2*f)),c=c/2,a=a/2,o=[],k=0;k<e;k++){var j=b[k],n=j.connections.length;o[n]?o[n].push(j):o[n]=[j]}for(k=1;k<=f;k++)if(b=o[f-k+1],console.log(b),!d.isUndef(b))for(var e=b.length,n=Math.floor(360/e),m=0;m<e;m++){var j=b[m],q=Math.floor(l*k*Math.sin(Math.PI*n*m/180)),p=Math.floor(l*
k*Math.cos(Math.PI*n*m/180));console.log(q+","+p);j.x=Math.floor(c+q);j.y=Math.floor(a+p);this.dateObj[j.ip].x=j.x;this.dateObj[j.ip].y=j.y}},redraw:function(){this.__draw(this.model.model.node)},__draw:function(b){this.getOption("width");this.getOption("height");var c=b.length,a,d=this;this.empty();var h=this.line=e.generateSymbol({type:"g"});this.graphic.appendChild(h);this.graphic.appendChild(this.icon=e.generateSymbol({type:"g"}));for(var k=0;k<c;k++){var h=b[k],j=this.dateObj[h.connection];switch(h.type){case "server":a=
new f.Graphic.Server({config:h});break;default:a=new f.Graphic.Router({config:h})}a.on("nodeClick",function(a,b){d.trigger("nodeClick",b)});a.on("mousedown",function(a,b){d.__startDraggingItem(a,b)});h=e.generateSymbol({type:"line",x1:h.x+16,y1:h.y+16,x2:j.x+16,y2:j.y+16,stroke:"#ccc"});h.style.strokeDasharray="9, 5";this.line.appendChild(h);this.icon.appendChild(a.graphic)}},__calcStagePosition:function(){this.width=this.getOption("width");this.height=this.getOption("height");this.offsetTop=this.graphic.offsetTop;
this.offsetLeft=this.graphic.offsetLeft},__startDraggingItem:function(b,c){var a=this;this.__calcStagePosition();var d=function(d){var e=d.pageY;itemX=d.pageX-a.offsetLeft;itemY=e-a.offsetTop;b.img.setAttribute("x",itemX);b.img.setAttribute("y",itemY);c.x=itemX;c.y=itemY;a.redraw()};document.addEventListener("mousemove",d);document.addEventListener("mouseup",function(){document.removeEventListener("mousemove",d,!1)})}}})})(fruit,fruit.util,fruit.Graphic.GraphicManager);
